
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Derive Distributions for Risky + Safe Asset (Saving Only) Interpolated-Percentage (Wrapper)</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-04"><meta name="DC.source" content="ff_ipwkz_ds_wrapper.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Derive Distributions for Risky + Safe Asset (Saving Only) Interpolated-Percentage (Wrapper)</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">FF_IPWKZ_DS_WRAPPER finds the stationary asset distributions</a></li><li><a href="#3">Default</a></li><li><a href="#4">Parse Parameters 1</a></li><li><a href="#5">Parse Parameters</a></li><li><a href="#6">Start Profiler and Timer</a></li><li><a href="#7">Solve DP</a></li><li><a href="#8">Derive Distribution</a></li><li><a href="#9">End Profiler and Timer</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> [result_map] = ff_ipwkz_ds_wrapper(varargin)
</pre><h2 id="2">FF_IPWKZ_DS_WRAPPER finds the stationary asset distributions</h2><p>This is a warpper function.</p><h2 id="3">Default</h2><div><ol><li>it_subset = 5 is basic invoke quick test</li><li>it_subset = 6 is invoke full test</li><li>it_subset = 7 is profiling invoke</li><li>it_subset = 8 is matlab publish</li><li>it_subset = 9 is invoke operational (only final stats) and coh graph</li></ol></div><pre class="codeinput">it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_ipwkz_set_default_param(it_param_set);

<span class="comment">% parameters can be set inside ffs_ipwkz_set_default_param or updated here</span>
<span class="comment">% param_map('it_w_perc_n') = 50;</span>
<span class="comment">% param_map('it_ak_perc_n') = param_map('it_w_perc_n');</span>
<span class="comment">% param_map('it_z_n') = 15;</span>
<span class="comment">% param_map('fl_coh_interp_grid_gap') = 0.025;</span>
<span class="comment">% param_map('it_c_interp_grid_gap') = 0.001;</span>
<span class="comment">% param_map('fl_w_interp_grid_gap') = 0.25;</span>
<span class="comment">% param_map('it_w_perc_n') = 100;</span>
<span class="comment">% param_map('it_ak_perc_n') = param_map('it_w_perc_n');</span>
<span class="comment">% param_map('it_z_n') = 11;</span>
<span class="comment">% param_map('fl_coh_interp_grid_gap') = 0.1;</span>
<span class="comment">% param_map('it_c_interp_grid_gap') = 10^-4;</span>
<span class="comment">% param_map('fl_w_interp_grid_gap') = 0.1;</span>

<span class="comment">% param_map('st_analytical_stationary_type') = 'loop';</span>
<span class="comment">% param_map('st_analytical_stationary_type') = 'vector';</span>
param_map(<span class="string">'st_analytical_stationary_type'</span>) = <span class="string">'eigenvector'</span>;

<span class="comment">% get armt and func map</span>
[armt_map, func_map] = ffs_ipwkz_get_funcgrid(param_map, support_map, bl_input_override); <span class="comment">% 1 for override</span>
default_params = {param_map support_map armt_map func_map};
</pre><h2 id="4">Parse Parameters 1</h2><pre class="codeinput"><span class="comment">% if varargin only has param_map and support_map,</span>
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
<span class="keyword">if</span> params_len &gt;= 1 &amp;&amp; params_len &lt;= 2
    <span class="comment">% If override param_map, re-generate armt and func if they are not</span>
    <span class="comment">% provided</span>
    bl_input_override = true;
    [armt_map, func_map] = ffs_ipwkz_get_funcgrid(param_map, support_map, bl_input_override);
<span class="keyword">else</span>
    <span class="comment">% Override all</span>
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
<span class="keyword">end</span>

<span class="comment">% if profile, profile DP + Dist here</span>
support_map(<span class="string">'bl_profile_dist'</span>) = false;

<span class="comment">% append function name</span>
st_func_name = <span class="string">'ff_ipwkz_ds_wrapper'</span>;
support_map(<span class="string">'st_profile_name_main'</span>) = [st_func_name support_map(<span class="string">'st_profile_name_main'</span>)];
support_map(<span class="string">'st_mat_name_main'</span>) = [st_func_name support_map(<span class="string">'st_mat_name_main'</span>)];
support_map(<span class="string">'st_img_name_main'</span>) = [st_func_name support_map(<span class="string">'st_img_name_main'</span>)];
</pre><h2 id="5">Parse Parameters</h2><pre class="codeinput"><span class="comment">% param_map</span>
params_group = values(param_map, {<span class="string">'st_analytical_stationary_type'</span>});
[st_analytical_stationary_type] = params_group{:};

<span class="comment">% support_map</span>
params_group = values(support_map, <span class="keyword">...</span>
    {<span class="string">'st_profile_path'</span>, <span class="string">'st_profile_prefix'</span>, <span class="string">'st_profile_name_main'</span>, <span class="string">'st_profile_suffix'</span>,<span class="string">'bl_time'</span>});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};
</pre><h2 id="6">Start Profiler and Timer</h2><p>Start Profile</p><pre class="codeinput"><span class="keyword">if</span> (it_param_set == 7)
    close <span class="string">all</span>;
    profile <span class="string">off</span>;
    profile <span class="string">on</span>;
<span class="keyword">end</span>

<span class="comment">% Start Timer</span>
<span class="keyword">if</span> (bl_time)
    tic;
<span class="keyword">end</span>
</pre><h2 id="7">Solve DP</h2><pre class="codeinput">bl_input_override = true;
result_map = ff_ipwkz_vf_vecsv(param_map, support_map, armt_map, func_map);
</pre><img vspace="5" hspace="5" src="ff_ipwkz_ds_wrapper_01.png" alt=""> <img vspace="5" hspace="5" src="ff_ipwkz_ds_wrapper_02.png" alt=""> <h2 id="8">Derive Distribution</h2><pre class="codeinput"><span class="keyword">if</span> (strcmp(st_analytical_stationary_type, <span class="string">'loop'</span>))

    result_map = ff_iwkz_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'vector'</span>))

    result_map = ff_iwkz_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'eigenvector'</span>))

    result_map = ff_iwkz_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">end</span>
</pre><pre class="codeoutput">----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_coh
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    6.7186

fl_choice_sd
    3.0963

fl_choice_coefofvar
    0.4609

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   1.1951e-13

tb_prob_drv
    percentiles    cl_mt_pol_cohPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    _____________________________    ________________________________

        0.1                   2.0474                           0.00052279           
          1                   2.5486                            0.0047587           
          5                     3.15                             0.022821           
         10                   3.6512                              0.05226           
         15                   3.9519                              0.07821           
         20                   4.2526                              0.10742           
         25                   4.5533                              0.14354           
         35                   5.1547                              0.22139           
         50                   6.0568                              0.34534           
         65                   7.0592                              0.48143           
         75                   8.0615                              0.59583           
         80                   8.7632                              0.66335           
         85                   9.5651                              0.72973           
         90                   10.668                               0.7998           
         95                   12.672                              0.88537           
         99                   17.484                              0.97064           
       99.9                   23.899                              0.99606           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_a
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    0.2993

fl_choice_sd
    1.0380

fl_choice_coefofvar
    3.4678

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
  -4.7898e-37

tb_prob_drv
    percentiles    cl_mt_pol_aPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                 0.0011697                        6.5804e-06           
          1                 0.0015079                        5.7852e-05           
          5                  0.001992                        0.00032067           
         10                 0.0023724                        0.00064509           
         15                  0.002645                         0.0011016           
         20                 0.0028625                         0.0015405           
         25                 0.0030882                         0.0020341           
         35                 0.0035747                         0.0031743           
         50                 0.0043953                         0.0051769           
         65                  0.005551                         0.0076662           
         75                 0.0069908                         0.0096881           
         80                 0.0085792                          0.010959           
         85                   0.14864                          0.015859           
         90                   0.81026                          0.093966           
         95                    2.0486                            0.3191           
         99                    5.3028                           0.74941           
       99.9                    10.266                           0.95851           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_k
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    4.5898

fl_choice_sd
    2.1972

fl_choice_coefofvar
    0.4787

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   1.3508e-12

tb_prob_drv
    percentiles    cl_mt_pol_kPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  1.1685                          0.00042869           
          1                  1.5064                           0.0037689           
          5                  1.9872                            0.018472           
         10                  2.3156                            0.042544           
         15                   2.577                            0.070033           
         20                  2.7923                            0.099827           
         25                  3.0619                             0.13589           
         35                  3.4663                             0.20368           
         50                  4.1764                             0.33114           
         65                  4.8912                             0.47165           
         75                  5.6061                             0.58719           
         80                  6.1527                             0.65054           
         85                  6.5748                             0.71892           
         90                  7.5046                             0.79656           
         95                  8.9571                             0.88405           
         99                   12.06                              0.9698           
       99.9                  16.044                              0.9961           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_c
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    1.8294

fl_choice_sd
    0.4890

fl_choice_coefofvar
    0.2673

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   1.1951e-13

tb_prob_drv
    percentiles    cl_mt_pol_cPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  0.87776                         0.00082625           
          1                  0.99978                          0.0054285           
          5                    1.158                           0.031384           
         10                   1.2679                           0.066956           
         15                   1.3388                           0.098372           
         20                   1.4071                            0.13618           
         25                    1.475                            0.17566           
         35                   1.5867                            0.26397           
         50                   1.7618                             0.4001           
         65                   1.9538                            0.54751           
         75                   2.1159                            0.66468           
         80                   2.2202                            0.71815           
         85                    2.329                            0.77991           
         90                   2.4949                            0.84888           
         95                   2.7409                            0.91696           
         99                   3.2408                             0.9811           
       99.9                   3.8193                            0.99788           

xxx All Variables PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar       min         max      pYis0    pYls0    pYgr0     pYisMINY       pYisMAXY        p0_1          p1           p5          p10         p15          p20          p25          p35          p50         p65          p75          p80         p85        p90       p95       p99      p99_9 
                     _______    _______    _________    __________    ______    _____    _____    _____    ___________    ___________    _________    _________    ________    _________    ________    _________    _________    _________    _________    ________    _________    _________    _______    _______    ______    ______    ______

    cl_mt_pol_coh     6.7186     3.0963     0.46085        0.44365    57.277      0        0        1      -1.1319e-34     1.1951e-13       2.0474       2.5486        3.15       3.6512      3.9519       4.2526       4.5533       5.1547       6.0568      7.0592       8.0615       8.7632     9.5651     10.668    12.672    17.484    23.899
    cl_mt_pol_a      0.29931      1.038      3.4678     9.9839e-05    48.221      0        0        1      -1.1319e-34    -4.7898e-37    0.0011697    0.0015079    0.001992    0.0023724    0.002645    0.0028625    0.0030882    0.0035747    0.0043953    0.005551    0.0069908    0.0085792    0.14864    0.81026    2.0486    5.3028    10.266
    cl_mt_pol_k       4.5898     2.1972     0.47871       0.099739        22      0        0        1      -1.1319e-34     1.3508e-12       1.1685       1.5064      1.9872       2.3156       2.577       2.7923       3.0619       3.4663       4.1764      4.8912       5.6061       6.1527     6.5748     7.5046    8.9571     12.06    16.044
    cl_mt_pol_c       1.8294    0.48898     0.26729        0.34381    7.0568      0        0        1      -1.1319e-34     1.1951e-13      0.87776      0.99978       1.158       1.2679      1.3388       1.4071        1.475       1.5867       1.7618      1.9538       2.1159       2.2202      2.329     2.4949    2.7409    3.2408    3.8193

xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
                     fracByP0_1     fracByP1      fracByP5     fracByP10     fracByP15    fracByP20    fracByP25    fracByP35    fracByP50    fracByP65    fracByP75    fracByP80    fracByP85    fracByP90    fracByP95    fracByP99    fracByP99_9
                     __________    __________    __________    __________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    ___________

    cl_mt_pol_coh    0.00052279     0.0047587      0.022821       0.05226      0.07821      0.10742      0.14354      0.22139      0.34534      0.48143      0.59583     0.66335      0.72973       0.7998      0.88537      0.97064       0.99606  
    cl_mt_pol_a      6.5804e-06    5.7852e-05    0.00032067    0.00064509    0.0011016    0.0015405    0.0020341    0.0031743    0.0051769    0.0076662    0.0096881    0.010959     0.015859     0.093966       0.3191      0.74941       0.95851  
    cl_mt_pol_k      0.00042869     0.0037689      0.018472      0.042544     0.070033     0.099827      0.13589      0.20368      0.33114      0.47165      0.58719     0.65054      0.71892      0.79656      0.88405       0.9698        0.9961  
    cl_mt_pol_c      0.00082625     0.0054285      0.031384      0.066956     0.098372      0.13618      0.17566      0.26397       0.4001      0.54751      0.66468     0.71815      0.77991      0.84888      0.91696       0.9811       0.99788  

</pre><h2 id="9">End Profiler and Timer</h2><p>End Timer</p><pre class="codeinput"><span class="keyword">if</span> (bl_time)
    toc;
<span class="keyword">end</span>

<span class="comment">% End Profile</span>
<span class="keyword">if</span> (it_param_set == 7)
    profile <span class="string">off</span>
    profile <span class="string">viewer</span>
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile(<span class="string">'info'</span>), strcat(st_profile_path, st_file_name));
<span class="keyword">end</span>

<span class="comment">% % End Profiling</span>
<span class="comment">% if (it_param_set == 7)</span>
<span class="comment">%     profile off</span>
<span class="comment">%     profile viewer</span>
<span class="comment">%</span>
<span class="comment">%     % append function name</span>
<span class="comment">%     st_func_name = 'ff_ipwkz_ds_wrapper';</span>
<span class="comment">%     support_map('st_profile_path') = [support_map('st_matimg_path_root') '/solve/profile/'];</span>
<span class="comment">%     support_map('st_profile_name_main') = [st_func_name st_profile_name_main];</span>
<span class="comment">%</span>
<span class="comment">%     % support_map</span>
<span class="comment">%     params_group = values(support_map, {'st_profile_path', ...</span>
<span class="comment">%         'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix'});</span>
<span class="comment">%     [st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix] = params_group{:};</span>
<span class="comment">%</span>
<span class="comment">%     % Save</span>
<span class="comment">%     st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];</span>
<span class="comment">%     profsave(profile('info'), strcat(st_profile_path, st_file_name));</span>
<span class="comment">% end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">
ans = 

  Map with properties:

        Count: 14
      KeyType: char
    ValueType: any

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Derive Distributions for Risky + Safe Asset (Saving Only) Interpolated-Percentage (Wrapper)
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*

%%
function [result_map] = ff_ipwkz_ds_wrapper(varargin)
%% FF_IPWKZ_DS_WRAPPER finds the stationary asset distributions
% This is a warpper function.

%% Default
% # it_subset = 5 is basic invoke quick test
% # it_subset = 6 is invoke full test
% # it_subset = 7 is profiling invoke
% # it_subset = 8 is matlab publish
% # it_subset = 9 is invoke operational (only final stats) and coh graph

it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_ipwkz_set_default_param(it_param_set);

% parameters can be set inside ffs_ipwkz_set_default_param or updated here
% param_map('it_w_perc_n') = 50;
% param_map('it_ak_perc_n') = param_map('it_w_perc_n');
% param_map('it_z_n') = 15;
% param_map('fl_coh_interp_grid_gap') = 0.025;
% param_map('it_c_interp_grid_gap') = 0.001;
% param_map('fl_w_interp_grid_gap') = 0.25;
% param_map('it_w_perc_n') = 100;
% param_map('it_ak_perc_n') = param_map('it_w_perc_n');
% param_map('it_z_n') = 11;
% param_map('fl_coh_interp_grid_gap') = 0.1;
% param_map('it_c_interp_grid_gap') = 10^-4;
% param_map('fl_w_interp_grid_gap') = 0.1;

% param_map('st_analytical_stationary_type') = 'loop';
% param_map('st_analytical_stationary_type') = 'vector';
param_map('st_analytical_stationary_type') = 'eigenvector';

% get armt and func map
[armt_map, func_map] = ffs_ipwkz_get_funcgrid(param_map, support_map, bl_input_override); % 1 for override
default_params = {param_map support_map armt_map func_map};

%% Parse Parameters 1

% if varargin only has param_map and support_map,
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
if params_len >= 1 && params_len <= 2
    % If override param_map, re-generate armt and func if they are not
    % provided
    bl_input_override = true;
    [armt_map, func_map] = ffs_ipwkz_get_funcgrid(param_map, support_map, bl_input_override);
else
    % Override all
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
end

% if profile, profile DP + Dist here
support_map('bl_profile_dist') = false;

% append function name
st_func_name = 'ff_ipwkz_ds_wrapper';
support_map('st_profile_name_main') = [st_func_name support_map('st_profile_name_main')];
support_map('st_mat_name_main') = [st_func_name support_map('st_mat_name_main')];
support_map('st_img_name_main') = [st_func_name support_map('st_img_name_main')];

%% Parse Parameters

% param_map
params_group = values(param_map, {'st_analytical_stationary_type'});
[st_analytical_stationary_type] = params_group{:};

% support_map
params_group = values(support_map, ...
    {'st_profile_path', 'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix','bl_time'});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};

%% Start Profiler and Timer
% Start Profile
if (it_param_set == 7)
    close all;
    profile off;
    profile on;
end

% Start Timer
if (bl_time)
    tic;
end

%% Solve DP

bl_input_override = true;
result_map = ff_ipwkz_vf_vecsv(param_map, support_map, armt_map, func_map);

%% Derive Distribution

if (strcmp(st_analytical_stationary_type, 'loop'))
    
    result_map = ff_iwkz_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
elseif (strcmp(st_analytical_stationary_type, 'vector'))
    
    result_map = ff_iwkz_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
elseif (strcmp(st_analytical_stationary_type, 'eigenvector'))
    
    result_map = ff_iwkz_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
end

%% End Profiler and Timer
% End Timer
if (bl_time)
    toc;
end

% End Profile
if (it_param_set == 7)
    profile off
    profile viewer
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile('info'), strcat(st_profile_path, st_file_name));
end

% % End Profiling
% if (it_param_set == 7)
%     profile off
%     profile viewer
%     
%     % append function name
%     st_func_name = 'ff_ipwkz_ds_wrapper';
%     support_map('st_profile_path') = [support_map('st_matimg_path_root') '/solve/profile/'];
%     support_map('st_profile_name_main') = [st_func_name st_profile_name_main];
%     
%     % support_map
%     params_group = values(support_map, {'st_profile_path', ...
%         'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix'});
%     [st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix] = params_group{:};
%     
%     % Save
%     st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
%     profsave(profile('info'), strcat(st_profile_path, st_file_name));
% end


end

##### SOURCE END #####
--></body></html>