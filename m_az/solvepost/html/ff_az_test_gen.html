
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Simulate Savings Model Along Various Parameter Arrays</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-22"><meta name="DC.source" content="ff_az_test_gen.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Simulate Savings Model Along Various Parameter Arrays</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">FF_AZ_TEST_GEN post solution simulation</a></li><li><a href="#3">Default Parameter Loops</a></li><li><a href="#4">Default Parameters</a></li><li><a href="#5">Array Parameters</a></li><li><a href="#6">Default</a></li><li><a href="#7">Parse Inputs</a></li><li><a href="#8">Parse Generate or Get Current</a></li><li><a href="#9">Store Mat Strings</a></li><li><a href="#10">Set Solve Sizes</a></li><li><a href="#11">Parase Preference and Shock Parameters</a></li><li><a href="#12">Display support_map</a></li><li><a href="#13">Generate New or Obtain Existing Mat</a></li><li><a href="#14">Initialize Storage</a></li><li><a href="#15">Simulate 1: Cross Simulation, fix one point, extend parameters in each direction</a></li><li><a href="#16">Simulate 2: Full Grid Simulation, Simulate Along Full Grid</a></li><li><a href="#17">Save Mat</a></li><li><a href="#20">Simulate Model given Parameter and Process Results</a></li><li><a href="#22">Reset Parameters that are determined by other parameters</a></li><li><a href="#23">Simulate Model</a></li><li><a href="#24">Store Results to Table</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> [tb_outcomes, support_map, param_desc_map] = ff_az_test_gen(varargin)
</pre><h2 id="2">FF_AZ_TEST_GEN post solution simulation</h2><p>Simulate the model along various dimensions</p><p>@param st_simu_type string cross vs gridd simulation. cross: with (x,y), vary X fixing y, vary Y fixing x. grid: all (x,y) \in (X,Y)</p><div><ol><li><i>st_simu_type</i> = 'c' for cross simulate, if 'c', then each array value of param_tstar_map container is simulated over one by one. So if there are two arrays associated with two keys in param_tstar_map with length N1 and N2, the total number of simulations equals to N1 + N2.</li><li><i>st_simu_type</i> = 'g' for grid simulate, if 'g', then all possible combinations of the arrays in param_tstar_map are used to create combinations of parameter values. So if there are two arrays with lengths N1 and N2, there will be N1*N2 number of simulations</li><li><i>st_simu_type</i> = 'r' for random simulate, if 'r', then should specify param_map('it_st_simu_type_g_seed') value. Only the minimum and the maximum values for each array in param_tstar_map matters. Based on these minimum and maximum, and also what is in param_map('it_st_simu_type_g_simun'). Random parameter values will be drawn.</li></ol></div><p>@param it_size_type integer:  param_map support_map param_tstar_map param_desc_map # it_size_type = 1 is quick grid # it_size_type = 2 is standard grid # it_size_type = 3 is denser grid</p><p>@param cl_st_param_keys cell string cell array container parameters that we are simulating over</p><p>@param param_map container parameter container</p><p>@param support_map container support container</p><p>@param param_tstar_map container map of arrays with keys that are parameter keys. This could be specified outside with array values to override defaults here.</p><p>@param param_desc_map container map of strings for each parameter key.</p><p>@param tb_outcomes table table of simulation outcomes for various statistics for each set of parameters. Columns are statistics, rows are outcome variables, groups of rows are different simulations.</p><p>@include</p><div><ul><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf_vecsv.html">ff_az_vf_vecsv</a></li><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html">ff_az_ds_vecsv</a></li><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_default_param.html">ffs_az_set_default_param</a></li><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_get_funcgrid.html">ffs_az_get_funcgrid</a></li></ul></div><p>@seealso</p><div><ul><li><i>SPEED</i> savings only overall benchmark speed testing: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_speed/html/fsi_az_ds_vecsv_speed.html">fsi_az_ds_vecsv_speed</a></li><li><i>PREFERENCE</i> savings only preference testing: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_pref/html/fsi_az_ds_vecsv_pref.html">fsi_az_ds_vecsv_pref</a></li><li><i>PREFERENCE</i> savings only preference testing cross: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_pref/html/fsi_az_ds_vecsv_pref_cross.html">fsi_az_ds_vecsv_pref_cross</a></li><li><i>SHOCK</i> savings only shock testing: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_shock/html/fsi_az_ds_vecsv_shock.html">fsi_az_ds_vecsv_shock</a></li><li><i>SHOCK</i> savings only shock testing cross: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_shock/html/fsi_az_ds_vecsv_shock_cross.html">fsi_az_ds_vecsv_shock_cross</a></li><li><i>PRICE</i> savings only wage and interest rate testing cross: adjust wage and savings rate <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_price/html/fsi_az_ds_vecsv_price_cross.html">fsi_az_ds_vecsv_price_cross</a></li></ul></div><h2 id="3">Default Parameter Loops</h2><pre class="codeinput"><span class="comment">% Loops to Vary for Simulations Below</span>
it_size_type = 2;
cl_st_param_keys = {<span class="string">'fl_crra'</span>, <span class="string">'fl_beta'</span>};
st_simu_type = <span class="string">'r'</span>; <span class="comment">% 'c' for cross or 'g' for grid or 'r' rand</span>
</pre><h2 id="4">Default Parameters</h2><pre class="codeinput"><span class="comment">% Base parameters call</span>
it_param_set = 9;
[param_map, support_map] = ffs_az_set_default_param(it_param_set);

<span class="comment">% Timer</span>
support_map(<span class="string">'bl_timer'</span>) = true;

<span class="comment">% Mat Storage</span>
support_map(<span class="string">'bl_mat_test'</span>) = true;
st_matimg_path_root = support_map(<span class="string">'st_matimg_path_root'</span>);
<span class="comment">% test_borinf for default: cl_st_param_keys = [3, 8, 9]</span>
support_map(<span class="string">'st_mat_test_path'</span>) = [st_matimg_path_root <span class="string">'/test/ff_az_ds_vecsv/mat/'</span>];

<span class="comment">% Generate or Load</span>
<span class="comment">% if bl_replacefile is true, that means even if file already exists,</span>
<span class="comment">% generaet new. bl_replacefile is false, then if false does not exist</span>
<span class="comment">% generate, if file exists does not generate.</span>
support_map(<span class="string">'bl_replacefile'</span>) = true;
support_map(<span class="string">'bl_display_simu_stats'</span>) = true;

<span class="comment">% param map modification</span>
param_map(<span class="string">'it_st_simu_type_g_seed'</span>) = 123;
param_map(<span class="string">'it_st_simu_type_g_simun'</span>) = 20;
</pre><h2 id="5">Array Parameters</h2><pre class="codeinput">ls_st_param_key = {<span class="string">'fl_crra'</span>, <span class="string">'fl_beta'</span>, <span class="keyword">...</span>
                    <span class="string">'fl_w'</span>, <span class="string">'fl_r_save'</span>, <span class="keyword">...</span>
                    <span class="string">'fl_z_rho'</span>, <span class="string">'fl_z_sig'</span>, <span class="keyword">...</span>
                    <span class="string">'fl_a_max'</span>, <span class="string">'it_z_n'</span>, <span class="string">'it_a_n'</span>};

param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
it_simu_vec_len = 5;
param_tstar_map(ls_st_param_key{1}) = linspace(1, 5, it_simu_vec_len);
param_tstar_map(ls_st_param_key{2}) = linspace(0.87, 0.97, it_simu_vec_len);
param_tstar_map(ls_st_param_key{3}) = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map(ls_st_param_key{4}) = linspace(0.01, 0.04, it_simu_vec_len);
param_tstar_map(ls_st_param_key{5}) = linspace(0, 0.99, it_simu_vec_len);
param_tstar_map(ls_st_param_key{6}) = linspace(0.01, 0.5, it_simu_vec_len);
param_tstar_map(ls_st_param_key{7}) = linspace(50, 80, it_simu_vec_len);
param_tstar_map(ls_st_param_key{8}) = unique(round(linspace(5, 25, it_simu_vec_len)));
param_tstar_map(ls_st_param_key{9}) = unique(round(linspace(100, 2500, it_simu_vec_len)));

param_desc_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
param_desc_map(ls_st_param_key{1}) = {<span class="string">'CRRA'</span>};
param_desc_map(ls_st_param_key{2}) = {<span class="string">'Discount'</span>};
param_desc_map(ls_st_param_key{3}) = {<span class="string">'Wage'</span>};
param_desc_map(ls_st_param_key{4}) = {<span class="string">'Save Interest'</span>};
param_desc_map(ls_st_param_key{5}) = {<span class="string">'Shock Persistence'</span>};
param_desc_map(ls_st_param_key{6}) = {<span class="string">'Shock SD'</span>};
param_desc_map(ls_st_param_key{7}) = {<span class="string">'Max Asset Bound'</span>};
param_desc_map(ls_st_param_key{8}) = {<span class="string">'Shock Grid N'</span>};
param_desc_map(ls_st_param_key{9}) = {<span class="string">'Asset Grid N'</span>};
</pre><h2 id="6">Default</h2><pre class="codeinput">default_params = {st_simu_type it_size_type cl_st_param_keys <span class="keyword">...</span>
                    param_map support_map param_tstar_map param_desc_map};
</pre><h2 id="7">Parse Inputs</h2><p>override default set above if any parameters are updated</p><pre class="codeinput">params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};

st_simu_type = default_params{1};
it_size_type = default_params{2};
cl_st_param_keys = default_params{3};

param_map = [param_map; default_params{4}];
support_map = [support_map; default_params{5}];
param_tstar_map = [param_tstar_map; default_params{6}];
param_desc_map = [param_desc_map; default_params{7}];

<span class="comment">% Generate additional Elements of param_map for container map display</span>
param_map(<span class="string">'it_size_type'</span>) = it_size_type;
param_map(<span class="string">'cl_st_param_keys'</span>) = cl_st_param_keys;
ar_param_keys_idx = cell2mat(cellfun(@(m) find(strcmp(ls_st_param_key, m)), <span class="keyword">...</span>
    cl_st_param_keys, <span class="string">'UniformOutput'</span>, false));
param_map(<span class="string">'ar_param_keys_idx'</span>) = ar_param_keys_idx;
</pre><h2 id="8">Parse Generate or Get Current</h2><p>if bl_gen = true, generate, if bl_gen = false, get saved file and output. If bl_replacefile is true, that means the existing file must be replaced, which will set bl_gen to true</p><pre class="codeinput">params_group = values(support_map, {<span class="string">'bl_replacefile'</span>, <span class="string">'bl_display_simu_stats'</span>});
[bl_replacefile, bl_display_simu_stats] = params_group{:};

params_group = values(param_map, {<span class="string">'it_st_simu_type_g_seed'</span>, <span class="string">'it_st_simu_type_g_simun'</span>});
[it_st_simu_type_g_seed, it_st_simu_type_g_simun] = params_group{:};
</pre><h2 id="9">Store Mat Strings</h2><div><ol><li><i>it_total_length</i>: this is the total length of all selected arrays</li><li><i>ar_param_keys_idx</i>: these are the linear index of the selected keys among all possible keys</li></ol></div><pre class="codeinput">it_total_length = sum(cell2mat(cellfun(@(m) length(param_tstar_map(m)), <span class="keyword">...</span>
                                cl_st_param_keys, <span class="string">'UniformOutput'</span>, false)));

support_map(<span class="string">'st_mat_test_prefix'</span>) = [<span class="string">''</span>];
support_map(<span class="string">'st_mat_test_name_main'</span>) = [<span class="string">'r'</span>];
support_map(<span class="string">'st_mat_test_suffix'</span>) = [<span class="string">'_g'</span> strrep(num2str(ar_param_keys_idx), <span class="string">'  '</span>, <span class="string">''</span>) <span class="keyword">...</span>
                                     <span class="string">'_c'</span> st_simu_type <span class="keyword">...</span>
                                     <span class="string">'_t'</span> num2str(it_size_type) <span class="string">'l'</span> num2str(it_total_length)];
</pre><h2 id="10">Set Solve Sizes</h2><pre class="codeinput"><span class="keyword">if</span> (it_size_type == 1)

    <span class="comment">% Basic Test Run</span>
    param_map(<span class="string">'it_z_n'</span>) = 11;
    param_map(<span class="string">'it_a_n'</span>) = 100;

<span class="keyword">elseif</span> (it_size_type == 2)

    <span class="comment">% Full Run</span>

<span class="keyword">elseif</span> (it_size_type == 3)

    <span class="comment">% Denser Run</span>
    param_map(<span class="string">'it_z_n'</span>) = 27;
    param_map(<span class="string">'it_a_n'</span>) = 2250;

<span class="keyword">end</span>
</pre><h2 id="11">Parase Preference and Shock Parameters</h2><pre class="codeinput"><span class="comment">% support map</span>
params_group = values(support_map, {<span class="string">'bl_mat_test'</span>, <span class="string">'st_mat_test_path'</span>, <span class="string">'st_mat_test_prefix'</span>, <span class="string">'st_mat_test_name_main'</span>, <span class="string">'st_mat_test_suffix'</span>});
[bl_mat_test, st_mat_test_path, st_mat_test_prefix, st_mat_test_name_main, st_mat_test_suffix] = params_group{:};
</pre><h2 id="12">Display support_map</h2><pre class="codeinput">fft_container_map_display(support_map);
fft_container_map_display(param_map);
fft_container_map_display(param_tstar_map);
</pre><pre class="codeoutput">----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 47
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = bl_display ; val = false
pos = 2 ; key = bl_display_defparam ; val = false
pos = 3 ; key = bl_display_dist ; val = false
pos = 4 ; key = bl_display_final ; val = false
pos = 5 ; key = bl_display_final_dist ; val = true
pos = 6 ; key = bl_display_final_dist_detail ; val = false
pos = 7 ; key = bl_display_funcgrids ; val = false
pos = 8 ; key = bl_display_simu_stats ; val = true
pos = 9 ; key = bl_graph ; val = true
pos = 10 ; key = bl_graph_coh_t_coh ; val = false
pos = 11 ; key = bl_graph_funcgrids ; val = false
pos = 12 ; key = bl_graph_onebyones ; val = true
pos = 13 ; key = bl_graph_pol_lvl ; val = false
pos = 14 ; key = bl_graph_pol_pct ; val = false
pos = 15 ; key = bl_graph_val ; val = false
pos = 16 ; key = bl_img_save ; val = false
pos = 17 ; key = bl_mat ; val = false
pos = 18 ; key = bl_mat_test ; val = true
pos = 19 ; key = bl_post ; val = true
pos = 20 ; key = bl_profile ; val = false
pos = 21 ; key = bl_profile_dist ; val = false
pos = 22 ; key = bl_replacefile ; val = true
pos = 23 ; key = bl_time ; val = false
pos = 24 ; key = bl_timer ; val = true
pos = 25 ; key = it_display_every ; val = 20
pos = 26 ; key = it_display_final_colmax ; val = 12
pos = 27 ; key = it_display_final_rowmax ; val = 100
pos = 28 ; key = it_display_summmat_colmax ; val = 5
pos = 29 ; key = it_display_summmat_rowmax ; val = 5
pos = 30 ; key = st_img_name_main ; val = _default
pos = 31 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_az//solve/img/
pos = 32 ; key = st_img_prefix ; val = 
pos = 33 ; key = st_img_suffix ; val = _p9.png
pos = 34 ; key = st_mat_name_main ; val = _default
pos = 35 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_az//solve/mat/
pos = 36 ; key = st_mat_prefix ; val = 
pos = 37 ; key = st_mat_suffix ; val = _p9
pos = 38 ; key = st_mat_test_name_main ; val = r
pos = 39 ; key = st_mat_test_path ; val = C:/Users/fan/CodeDynaAsset//m_az//test/ff_az_ds_vecsv/mat/
pos = 40 ; key = st_mat_test_prefix ; val = 
pos = 41 ; key = st_mat_test_suffix ; val = _g12_cr_t2l10
pos = 42 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_az/
pos = 43 ; key = st_profile_name_main ; val = _default
pos = 44 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_az//solve/profile/
pos = 45 ; key = st_profile_prefix ; val = 
pos = 46 ; key = st_profile_suffix ; val = _p9
pos = 47 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx    value
                                    __    ___    _____

    bl_display                       1     1        0 
    bl_display_defparam              2     2        0 
    bl_display_dist                  3     3        0 
    bl_display_final                 4     4        0 
    bl_display_final_dist            5     5        1 
    bl_display_final_dist_detail     6     6        0 
    bl_display_funcgrids             7     7        0 
    bl_display_simu_stats            8     8        1 
    bl_graph                         9     9        1 
    bl_graph_coh_t_coh              10    10        0 
    bl_graph_funcgrids              11    11        0 
    bl_graph_onebyones              12    12        1 
    bl_graph_pol_lvl                13    13        0 
    bl_graph_pol_pct                14    14        0 
    bl_graph_val                    15    15        0 
    bl_img_save                     16    16        0 
    bl_mat                          17    17        0 
    bl_mat_test                     18    18        1 
    bl_post                         19    19        1 
    bl_profile                      20    20        0 
    bl_profile_dist                 21    21        0 
    bl_replacefile                  22    22        1 
    bl_time                         23    23        0 
    bl_timer                        24    24        1 
    it_display_every                25    25       20 
    it_display_final_colmax         26    26       12 
    it_display_final_rowmax         27    27      100 
    it_display_summmat_colmax       28    28        5 
    it_display_summmat_rowmax       29    29        5 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                             i     idx
                             __    ___

    st_img_name_main          1    30 
    st_img_path               2    31 
    st_img_prefix             3    32 
    st_img_suffix             4    33 
    st_mat_name_main          5    34 
    st_mat_path               6    35 
    st_mat_prefix             7    36 
    st_mat_suffix             8    37 
    st_mat_test_name_main     9    38 
    st_mat_test_path         10    39 
    st_mat_test_prefix       11    40 
    st_mat_test_suffix       12    41 
    st_matimg_path_root      13    42 
    st_profile_name_main     14    43 
    st_profile_path          15    44 
    st_profile_prefix        16    45 
    st_profile_suffix        17    46 
    st_title_prefix          18    47 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 29
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = ar_param_keys_idx ;rown= 1 ,coln= 2
ar_param_keys_idx :mu= 1.5 ,sd= 0.70711 ,min= 1 ,max= 2
               zi_1_c1    zi_2_c2
               _______    _______

    zi_1_r1       1          2   

pos = 2 ; key = bl_loglin ; val = false
pos = 3 ; key = cl_st_param_keys ; val = fl_crra
pos = 4 ; key = fl_a_max ; val = 50
pos = 5 ; key = fl_a_min ; val = 0
pos = 6 ; key = fl_b_bd ; val = 0
pos = 7 ; key = fl_beta ; val = 0.94
pos = 8 ; key = fl_crra ; val = 1.5
pos = 9 ; key = fl_loglin_threshold ; val = 1
pos = 10 ; key = fl_nan_replace ; val = -9999
pos = 11 ; key = fl_r_save ; val = 0.025
pos = 12 ; key = fl_tol_dist ; val = 1e-05
pos = 13 ; key = fl_tol_pol ; val = 1e-05
pos = 14 ; key = fl_tol_val ; val = 1e-05
pos = 15 ; key = fl_w ; val = 1.28
pos = 16 ; key = fl_z_mu ; val = 0
pos = 17 ; key = fl_z_rho ; val = 0.8
pos = 18 ; key = fl_z_sig ; val = 0.2
pos = 19 ; key = it_a_n ; val = 750
pos = 20 ; key = it_maxiter_dist ; val = 1000
pos = 21 ; key = it_maxiter_val ; val = 1000
pos = 22 ; key = it_size_type ; val = 2
pos = 23 ; key = it_st_simu_type_g_seed ; val = 123
pos = 24 ; key = it_st_simu_type_g_simun ; val = 20
pos = 25 ; key = it_tol_pol_nochange ; val = 25
pos = 26 ; key = it_trans_power_dist ; val = 1000
pos = 27 ; key = it_z_n ; val = 15
pos = 28 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 29 ; key = st_model ; val = az
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    rowN    colN    mean      std      min    max
                         _    ___    ____    ____    ____    _______    ___    ___

    ar_param_keys_idx    1     1      1       2      1.5     0.70711     1      2 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                               i     idx    value
                               __    ___    _____

    bl_loglin                   1     2         0
    fl_a_max                    2     4        50
    fl_a_min                    3     5         0
    fl_b_bd                     4     6         0
    fl_beta                     5     7      0.94
    fl_crra                     6     8       1.5
    fl_loglin_threshold         7     9         1
    fl_nan_replace              8    10     -9999
    fl_r_save                   9    11     0.025
    fl_tol_dist                10    12     1e-05
    fl_tol_pol                 11    13     1e-05
    fl_tol_val                 12    14     1e-05
    fl_w                       13    15      1.28
    fl_z_mu                    14    16         0
    fl_z_rho                   15    17       0.8
    fl_z_sig                   16    18       0.2
    it_a_n                     17    19       750
    it_maxiter_dist            18    20      1000
    it_maxiter_val             19    21      1000
    it_size_type               20    22         2
    it_st_simu_type_g_seed     21    23       123
    it_st_simu_type_g_simun    22    24        20
    it_tol_pol_nochange        23    25        25
    it_trans_power_dist        24    26      1000
    it_z_n                     25    27        15

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                     i    idx
                                     _    ___

    cl_st_param_keys                 1     3 
    st_analytical_stationary_type    2    28 
    st_model                         3    29 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_TSTAR_MAP
----------------------------------------
  Map with properties:

        Count: 9
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = fl_a_max ;rown= 1 ,coln= 5
fl_a_max :mu= 65 ,sd= 11.8585 ,min= 50 ,max= 80
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1      50        57.5        65        72.5        80   

pos = 2 ; key = fl_beta ;rown= 1 ,coln= 5
fl_beta :mu= 0.92 ,sd= 0.039528 ,min= 0.87 ,max= 0.97
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1     0.87       0.895      0.92       0.945      0.97  

pos = 3 ; key = fl_crra ;rown= 1 ,coln= 5
fl_crra :mu= 3 ,sd= 1.5811 ,min= 1 ,max= 5
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1       1          2          3          4          5   

pos = 4 ; key = fl_r_save ;rown= 1 ,coln= 5
fl_r_save :mu= 0.025 ,sd= 0.011859 ,min= 0.01 ,max= 0.04
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1     0.01      0.0175      0.025     0.0325      0.04  

pos = 5 ; key = fl_w ;rown= 1 ,coln= 5
fl_w :mu= 1.25 ,sd= 0.11859 ,min= 1.1 ,max= 1.4
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1      1.1       1.175      1.25       1.325       1.4  

pos = 6 ; key = fl_z_rho ;rown= 1 ,coln= 5
fl_z_rho :mu= 0.495 ,sd= 0.39133 ,min= 0 ,max= 0.99
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1       0       0.2475      0.495     0.7425      0.99  

pos = 7 ; key = fl_z_sig ;rown= 1 ,coln= 5
fl_z_sig :mu= 0.255 ,sd= 0.19369 ,min= 0.01 ,max= 0.5
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1     0.01      0.1325      0.255     0.3775       0.5  

pos = 8 ; key = it_a_n ;rown= 1 ,coln= 5
it_a_n :mu= 1300 ,sd= 948.6833 ,min= 100 ,max= 2500
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1      100        700       1300       1900       2500  

pos = 9 ; key = it_z_n ;rown= 1 ,coln= 5
it_z_n :mu= 15 ,sd= 7.9057 ,min= 5 ,max= 25
               zi_1_c1    zi_2_c2    zi_3_c3    zi_4_c4    zi_5_c5
               _______    _______    _______    _______    _______

    zi_1_r1       5         10         15         20         25   

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                 i    idx    rowN    colN    mean       std       min     max 
                 _    ___    ____    ____    _____    ________    ____    ____

    fl_a_max     1     1      1       5         65      11.859      50      80
    fl_beta      2     2      1       5       0.92    0.039528    0.87    0.97
    fl_crra      3     3      1       5          3      1.5811       1       5
    fl_r_save    4     4      1       5      0.025    0.011859    0.01    0.04
    fl_w         5     5      1       5       1.25     0.11859     1.1     1.4
    fl_z_rho     6     6      1       5      0.495     0.39133       0    0.99
    fl_z_sig     7     7      1       5      0.255     0.19369    0.01     0.5
    it_a_n       8     8      1       5       1300      948.68     100    2500
    it_z_n       9     9      1       5         15      7.9057       5      25

</pre><h2 id="13">Generate New or Obtain Existing Mat</h2><p>Mat file folder and mat file name</p><pre class="codeinput"><span class="keyword">if</span> ~exist(st_mat_test_path,<span class="string">'dir'</span>); mkdir(st_mat_test_path); <span class="keyword">end</span>
st_file_name = [st_mat_test_prefix st_mat_test_name_main st_mat_test_suffix <span class="string">'.mat'</span>];
st_file_path_full = [st_mat_test_path, st_file_name];

bl_mat_exists = isfile(st_file_path_full);

<span class="keyword">if</span> ( ~bl_replacefile &amp;&amp; bl_mat_exists )

    st_loaded = load(st_file_path_full, <span class="string">'tb_outcomes'</span>);
    tb_outcomes = st_loaded.tb_outcomes;

<span class="keyword">else</span>
</pre><h2 id="14">Initialize Storage</h2><pre class="codeinput">    disp(<span class="string">'---------------------------'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp([<span class="string">'Vary These Parameters:'</span> cl_st_param_keys]);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'---------------------------'</span>);

    <span class="comment">% cl_tb_outcomes_meansdperc_wthinfo = cell([length(cl_st_param_keys), 1]);</span>
    tb_outcomes = [];
</pre><pre class="codeoutput">---------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxx
    'Vary These Paramet&#8230;'    'fl_crra'    'fl_beta'

xxxxxxxxxxxxxxxxxxxxxxxxxxx
---------------------------
</pre><h2 id="15">Simulate 1: Cross Simulation, fix one point, extend parameters in each direction</h2><p>Given X and Y parameters, simulate along an array of x values fixing y value, then simulate along an array of y values fixing x value. Along the x and y grid, this produces a <i>cross</i> of simulated points. The intersection of the array arrays, the center of the cross could be some benchmark parameter value, or perhaps some estimated/calibrated parameter value point.</p><pre class="codeinput">    <span class="keyword">if</span> (strcmp(st_simu_type, <span class="string">'c'</span>))

        <span class="keyword">for</span> it_pcombi_ctr = 1:length(cl_st_param_keys)

            st_param_key = cl_st_param_keys{it_pcombi_ctr};

            <span class="comment">% Display Current Parameter been Varied</span>
            <span class="comment">% Parameter Key for Paraemter Getting Updated</span>
            ar_param_values = param_tstar_map(st_param_key);
            st_param_desc = param_desc_map(st_param_key);
            fl_param_val_benchmark = param_map(st_param_key);

            disp(<span class="string">'---------------------------'</span>);
            disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
            disp([<span class="string">'Vary '</span> st_param_desc <span class="string">' ('</span> st_param_key <span class="string">'): '</span> num2str(ar_param_values)]);
            <span class="keyword">for</span> it_param_all_ctr = 1:length(ls_st_param_key)
                disp([ ls_st_param_key{it_param_all_ctr} <span class="string">':'</span> num2str(param_map(ls_st_param_key{it_param_all_ctr}))]);
            <span class="keyword">end</span>
            disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);

            <span class="comment">% Simulate Model over Parameter Array Values</span>
            <span class="keyword">for</span> it_cur_param = 1:1:length(ar_param_values)

                <span class="comment">% Adjust Value for Current Parameter been Varied</span>
                fl_param_val = ar_param_values(it_cur_param);
                param_map(st_param_key) = fl_param_val;
                disp([<span class="string">'xxxxx '</span> st_param_key <span class="string">' = '</span> num2str(fl_param_val) <span class="string">' xxxxx'</span>]);

                <span class="comment">% Simulate Model</span>
                ar_simu_info = [find(strcmp(ls_st_param_key, st_param_key)), <span class="keyword">...</span>
                    it_cur_param, cell2mat(values(param_map, cl_st_param_keys))];
                cl_col_names = [{<span class="string">'it_test_grp'</span>, <span class="string">'it_cur_param'</span>} cl_st_param_keys];
                [tb_outcomes_simu, variablenames] = simu_model_gen_stats(param_map, support_map, ar_simu_info, cl_col_names);
                tb_outcomes_simu.Properties.RowNames = <span class="keyword">...</span>
                    strcat(variablenames, <span class="string">'_p'</span>, num2str(it_pcombi_ctr), <span class="string">'v'</span>, num2str(it_cur_param));
                var_param_key = repmat({st_param_key}, [length(variablenames),1]);
                tb_outcomes_simu = addvars(tb_outcomes_simu, variablenames, var_param_key, <span class="string">'Before'</span>, 1);

                <span class="comment">% Combine Results from Different Parameters in Shared Table</span>
                <span class="keyword">if</span> (it_pcombi_ctr == 1 &amp;&amp; it_cur_param == 1)
                    tb_outcomes = tb_outcomes_simu;
                <span class="keyword">else</span>
                    tb_outcomes = [tb_outcomes; tb_outcomes_simu];
                <span class="keyword">end</span>

            <span class="keyword">end</span>

            <span class="comment">% Reset Base Parameters, parameters already grabbed out, updating</span>
            param_map(st_param_key) = fl_param_val_benchmark;
        <span class="keyword">end</span>
    <span class="keyword">end</span>
</pre><h2 id="16">Simulate 2: Full Grid Simulation, Simulate Along Full Grid</h2><p>To explore the effects of parameters on model outcomes, simulate the model along full grids. Given X and Y parameters, this means simulate at all possible combinations of X and Y arrays.</p><pre class="codeinput">    <span class="keyword">if</span> (ismember(st_simu_type, [<span class="string">"g"</span>, <span class="string">"r"</span>]))

        <span class="comment">% Get Arrays to be Meshed in Cells</span>
        cl_ar_param_subset_values = values(param_tstar_map, cl_st_param_keys);

        <span class="comment">% Generate all possible combinations of parameters subsets</span>
        <span class="keyword">if</span> (strcmp(st_simu_type, <span class="string">'g'</span>))
            cl_mt_all = cl_ar_param_subset_values;
            [cl_mt_all{:}] = ndgrid(cl_ar_param_subset_values{:});
            mt_param_vals_combi = cell2mat(cellfun(@(m) m(:), cl_mt_all, <span class="string">'uni'</span>, 0));
        <span class="keyword">elseif</span> (strcmp(st_simu_type, <span class="string">'r'</span>))
            <span class="comment">% random draw within max and min N count</span>
            rng(it_st_simu_type_g_seed);
            mt_param_vals_combi = cell2mat(cellfun(@(m) <span class="keyword">...</span>
                                       rand([it_st_simu_type_g_simun,1]).*(max(param_tstar_map(m)) - min(param_tstar_map(m))) <span class="keyword">...</span>
                                       + min(param_tstar_map(m)), <span class="keyword">...</span>
                                       cl_st_param_keys, <span class="string">'UniformOutput'</span>, false));
        <span class="keyword">end</span>

        <span class="comment">% Sizes</span>
        it_test_combi_n = size(mt_param_vals_combi,1);

        <span class="comment">% Show Combinations of Parameters Simulating over, convert from Matrix to Table for Clarity</span>
        tb_pvals_combi = array2table(mt_param_vals_combi);
        tb_pvals_combi.Properties.VariableNames = cl_st_param_keys;
        tb_pvals_combi.Properties.RowNames = strcat(<span class="string">'j='</span>, string(1:size(mt_param_vals_combi,1)));
        clear <span class="string">mt_param_vals_combi</span>;

        <span class="comment">% Display</span>
        disp(head(tb_pvals_combi, 10));
        disp(tail(tb_pvals_combi, 10));

        <span class="keyword">for</span> it_pcombi_ctr = 1:it_test_combi_n

            tb_row_param_adj_cur = tb_pvals_combi(it_pcombi_ctr, :);

            disp([<span class="string">'xxxxx Shift to: xxxxx'</span>]);
            disp(tb_row_param_adj_cur)

            <span class="comment">% Display Current Parameter been Varied</span>
            <span class="keyword">for</span> st_param_key = cl_st_param_keys
                param_map(st_param_key{1}) = tb_row_param_adj_cur{1, st_param_key};
            <span class="keyword">end</span>

            <span class="comment">% Simulate Model</span>
            ar_simu_info = [it_pcombi_ctr, cell2mat(values(param_map, cl_st_param_keys))];
            cl_col_names = [{<span class="string">'it_pcombi_ctr'</span>} cl_st_param_keys];
            [tb_outcomes_simu, variablenames] = simu_model_gen_stats(param_map, support_map, ar_simu_info, cl_col_names);
            tb_outcomes_simu.Properties.RowNames = strcat(variablenames, <span class="string">'_v'</span>, num2str(it_pcombi_ctr));
            tb_outcomes_simu = addvars(tb_outcomes_simu, variablenames, <span class="string">'Before'</span>, 1);

            <span class="comment">% Combine Results from Different Parameters in Shared Table</span>
            <span class="keyword">if</span> (it_pcombi_ctr == 1)
                tb_outcomes = tb_outcomes_simu;
            <span class="keyword">else</span>
                tb_outcomes = [tb_outcomes; tb_outcomes_simu];
            <span class="keyword">end</span>

        <span class="keyword">end</span>
    <span class="keyword">end</span>

    <span class="comment">% Table Output</span>
    <span class="keyword">if</span> (bl_display_simu_stats)
        disp(<span class="string">'-------------------------'</span>);
        disp(<span class="string">'xxxxxx tb_outcomes xxxxxx'</span>);
        disp(head(tb_outcomes, 10));
        disp(tail(tb_outcomes, 10));
    <span class="keyword">end</span>
</pre><pre class="codeoutput">            fl_crra    fl_beta
            _______    _______

    j=1     3.7859     0.93344
    j=2     2.1446     0.95494
    j=3     1.9074     0.94245
    j=4     3.2053      0.9311
    j=5     3.8779     0.94224
    j=6     2.6924      0.9023
    j=7     4.9231     0.90618
    j=8     3.7393     0.89283
    j=9     2.9237     0.89937
    j=10    2.5685      0.9331

            fl_crra    fl_beta
            _______    _______

    j=11    2.3727     0.87921
    j=12    3.9162     0.91337
    j=13    2.7543     0.91309
    j=14    1.2387     0.91937
    j=15    2.5922     0.91258
    j=16     3.952     0.90123
    j=17      1.73     0.91264
    j=18    1.7018     0.95934
    j=19    3.1262     0.96442
    j=20    3.1273     0.92018

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=1    3.7859     0.93344

</pre><h2 id="17">Save Mat</h2><pre class="codeinput">    <span class="keyword">if</span> (bl_mat_test)
        clear <span class="string">armt_map</span> <span class="string">result_map</span>
        <span class="keyword">if</span> ~exist(st_mat_test_path,<span class="string">'dir'</span>); mkdir(st_mat_test_path); <span class="keyword">end</span>
        st_file_name = [st_mat_test_prefix st_mat_test_name_main st_mat_test_suffix];
        save(strcat(st_mat_test_path, st_file_name));
    <span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><h2 id="20">Simulate Model given Parameter and Process Results</h2><pre class="codeinput"><span class="keyword">function</span> [tb_outcomes_simu, variablenames] = simu_model_gen_stats(param_map, support_map, ar_simu_info, cl_col_names)
</pre><pre class="codeinput">cl_st_param_keys = param_map(<span class="string">'cl_st_param_keys'</span>);
</pre><h2 id="22">Reset Parameters that are determined by other parameters</h2><pre class="codeinput">it_a_n = param_map(<span class="string">'it_a_n'</span>);
it_z_n = param_map(<span class="string">'it_z_n'</span>);
disp([<span class="string">'xxxxx it_a_n = '</span> num2str(it_a_n) <span class="string">', it_z_n = '</span> num2str(it_z_n) <span class="string">' xxxxx'</span>]);
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><pre class="codeoutput">xxxxx it_a_n = 750, it_z_n = 15 xxxxx
</pre><h2 id="23">Simulate Model</h2><pre class="codeinput">[armt_map, func_map] = ffs_az_get_funcgrid(param_map, support_map);
result_map = ff_az_vf_vecsv(param_map, support_map, armt_map, func_map);
result_map = ff_az_ds_vecsv(param_map, support_map, armt_map, func_map, result_map);
</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       2.8959         4.2483        1.3524 
    'sd'                         2.5842         2.8433         0.288 
    'coefofvar'                 0.89238        0.66928       0.21296 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.032683              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.96732              1             1 
    'pYisMINY'                 0.032683     0.00078348    0.00078348 
    'pYisMAXY'               1.3544e-17     2.6934e-18    2.6934e-18 
    'p0_1'                            0        0.51297       0.51297 
    'p1'                              0        0.68262       0.68262 
    'p5'                        0.13351         1.0023       0.88213 
    'p10'                       0.33378         1.3189       0.98277 
    'p15'                       0.53405         1.5953        1.0595 
    'p20'                       0.73431          1.869        1.1313 
    'p25'                       0.93458           2.14         1.152 
    'p35'                        1.4019         2.6766        1.2371 
    'p50'                        2.2029         3.5796         1.344 
    'p65'                        3.2043         4.6788        1.4667 
    'p75'                        4.1389         5.6456        1.5359 
    'p80'                        4.7397         6.2722        1.5931 
    'p85'                        5.4072         7.0558        1.6394 
    'p90'                        6.4085         8.1197        1.7169 
    'p95'                        8.0107         9.8303        1.8301 
    'p99'                        11.549         13.514        2.0449 
    'p99_9'                      15.888         18.141        2.2623 
    'fl_cov_cl_mt_pol_a'         6.6782         7.3398       0.66154 
    'fl_cor_cl_mt_pol_a'              1        0.99892       0.88886 
    'fl_cov_cl_mt_coh'           7.3398         8.0843       0.74449 
    'fl_cor_cl_mt_coh'          0.99892              1       0.90917 
    'fl_cov_cl_mt_pol_c'        0.66154        0.74449      0.082944 
    'fl_cor_cl_mt_pol_c'        0.88886        0.90917             1 
    'fracByP0_1'                      0     0.00028182    0.00088527 
    'fracByP1'                        0      0.0020429     0.0070469 
    'fracByP5'                0.0013618      0.0094796      0.028059 
    'fracByP10'               0.0056253       0.023118      0.063119 
    'fracByP15'                0.013645        0.04134       0.10265 
    'fracByP20'                0.023146       0.061594       0.14079 
    'fracByP25'                0.037583       0.084677       0.18306 
    'fracByP35'                0.077552         0.1403       0.27212 
    'fracByP50'                 0.17304        0.25119       0.41627 
    'fracByP65'                 0.31101        0.39572       0.57246 
    'fracByP75'                 0.44465        0.51683       0.68273 
    'fracByP80'                 0.52023        0.58612       0.74038 
    'fracByP85'                 0.60142        0.66441       0.80037 
    'fracByP90'                 0.70265        0.75358        0.8623 
    'fracByP95'                 0.82507        0.85763       0.92779 
    'fracByP99'                 0.95499        0.96356       0.98416 
    'fracByP99_9'               0.99402        0.99533       0.99826 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       2.6171         3.9625        1.3454 
    'sd'                         2.6169         2.8722       0.29084 
    'coefofvar'                 0.99994        0.72483       0.21617 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.068867              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.93113              1             1 
    'pYisMINY'                 0.068867      0.0011444     0.0011444 
    'pYisMAXY'               1.7986e-15     2.5529e-16    2.5529e-16 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.90837       0.85587 
    'p10'                      0.066756         1.1163       0.97846 
    'p15'                       0.26702         1.3341        1.0519 
    'p20'                       0.46729         1.5926         1.128 
    'p25'                       0.66756         1.8049        1.1454 
    'p35'                        1.0681         2.3036        1.2321 
    'p50'                        1.8692         3.1931        1.3577 
    'p65'                        2.8705         4.3301        1.4617 
    'p75'                        3.8051         5.3035        1.5375 
    'p80'                        4.4059         5.9744        1.5868 
    'p85'                        5.1402         6.7512        1.6327 
    'p90'                        6.2083         7.8882        1.7087 
    'p95'                        7.8772         9.6694         1.822 
    'p99'                        11.549         13.567        2.0115 
    'p99_9'                      16.222         18.449        2.2527 
    'fl_cov_cl_mt_pol_a'         6.8484         7.5066       0.65823 
    'fl_cor_cl_mt_pol_a'              1        0.99871       0.86484 
    'fl_cov_cl_mt_coh'           7.5066         8.2494       0.74282 
    'fl_cor_cl_mt_coh'          0.99871              1       0.88924 
    'fl_cov_cl_mt_pol_c'        0.65823        0.74282      0.084587 
    'fl_cor_cl_mt_pol_c'        0.86484        0.88924             1 
    'fracByP0_1'                      0     0.00012843    0.00037826 
    'fracByP1'                        0      0.0014023      0.004177 
    'fracByP5'                        0       0.012024      0.028441 
    'fracByP10'              0.00081453       0.023578      0.062217 
    'fracByP15'               0.0055432       0.037232      0.098967 
    'fracByP20'                0.013501       0.056379       0.14013 
    'fracByP25'                0.025926       0.077221       0.18192 
    'fracByP35'                0.055552          0.129       0.27093 
    'fracByP50'                 0.14257        0.23395       0.41695 
    'fracByP65'                 0.27414        0.37449       0.57259 
    'fracByP75'                 0.40542        0.49536       0.68289 
    'fracByP80'                 0.47985        0.56675       0.74057 
    'fracByP85'                  0.5706        0.64681        0.8003 
    'fracByP90'                 0.67801        0.73856       0.86264 
    'fracByP95'                 0.80884        0.84793       0.92796 
    'fracByP99'                 0.94813        0.96041       0.98424 
    'fracByP99_9'               0.99315        0.99486       0.99827 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a     cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    ___________    ___________

    'mean'                       1.3561            2.67         1.3139
    'sd'                         1.6272          1.9018        0.32177
    'coefofvar'                  1.1999         0.71226        0.24489
    'min'                             0         0.44468        0.44468
    'max'                            50          54.536         4.5358
    'pYis0'                     0.14716               0              0
    'pYls0'                           0               0              0
    'pYgr0'                     0.85284               1              1
    'pYisMINY'                  0.14716       0.0018354      0.0018354
    'pYisMAXY'               6.6225e-37     -5.6514e-36    -5.6514e-36
    'p0_1'                            0         0.44468        0.44468
    'p1'                              0         0.59175        0.59175
    'p5'                              0         0.78744        0.78744
    'p10'                             0         0.90837        0.90837
    'p15'                      0.066756          1.0479        0.97846
    'p20'                      0.066756          1.1847         1.0486
    'p25'                       0.13351          1.2772         1.1196
    'p35'                       0.40053          1.5953         1.2031
    'p50'                       0.80107          2.0983         1.3131
    'p65'                        1.4019          2.8243         1.4283
    'p75'                        1.9359           3.456         1.5246
    'p80'                        2.3364          3.9083         1.5935
    'p85'                        2.8037          4.4557         1.6353
    'p90'                        3.5381          5.2196         1.7216
    'p95'                        4.6729          6.5197         1.8334
    'p99'                        7.2764          9.3272         2.0642
    'p99_9'                      10.614          12.872          2.324
    'fl_cov_cl_mt_pol_a'         2.6478          3.0804        0.43269
    'fl_cor_cl_mt_pol_a'              1         0.99545        0.82641
    'fl_cov_cl_mt_coh'           3.0804          3.6167        0.53622
    'fl_cor_cl_mt_coh'          0.99545               1        0.87629
    'fl_cov_cl_mt_pol_c'        0.43269         0.53622        0.10353
    'fl_cor_cl_mt_pol_c'        0.82641         0.87629              1
    'fracByP0_1'                      0      0.00030567     0.00062117
    'fracByP1'                        0       0.0035289      0.0072119
    'fracByP5'                        0        0.018529       0.039319
    'fracByP10'                       0        0.033223       0.075136
    'fracByP15'               0.0028812        0.054288       0.096876
    'fracByP20'               0.0028812        0.071045        0.13405
    'fracByP25'               0.0075942         0.09086        0.17586
    'fracByP35'                0.035942         0.14559        0.25912
    'fracByP50'                 0.09857         0.24808        0.40247
    'fracByP65'                 0.21866         0.38405        0.56043
    'fracByP75'                 0.33572         0.50062        0.67411
    'fracByP80'                 0.41297         0.57028        0.73298
    'fracByP85'                 0.50393         0.64756        0.79319
    'fracByP90'                 0.62573         0.73714         0.8577
    'fracByP95'                 0.76816         0.84626        0.92493
    'fracByP99'                 0.93556         0.95927        0.98346
    'fracByP99_9'               0.99146         0.99468        0.99819

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       2.1541         3.4879        1.3339 
    'sd'                         2.1281         2.3939       0.30073 
    'coefofvar'                 0.98793        0.68635       0.22546 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.054345              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.94566              1             1 
    'pYisMINY'                 0.054345      0.0011778     0.0011778 
    'pYisMAXY'               3.6589e-25     8.1652e-26    8.1652e-26 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.90837       0.82447 
    'p10'                       0.13351         1.1136       0.93431 
    'p15'                       0.26702         1.3189        1.0495 
    'p20'                       0.40053         1.5242        1.0753 
    'p25'                       0.53405         1.7295        1.1363 
    'p35'                       0.93458         2.1427        1.2221 
    'p50'                        1.5354          2.851        1.3239 
    'p65'                        2.3364         3.7893        1.4495 
    'p75'                        3.0708         4.6104        1.5401 
    'p80'                        3.6048         5.1533        1.5785 
    'p85'                        4.2056         5.8242        1.6469 
    'p90'                        5.0067         6.7315        1.7149 
    'p95'                        6.4753         8.2457        1.8367 
    'p99'                        9.4793         11.501        2.0416 
    'p99_9'                      13.284         15.558        2.2728 
    'fl_cov_cl_mt_pol_a'         4.5287         5.0845       0.55586 
    'fl_cor_cl_mt_pol_a'              1        0.99806       0.86857 
    'fl_cov_cl_mt_coh'           5.0845         5.7308        0.6463 
    'fl_cor_cl_mt_coh'          0.99806              1       0.89774 
    'fl_cov_cl_mt_pol_c'        0.55586         0.6463      0.090439 
    'fl_cor_cl_mt_pol_c'        0.86857        0.89774             1 
    'fracByP0_1'                      0     0.00015016    0.00039265 
    'fracByP1'                        0      0.0016249     0.0043073 
    'fracByP5'                        0        0.01332      0.026622 
    'fracByP10'               0.0028421       0.024878      0.061112 
    'fracByP15'               0.0072127        0.04295       0.10325 
    'fracByP20'                0.015726       0.062457       0.13903 
    'fracByP25'                0.025879       0.085796       0.18016 
    'fracByP35'                0.064263        0.14038       0.27064 
    'fracByP50'                  0.1487        0.24737        0.4106 
    'fracByP65'                 0.28091        0.39089       0.56752 
    'fracByP75'                 0.40406        0.51012       0.67995 
    'fracByP80'                 0.48875        0.57965       0.73705 
    'fracByP85'                 0.57728        0.65822       0.79768 
    'fracByP90'                 0.67667        0.74743       0.86006 
    'fracByP95'                 0.81336        0.85419       0.92648 
    'fracByP99'                 0.94883        0.96192       0.98385 
    'fracByP99_9'               0.99317         0.9951       0.99822 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       3.6977         5.0701        1.3724 
    'sd'                         3.1003         3.3539       0.27887 
    'coefofvar'                 0.83845         0.6615       0.20319 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.017355              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.98264              1             1 
    'pYisMINY'                 0.017355     0.00053867    0.00053867 
    'pYisMAXY'               3.3092e-13     4.3931e-14    4.3931e-14 
    'p0_1'                            0        0.51297       0.51297 
    'p1'                              0        0.75104       0.68262 
    'p5'                        0.20027         1.1616       0.91004 
    'p10'                       0.53405         1.5313        1.0127 
    'p15'                       0.80107         1.8822        1.0753 
    'p20'                        1.0681         2.2244         1.148 
    'p25'                        1.3351         2.5532        1.1796 
    'p35'                        1.9359         3.2348        1.2572 
    'p50'                        2.9372         4.3167        1.3766 
    'p65'                        4.1389         5.6323          1.48 
    'p75'                        5.2069         6.7821        1.5509 
    'p80'                        5.9413         7.4931        1.6069 
    'p85'                        6.8091         8.4356        1.6536 
    'p90'                        7.8772         9.6142         1.732 
    'p95'                        9.8131         11.638        1.8283 
    'p99'                        13.818         15.825         2.042 
    'p99_9'                      18.892         21.151         2.259 
    'fl_cov_cl_mt_pol_a'         9.6121         10.391       0.77931 
    'fl_cor_cl_mt_pol_a'              1        0.99935       0.90136 
    'fl_cov_cl_mt_coh'           10.391         11.249       0.85708 
    'fl_cor_cl_mt_coh'          0.99935              1       0.91637 
    'fl_cov_cl_mt_pol_c'        0.77931        0.85708      0.077769 
    'fl_cor_cl_mt_pol_c'        0.90136        0.91637             1 
    'fracByP0_1'                      0     0.00015634    0.00057756 
    'fracByP1'                        0      0.0014712      0.004596 
    'fracByP5'                0.0012832      0.0089563      0.029121 
    'fracByP10'               0.0074659       0.022258      0.064606 
    'fracByP15'                 0.01657       0.039291       0.10316 
    'fracByP20'                0.027958       0.059765       0.14359 
    'fracByP25'                 0.04482        0.08315       0.18577 
    'fracByP35'                0.090018        0.14028       0.27565 
    'fracByP50'                 0.18979        0.25073       0.42011 
    'fracByP65'                  0.3314        0.39722       0.57567 
    'fracByP75'                 0.45775        0.51922         0.686 
    'fracByP80'                 0.53723        0.58907       0.74322 
    'fracByP85'                 0.62108        0.66757       0.80267 
    'fracByP90'                 0.71597        0.75599       0.86404 
    'fracByP95'                 0.83579        0.85987       0.92879 
    'fracByP99'                 0.95751        0.96425       0.98446 
    'fracByP99_9'               0.99441        0.99544       0.99829 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a     cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    ___________    ___________

    'mean'                       0.87993         2.1819          1.302
    'sd'                           1.135         1.4307        0.34404
    'coefofvar'                   1.2898        0.65572        0.26424
    'min'                              0        0.44468        0.44468
    'max'                         49.266         54.536         5.2701
    'pYis0'                      0.18444              0              0
    'pYls0'                            0              0              0
    'pYgr0'                      0.81556              1              1
    'pYisMINY'                   0.18444      0.0021472      0.0021472
    'pYisMAXY'               -3.2806e-34    -3.2806e-34    -3.2806e-34
    'p0_1'                             0        0.44468        0.44468
    'p1'                               0        0.59175        0.59175
    'p5'                               0        0.75104        0.75104
    'p10'                              0        0.90837        0.85587
    'p15'                              0        0.97679        0.90837
    'p20'                       0.066756         1.0479         1.0448
    'p25'                       0.066756         1.1847         1.0495
    'p35'                        0.20027           1.39         1.1914
    'p50'                        0.46729         1.7562         1.2889
    'p65'                        0.86782         2.2839         1.4161
    'p75'                         1.2684         2.7629         1.5268
    'p80'                         1.5354         3.0872          1.583
    'p85'                         1.8692         3.4977         1.6631
    'p90'                         2.3364         4.0718         1.7532
    'p95'                         3.2043         5.0715         1.8701
    'p99'                         5.2069         7.2611         2.1355
    'p99_9'                       7.6769         9.9981         2.4096
    'fl_cov_cl_mt_pol_a'          1.2881         1.6084        0.32025
    'fl_cor_cl_mt_pol_a'               1        0.99049        0.82016
    'fl_cov_cl_mt_coh'            1.6084          2.047        0.43862
    'fl_cor_cl_mt_coh'           0.99049              1        0.89107
    'fl_cov_cl_mt_pol_c'         0.32025        0.43862        0.11837
    'fl_cor_cl_mt_pol_c'         0.82016        0.89107              1
    'fracByP0_1'                       0     0.00043761     0.00073337
    'fracByP1'                         0      0.0051404      0.0086469
    'fracByP5'                         0       0.014751       0.025332
    'fracByP10'                        0       0.049874        0.05625
    'fracByP15'                        0       0.059309       0.090523
    'fracByP20'                0.0069484        0.08173        0.12688
    'fracByP25'                0.0069484        0.10736        0.17578
    'fracByP35'                 0.025429          0.162        0.25466
    'fracByP50'                  0.08478         0.2728        0.39865
    'fracByP65'                  0.19593        0.40964        0.55467
    'fracByP75'                  0.31946         0.5231        0.66557
    'fracByP80'                  0.39723        0.58889        0.72516
    'fracByP85'                  0.48426        0.66425        0.78758
    'fracByP90'                  0.59872         0.7508        0.85239
    'fracByP95'                  0.75243        0.85368        0.92171
    'fracByP99'                  0.93217        0.96128        0.98275
    'fracByP99_9'                0.99072        0.99497        0.99809

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       2.6882         4.0354        1.3472 
    'sd'                         2.2985         2.5644        0.2931 
    'coefofvar'                 0.85505        0.63549       0.21756 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.022747              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.97725              1             1 
    'pYisMINY'                 0.022747     0.00069867    0.00069867 
    'pYisMAXY'               7.7051e-25     1.7195e-25    1.7195e-25 
    'p0_1'                            0        0.51297       0.51297 
    'p1'                              0        0.68262       0.68262 
    'p5'                        0.13351         1.0479        0.8788 
    'p10'                       0.33378         1.3669       0.98277 
    'p15'                        0.6008         1.6193        1.0579 
    'p20'                       0.80107         1.8822        1.0878 
    'p25'                        1.0013         2.1427         1.147 
    'p35'                        1.4019          2.626        1.2321 
    'p50'                        2.0694         3.4471        1.3339 
    'p65'                         3.004         4.4247        1.4617 
    'p75'                        3.8051         5.3035        1.5501 
    'p80'                        4.2724         5.8616        1.5885 
    'p85'                        4.9399         6.5747        1.6581 
    'p90'                        5.8077         7.5326        1.7154 
    'p95'                        7.2764         9.0668        1.8288 
    'p99'                        10.347         12.351        2.0475 
    'p99_9'                      14.152         16.448         2.289 
    'fl_cov_cl_mt_pol_a'         5.2833         5.8869       0.60356 
    'fl_cor_cl_mt_pol_a'              1        0.99871       0.89589 
    'fl_cov_cl_mt_coh'           5.8869         6.5763       0.68947 
    'fl_cor_cl_mt_coh'          0.99871              1       0.91729 
    'fl_cov_cl_mt_pol_c'        0.60356        0.68947      0.085907 
    'fl_cor_cl_mt_pol_c'        0.89589        0.91729             1 
    'fracByP0_1'                      0     0.00025577    0.00076613 
    'fracByP1'                        0      0.0017805     0.0062689 
    'fracByP5'                0.0010867       0.010824       0.02826 
    'fracByP10'               0.0058444        0.02562       0.06301 
    'fracByP15'                0.018103       0.043986        0.1005 
    'fracByP20'                0.030968       0.066326       0.13997 
    'fracByP25'                0.049067       0.092301       0.18238 
    'fracByP35'                0.091465        0.15057       0.27061 
    'fracByP50'                 0.18477          0.264       0.41415 
    'fracByP65'                 0.33183        0.40784       0.56951 
    'fracByP75'                 0.45935        0.52858       0.68104 
    'fracByP80'                 0.52599        0.59732       0.73844 
    'fracByP85'                 0.61619        0.67434       0.79896 
    'fracByP90'                 0.71271        0.76119       0.86108 
    'fracByP95'                 0.83338        0.86311       0.92682 
    'fracByP99'                  0.9564        0.96507       0.98394 
    'fracByP99_9'               0.99419        0.99554       0.99824 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       1.3965         2.7114        1.3149 
    'sd'                         1.4961         1.7806       0.32318 
    'coefofvar'                  1.0714        0.65672       0.24578 
    'min'                             0        0.44468       0.44468 
    'max'                        49.733         54.536        4.8028 
    'pYis0'                    0.097068              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.90293              1             1 
    'pYisMINY'                 0.097068      0.0015919     0.0015919 
    'pYisMAXY'               1.6042e-35     1.6042e-35    1.6042e-35 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.78744       0.78744 
    'p10'                      0.066756        0.97679       0.90837 
    'p15'                       0.13351         1.1163        0.9818 
    'p20'                       0.20027         1.2664        1.0512 
    'p25'                       0.26702         1.4033        1.0828 
    'p35'                       0.53405         1.7321        1.2014 
    'p50'                       0.93458         2.2244        1.3006 
    'p65'                        1.4686         2.8997          1.43 
    'p75'                        2.0027         3.5156        1.5201 
    'p80'                        2.3364         3.9083        1.5935 
    'p85'                         2.737         4.4051        1.6382 
    'p90'                        3.4045         5.0982        1.7249 
    'p95'                        4.4059         6.2614        1.8672 
    'p99'                        6.7423         8.7843        2.0988 
    'p99_9'                      9.6128         11.925        2.3761 
    'fl_cov_cl_mt_pol_a'         2.2383         2.6522       0.41392 
    'fl_cor_cl_mt_pol_a'              1        0.99559       0.85607 
    'fl_cov_cl_mt_coh'           2.6522         3.1706       0.51836 
    'fl_cor_cl_mt_coh'          0.99559              1       0.90078 
    'fl_cov_cl_mt_pol_c'        0.41392        0.51836       0.10445 
    'fl_cor_cl_mt_pol_c'        0.85607        0.90078             1 
    'fracByP0_1'                      0     0.00026108    0.00053834 
    'fracByP1'                        0      0.0028723     0.0059762 
    'fracByP5'                        0       0.014146      0.031731 
    'fracByP10'               0.0022681       0.031184      0.065114 
    'fracByP15'               0.0056302        0.05094      0.098304 
    'fracByP20'                0.010045       0.071253       0.13798 
    'fracByP25'                0.017617        0.09535       0.17312 
    'fracByP35'                0.051275          0.155       0.25985 
    'fracByP50'                 0.13208        0.26183       0.40253 
    'fracByP65'                 0.25598        0.40348       0.56113 
    'fracByP75'                 0.38657        0.52239       0.67184 
    'fracByP80'                 0.45577        0.58878       0.73106 
    'fracByP85'                  0.5452         0.6657       0.79215 
    'fracByP90'                 0.65772        0.75315       0.85626 
    'fracByP95'                 0.79118        0.85668       0.92377 
    'fracByP99'                 0.94401        0.96251       0.98314 
    'fracByP99_9'               0.99248        0.99517       0.99815 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a     cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    ___________    ___________

    'mean'                       0.98362         2.2882         1.3046
    'sd'                           1.208         1.5018        0.33924
    'coefofvar'                   1.2281         0.6563        0.26004
    'min'                              0        0.44468        0.44468
    'max'                         49.399         54.536         5.1366
    'pYis0'                      0.16083              0              0
    'pYls0'                            0              0              0
    'pYgr0'                      0.83917              1              1
    'pYisMINY'                   0.16083      0.0020305      0.0020305
    'pYisMAXY'               -2.4321e-35    -2.4321e-35    -2.4321e-35
    'p0_1'                             0        0.44468        0.44468
    'p1'                               0        0.59175        0.59175
    'p5'                               0        0.78744        0.75271
    'p10'                              0        0.90837        0.85754
    'p15'                              0         1.0023        0.94188
    'p20'                       0.066756         1.1136         1.0479
    'p25'                        0.13351         1.2088         1.0512
    'p35'                        0.26702         1.4584         1.1931
    'p50'                        0.53405          1.869         1.2906
    'p65'                         1.0013         2.4142         1.4183
    'p75'                         1.4019         2.9086         1.5284
    'p80'                         1.6689         3.2419         1.5847
    'p85'                         2.0694         3.6721         1.6636
    'p90'                         2.5367         4.2771         1.7521
    'p95'                         3.4713         5.3035         1.8722
    'p99'                          5.474         7.5697         2.1343
    'p99_9'                       8.0774         10.402         2.4113
    'fl_cov_cl_mt_pol_a'          1.4592         1.7997        0.34047
    'fl_cor_cl_mt_pol_a'               1        0.99207        0.83081
    'fl_cov_cl_mt_coh'            1.7997         2.2553        0.45555
    'fl_cor_cl_mt_coh'           0.99207              1        0.89419
    'fl_cov_cl_mt_pol_c'         0.34047        0.45555        0.11509
    'fl_cor_cl_mt_pol_c'         0.83081        0.89419              1
    'fracByP0_1'                       0     0.00039461     0.00069213
    'fracByP1'                         0      0.0045666      0.0080465
    'fracByP5'                         0       0.023924       0.025085
    'fracByP10'                        0       0.042855       0.056803
    'fracByP15'                        0        0.05256       0.090383
    'fracByP20'                0.0038697       0.076558        0.14568
    'fracByP25'                 0.013776        0.10626        0.17732
    'fracByP35'                 0.033076        0.16139        0.25807
    'fracByP50'                 0.089361        0.26715         0.3968
    'fracByP65'                  0.21664        0.40594        0.55355
    'fracByP75'                  0.33193        0.52295        0.66848
    'fracByP80'                   0.4058        0.58917        0.72653
    'fracByP85'                  0.50545        0.66447        0.78901
    'fracByP90'                  0.61465        0.75066        0.85379
    'fracByP95'                  0.76702        0.85421        0.92244
    'fracByP99'                  0.93389        0.96155        0.98276
    'fracByP99_9'                0.99129        0.99501        0.99809

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       1.6093         2.9295        1.3202 
    'sd'                         1.7793         2.0516       0.31397 
    'coefofvar'                  1.1056        0.70031       0.23782 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                     0.11609              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.88391              1             1 
    'pYisMINY'                  0.11609      0.0015989     0.0015989 
    'pYisMAXY'               6.9078e-36     1.9689e-37    1.9689e-37 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.78744       0.78744 
    'p10'                             0        0.97679       0.90837 
    'p15'                      0.066756         1.1136       0.99939 
    'p20'                       0.20027         1.2531        1.0512 
    'p25'                       0.26702          1.414        1.1246 
    'p35'                       0.53405         1.7562        1.2097 
    'p50'                        1.0013         2.3523        1.3106 
    'p65'                        1.6689         3.1247        1.4361 
    'p75'                        2.3364         3.8506        1.5279 
    'p80'                         2.737         4.2879        1.5709 
    'p85'                         3.271         4.8841        1.6415 
    'p90'                        4.0053         5.6986        1.7265 
    'p95'                        5.2069         7.0536        1.8372 
    'p99'                        7.9439         9.9645        2.0554 
    'p99_9'                      11.415         13.636        2.2924 
    'fl_cov_cl_mt_pol_a'         3.1658         3.6381       0.47225 
    'fl_cor_cl_mt_pol_a'              1        0.99665       0.84535 
    'fl_cov_cl_mt_coh'           3.6381         4.2089       0.57083 
    'fl_cor_cl_mt_coh'          0.99665              1        0.8862 
    'fl_cov_cl_mt_pol_c'        0.47225        0.57083      0.098578 
    'fl_cor_cl_mt_pol_c'        0.84535         0.8862             1 
    'fracByP0_1'                      0      0.0002427    0.00053854 
    'fracByP1'                        0       0.002733     0.0061114 
    'fracByP5'                        0       0.013919      0.032956 
    'fracByP10'                       0       0.028961      0.063839 
    'fracByP15'               0.0015837       0.044663      0.094725 
    'fracByP20'               0.0089418       0.065215       0.13431 
    'fracByP25'                0.014544         0.0889       0.17535 
    'fracByP35'                0.041337         0.1442       0.26294 
    'fracByP50'                 0.11232        0.24741       0.40749 
    'fracByP65'                 0.23901        0.38781       0.56468 
    'fracByP75'                 0.37015        0.50458       0.67595 
    'fracByP80'                 0.44593        0.57399       0.73334 
    'fracByP85'                 0.53978        0.65285        0.7951 
    'fracByP90'                  0.6496        0.74189       0.85824 
    'fracByP95'                 0.78625        0.84933       0.92566 
    'fracByP99'                  0.9424        0.96055       0.98358 
    'fracByP99_9'               0.99243        0.99488        0.9982 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                      0.42388         1.7145        1.2906 
    'sd'                        0.68692         1.0068       0.37495 
    'coefofvar'                  1.6205        0.58724       0.29053 
    'min'                             0        0.44468       0.44468 
    'max'                        48.198         54.536        6.3382 
    'pYis0'                     0.36219              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.63781              1             1 
    'pYisMINY'                  0.36219      0.0025385     0.0025385 
    'pYisMAXY'               1.3281e-34     1.3281e-34    1.3281e-34 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.68262       0.68262 
    'p10'                             0        0.78744       0.78744 
    'p15'                             0        0.90837       0.90837 
    'p20'                             0        0.90837       0.90837 
    'p25'                             0         1.0479        1.0479 
    'p35'                             0         1.2088         1.118 
    'p50'                       0.13351         1.4033        1.2805 
    'p65'                       0.33378         1.7454        1.4027 
    'p75'                       0.53405         2.0786        1.5485 
    'p80'                       0.66756         2.2928        1.6252 
    'p85'                       0.93458          2.606         1.667 
    'p90'                        1.2684         3.0188        1.7921 
    'p95'                        1.8024         3.7297        1.9418 
    'p99'                         3.271         5.4115        2.2259 
    'p99_9'                      5.0067         7.4776         2.551 
    'fl_cov_cl_mt_pol_a'        0.47186        0.67247       0.20061 
    'fl_cor_cl_mt_pol_a'              1        0.97234       0.77886 
    'fl_cov_cl_mt_coh'          0.67247         1.0137        0.3412 
    'fl_cor_cl_mt_coh'          0.97234              1       0.90382 
    'fl_cov_cl_mt_pol_c'        0.20061         0.3412       0.14059 
    'fl_cor_cl_mt_pol_c'        0.77886        0.90382             1 
    'fracByP0_1'                      0     0.00065841    0.00087465 
    'fracByP1'                        0      0.0081983      0.010901 
    'fracByP5'                        0        0.02179      0.028999 
    'fracByP10'                       0       0.048621      0.064802 
    'fracByP15'                       0       0.092031       0.12554 
    'fracByP20'                       0       0.092031       0.12554 
    'fracByP25'                       0        0.15282       0.21079 
    'fracByP35'                       0        0.22174        0.2452 
    'fracByP50'                0.039366        0.29858       0.39013 
    'fracByP65'                 0.12884        0.44277       0.54062 
    'fracByP75'                 0.21015        0.54801       0.65624 
    'fracByP80'                 0.28535        0.61453       0.71821 
    'fracByP85'                 0.38784        0.68281       0.78269 
    'fracByP90'                 0.52079        0.76645       0.84714 
    'fracByP95'                 0.68203        0.86198       0.91824 
    'fracByP99'                 0.91052        0.96309       0.98172 
    'fracByP99_9'               0.98686        0.99523       0.99798 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       2.0871         3.4193        1.3322 
    'sd'                         1.9955          2.266        0.3035 
    'coefofvar'                  0.9561         0.6627       0.22783 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.046263              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.95374              1             1 
    'pYisMINY'                 0.046263       0.001113      0.001113 
    'pYisMAXY'                3.132e-34     8.4729e-35    8.4729e-35 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.66017       0.65149 
    'p5'                       0.066756        0.90837       0.85587 
    'p10'                       0.13351         1.1296       0.93264 
    'p15'                       0.33378         1.3444        1.0094 
    'p20'                       0.46729         1.5313        1.0619 
    'p25'                        0.6008         1.7365        1.1353 
    'p35'                       0.93458         2.1471        1.2188 
    'p50'                        1.5354         2.8402        1.3223 
    'p65'                        2.2697         3.7208        1.4478 
    'p75'                         3.004         4.4824        1.5384 
    'p80'                        3.4045         5.0031        1.5785 
    'p85'                        4.0053         5.6301        1.6481 
    'p90'                        4.8064         6.4775        1.7299 
    'p95'                        6.0748         7.9036         1.845 
    'p99'                        8.9453         10.956        2.0675 
    'p99_9'                      12.483         14.786         2.311 
    'fl_cov_cl_mt_pol_a'         3.9821         4.5123        0.5302 
    'fl_cor_cl_mt_pol_a'              1         0.9979       0.87542 
    'fl_cov_cl_mt_coh'           4.5123         5.1346       0.62231 
    'fl_cor_cl_mt_coh'           0.9979              1       0.90488 
    'fl_cov_cl_mt_pol_c'         0.5302        0.62231      0.092115 
    'fl_cor_cl_mt_pol_c'        0.87542        0.90488             1 
    'fracByP0_1'                      0     0.00014475    0.00037153 
    'fracByP1'                        0      0.0018867     0.0042785 
    'fracByP5'               0.00071631       0.012023      0.029202 
    'fracByP10'               0.0028256       0.026503      0.061234 
    'fracByP15'                0.011158       0.044045      0.097524 
    'fracByP20'                0.021589       0.065121       0.13766 
    'fracByP25'                0.033667       0.089456       0.17941 
    'fracByP35'                0.070122        0.14624       0.26719 
    'fracByP50'                 0.16198        0.25541        0.4117 
    'fracByP65'                 0.29383        0.39945        0.5671 
    'fracByP75'                 0.42363         0.5181       0.67822 
    'fracByP80'                 0.49186        0.58772       0.73622 
    'fracByP85'                 0.58568        0.66523       0.79634 
    'fracByP90'                 0.68972        0.75351        0.8593 
    'fracByP95'                 0.81354        0.85749       0.92603 
    'fracByP99'                 0.95086        0.96313       0.98375 
    'fracByP99_9'               0.99342        0.99528       0.99822 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       1.1386         2.4471        1.3085 
    'sd'                         1.3637         1.6498       0.33161 
    'coefofvar'                  1.1977        0.67421       0.25344 
    'min'                             0        0.44468       0.44468 
    'max'                        49.666         54.536        4.8696 
    'pYis0'                     0.14889              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.85111              1             1 
    'pYisMINY'                  0.14889      0.0019181     0.0019181 
    'pYisMAXY'               1.2546e-34     1.2546e-34    1.2546e-34 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.78744       0.78744 
    'p10'                             0        0.90837       0.90837 
    'p15'                      0.066756         1.0452       0.97679 
    'p20'                      0.066756         1.1296        1.0479 
    'p25'                       0.13351         1.2531        1.0536 
    'p35'                       0.33378         1.5268        1.1981 
    'p50'                       0.66756         1.9614        1.2956 
    'p65'                        1.1348         2.5665        1.4228 
    'p75'                        1.6021         3.1459        1.5268 
    'p80'                        1.9359         3.5156        1.5885 
    'p85'                        2.3364          3.988        1.6636 
    'p90'                        2.9372         4.6588        1.7195 
    'p95'                        3.9386          5.767        1.8705 
    'p99'                        6.1415          8.219        2.0971 
    'p99_9'                      8.9453         11.296        2.3679 
    'fl_cov_cl_mt_pol_a'         1.8597         2.2359       0.37613 
    'fl_cor_cl_mt_pol_a'              1        0.99375       0.83173 
    'fl_cov_cl_mt_coh'           2.2359          2.722        0.4861 
    'fl_cor_cl_mt_coh'          0.99375              1       0.88849 
    'fl_cov_cl_mt_pol_c'        0.37613         0.4861       0.10997 
    'fl_cor_cl_mt_pol_c'        0.83173        0.88849             1 
    'fracByP0_1'                      0     0.00034856    0.00065187 
    'fracByP1'                        0      0.0040135     0.0075452 
    'fracByP5'                        0       0.020864      0.040797 
    'fracByP10'                       0       0.037359      0.078021 
    'fracByP15'               0.0030435       0.050477      0.094862 
    'fracByP20'               0.0030435        0.07296       0.14077 
    'fracByP25'                0.010373       0.098244       0.17165 
    'fracByP35'                0.036216        0.15459       0.25764 
    'fracByP50'                0.098477        0.26121       0.40221 
    'fracByP65'                 0.21288        0.39809       0.55897 
    'fracByP75'                  0.3343        0.51434       0.66941 
    'fracByP80'                 0.41358        0.58468       0.72918 
    'fracByP85'                 0.50792        0.65867        0.7919 
    'fracByP90'                 0.62518        0.74628       0.85461 
    'fracByP95'                 0.77109        0.85173       0.92341 
    'fracByP99'                 0.93565         0.9609       0.98304 
    'fracByP99_9'               0.99127        0.99495       0.99814 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       0.2523         1.5386        1.2863 
    'sd'                        0.51259        0.84068        0.3918 
    'coefofvar'                  2.0317        0.54639       0.30459 
    'min'                             0        0.44468       0.44468 
    'max'                        47.864         54.536         6.672 
    'pYis0'                     0.54616              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.45384              1             1 
    'pYisMINY'                  0.54616      0.0026521     0.0026521 
    'pYisMAXY'               1.2465e-35     1.2465e-35    1.2465e-35 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.68262       0.68262 
    'p10'                             0        0.78744       0.78744 
    'p15'                             0        0.90837       0.90837 
    'p20'                             0        0.90837       0.90837 
    'p25'                             0         1.0479        1.0469 
    'p35'                             0         1.0479        1.0479 
    'p50'                             0         1.2772        1.2581 
    'p65'                       0.13351         1.5997        1.3977 
    'p75'                       0.26702         1.8138        1.5434 
    'p80'                       0.40053         1.9924        1.6169 
    'p85'                       0.53405         2.2244        1.7237 
    'p90'                       0.80107         2.5773        1.8055 
    'p95'                        1.2684         3.2219        1.9619 
    'p99'                        2.5367         4.7272        2.2726 
    'p99_9'                      4.0721         6.5768         2.601 
    'fl_cov_cl_mt_pol_a'        0.26275        0.40799       0.14524 
    'fl_cor_cl_mt_pol_a'              1        0.94678        0.7232 
    'fl_cov_cl_mt_coh'          0.40799        0.70674       0.29875 
    'fl_cor_cl_mt_coh'          0.94678              1       0.90701 
    'fl_cov_cl_mt_pol_c'        0.14524        0.29875       0.15351 
    'fl_cor_cl_mt_pol_c'         0.7232        0.90701             1 
    'fracByP0_1'                      0     0.00076651    0.00091686 
    'fracByP1'                        0      0.0098268      0.011756 
    'fracByP5'                        0       0.026795      0.032065 
    'fracByP10'                       0       0.061686      0.073849 
    'fracByP15'                       0        0.12071       0.14475 
    'fracByP20'                       0        0.12071       0.14475 
    'fracByP25'                       0        0.20441       0.15835 
    'fracByP35'                       0        0.20441       0.24825 
    'fracByP50'                       0        0.31884       0.37697 
    'fracByP65'                0.050265        0.45962       0.54237 
    'fracByP75'                 0.12429        0.56485       0.65904 
    'fracByP80'                 0.20217        0.62703       0.71096 
    'fracByP85'                 0.28035        0.69758       0.78346 
    'fracByP90'                 0.41273        0.77321        0.8445 
    'fracByP95'                 0.60139        0.86621       0.91683 
    'fracByP99'                 0.88389         0.9644       0.98134 
    'fracByP99_9'               0.98218         0.9953       0.99794 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a     cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    ___________    ___________

    'mean'                        1.0094         2.3146         1.3052
    'sd'                          1.2625         1.5523        0.33724
    'coefofvar'                   1.2508        0.67066        0.25837
    'min'                              0        0.44468        0.44468
    'max'                         49.533         54.536         5.0031
    'pYis0'                      0.16961              0              0
    'pYls0'                            0              0              0
    'pYgr0'                      0.83039              1              1
    'pYisMINY'                   0.16961      0.0020492      0.0020492
    'pYisMAXY'               -2.4726e-34    -2.4726e-34    -2.4726e-34
    'p0_1'                             0        0.44468        0.44468
    'p1'                               0        0.59175        0.59175
    'p5'                               0        0.78744        0.75271
    'p10'                              0        0.90837        0.85754
    'p15'                              0        0.97679         0.9293
    'p20'                       0.066756         1.1136         1.0479
    'p25'                        0.13351         1.2088         1.0519
    'p35'                        0.26702         1.4558         1.1496
    'p50'                        0.53405          1.869         1.2939
    'p65'                         1.0013         2.4208         1.4194
    'p75'                         1.4019         2.9616         1.5268
    'p80'                         1.7356         3.3037         1.5852
    'p85'                         2.1362         3.7405         1.6636
    'p90'                         2.6702         4.3873         1.7504
    'p95'                         3.6048         5.4403         1.8722
    'p99'                          5.741         7.8063         2.1274
    'p99_9'                       8.4112          10.72         2.3646
    'fl_cov_cl_mt_pol_a'           1.594          1.945        0.35098
    'fl_cor_cl_mt_pol_a'               1        0.99241        0.82434
    'fl_cov_cl_mt_coh'             1.945         2.4097        0.46471
    'fl_cor_cl_mt_coh'           0.99241              1         0.8877
    'fl_cov_cl_mt_pol_c'         0.35098        0.46471        0.11373
    'fl_cor_cl_mt_pol_c'         0.82434         0.8877              1
    'fracByP0_1'                       0     0.00039368     0.00069813
    'fracByP1'                         0      0.0045868      0.0081708
    'fracByP5'                         0       0.024356       0.025222
    'fracByP10'                        0       0.043818       0.055972
    'fracByP15'                        0       0.051809        0.09152
    'fracByP20'                0.0045743       0.076768        0.14623
    'fracByP25'                 0.012293        0.10576         0.1699
    'fracByP35'                 0.030604        0.15697        0.25505
    'fracByP50'                 0.082166        0.26353        0.39671
    'fracByP65'                  0.20188        0.40072        0.55657
    'fracByP75'                  0.31347         0.5164        0.66891
    'fracByP80'                  0.40085        0.58324        0.72828
    'fracByP85'                  0.49841        0.65922        0.78867
    'fracByP90'                  0.61239         0.7474        0.85381
    'fracByP95'                   0.7634        0.85195        0.92338
    'fracByP99'                  0.93422        0.96087        0.98296
    'fracByP99_9'                 0.9911         0.9949        0.99812

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a     cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    ___________    ___________

    'mean'                        1.7461         3.0698         1.3237
    'sd'                          1.7465         2.0237        0.31227
    'coefofvar'                   1.0002        0.65924        0.23592
    'min'                              0        0.44468        0.44468
    'max'                             50         54.536         4.5358
    'pYis0'                     0.061551              0              0
    'pYls0'                            0              0              0
    'pYgr0'                      0.93845              1              1
    'pYisMINY'                  0.061551      0.0013269      0.0013269
    'pYisMAXY'               -1.3067e-35    -1.3067e-35    -1.3067e-35
    'p0_1'                             0        0.44468        0.44468
    'p1'                               0        0.59175        0.59175
    'p5'                               0        0.85587        0.80203
    'p10'                       0.066756         1.0479        0.91004
    'p15'                        0.20027         1.2505        0.98514
    'p20'                        0.33378           1.39         1.0552
    'p25'                        0.46729         1.5926         1.1282
    'p35'                        0.73431         1.9418         1.2097
    'p50'                         1.2016         2.5576         1.3106
    'p65'                         1.8692         3.3103         1.4395
    'p75'                           2.47         4.0034         1.5301
    'p80'                         2.8705         4.4669         1.5702
    'p85'                         3.4045         5.0209         1.6453
    'p90'                         4.0721         5.7932         1.7299
    'p95'                         5.2737         7.0825         1.8434
    'p99'                         7.8104         9.8725         2.0837
    'p99_9'                       11.081         13.344         2.3427
    'fl_cov_cl_mt_pol_a'          3.0502         3.5241        0.47389
    'fl_cor_cl_mt_pol_a'               1        0.99708        0.86891
    'fl_cov_cl_mt_coh'            3.5241         4.0955         0.5714
    'fl_cor_cl_mt_coh'           0.99708              1        0.90418
    'fl_cov_cl_mt_pol_c'         0.47389         0.5714       0.097515
    'fl_cor_cl_mt_pol_c'         0.86891        0.90418              1
    'fracByP0_1'                       0     0.00019222     0.00044579
    'fracByP1'                         0      0.0020759      0.0048759
    'fracByP5'                         0       0.012574       0.026243
    'fracByP10'                 0.001701       0.028843       0.060145
    'fracByP15'                0.0067538       0.047607       0.098631
    'fracByP20'                 0.017139       0.067142        0.13576
    'fracByP25'                 0.030574       0.092901        0.17618
    'fracByP35'                 0.063635        0.14967          0.264
    'fracByP50'                  0.14178         0.2605        0.40694
    'fracByP65'                   0.2793        0.40046        0.56356
    'fracByP75'                  0.40089         0.5203         0.6746
    'fracByP80'                  0.47793        0.58844        0.73295
    'fracByP85'                  0.57251         0.6658        0.79472
    'fracByP90'                   0.6723        0.75357        0.85773
    'fracByP95'                  0.80753        0.85724        0.92509
    'fracByP99'                  0.94758         0.9631        0.98343
    'fracByP99_9'                0.99326        0.99523        0.99818

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                      0.44962         1.7409        1.2912 
    'sd'                         0.7408         1.0542       0.37211 
    'coefofvar'                  1.6476        0.60555       0.28818 
    'min'                             0        0.44468       0.44468 
    'max'                        48.531         54.536        6.0044 
    'pYis0'                     0.36482              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.63518              1             1 
    'pYisMINY'                  0.36482      0.0025341     0.0025341 
    'pYisMAXY'               -5.286e-37     -5.286e-37    -5.286e-37 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.68262       0.68262 
    'p10'                             0        0.78744       0.78744 
    'p15'                             0        0.90837       0.90837 
    'p20'                             0        0.90837       0.90837 
    'p25'                             0         1.0479        1.0479 
    'p35'                             0         1.2088         1.118 
    'p50'                       0.13351          1.414        1.2805 
    'p65'                       0.33378         1.7454          1.42 
    'p75'                        0.6008         2.1292        1.5496 
    'p80'                       0.73431         2.3479        1.6269 
    'p85'                        1.0013         2.6349         1.667 
    'p90'                        1.3351         3.0872        1.7904 
    'p95'                        2.0027         3.8665        1.9123 
    'p99'                        3.5381         5.6538        2.2192 
    'p99_9'                       5.474         7.8747        2.4997 
    'fl_cov_cl_mt_pol_a'        0.54879         0.7608       0.21201 
    'fl_cor_cl_mt_pol_a'              1        0.97422        0.7691 
    'fl_cov_cl_mt_coh'           0.7608         1.1113       0.35048 
    'fl_cor_cl_mt_coh'          0.97422              1       0.89346 
    'fl_cov_cl_mt_pol_c'        0.21201        0.35048       0.13847 
    'fl_cor_cl_mt_pol_c'         0.7691        0.89346             1 
    'fracByP0_1'                      0     0.00064732    0.00087271 
    'fracByP1'                        0       0.008102      0.010932 
    'fracByP5'                        0       0.021576       0.02914 
    'fracByP10'                       0       0.048123      0.065066 
    'fracByP15'                       0       0.090816       0.12371 
    'fracByP20'                       0       0.090816       0.12371 
    'fracByP25'                       0        0.15014       0.21024 
    'fracByP35'                       0        0.21765       0.24399 
    'fracByP50'                0.036334        0.29888       0.38696 
    'fracByP65'                  0.1176        0.43138       0.54088 
    'fracByP75'                 0.22112         0.5479       0.65726 
    'fracByP80'                 0.28557        0.60581       0.71946 
    'fracByP85'                 0.38323        0.67744       0.78151 
    'fracByP90'                 0.50599        0.75926        0.8478 
    'fracByP95'                  0.6884        0.85894       0.91906 
    'fracByP99'                 0.90848        0.96209       0.98206 
    'fracByP99_9'               0.98701        0.99505       0.99801 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                        2.456         3.7974        1.3414 
    'sd'                         2.5596         2.8145       0.29335 
    'coefofvar'                  1.0422        0.74116       0.21869 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.088721              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                     0.91128              1             1 
    'pYisMINY'                 0.088721      0.0012568     0.0012568 
    'pYisMAXY'               1.5546e-15     2.2105e-16    2.2105e-16 
    'p0_1'                            0        0.44468       0.44468 
    'p1'                              0        0.59175       0.59175 
    'p5'                              0        0.85587        0.8037 
    'p10'                      0.066756         1.0479       0.97467 
    'p15'                       0.20027         1.2531        1.0495 
    'p20'                       0.33378         1.4628        1.1246 
    'p25'                       0.53405         1.6877        1.1437 
    'p35'                       0.93458         2.1667        1.2288 
    'p50'                        1.6689         3.0322        1.3543 
    'p65'                        2.6702         4.1248        1.4578 
    'p75'                        3.5381         5.0893        1.5434 
    'p80'                        4.2056         5.7248         1.583 
    'p85'                        4.8732         6.5262        1.6348 
    'p90'                        5.9413         7.6299        1.7049 
    'p95'                        7.6101         9.4089        1.8172 
    'p99'                        11.348         13.294        2.0103 
    'p99_9'                      15.955         18.178        2.2461 
    'fl_cov_cl_mt_pol_a'         6.5516         7.1934       0.64179 
    'fl_cor_cl_mt_pol_a'              1        0.99854       0.85473 
    'fl_cov_cl_mt_coh'           7.1934         7.9213       0.72784 
    'fl_cor_cl_mt_coh'          0.99854              1       0.88156 
    'fl_cov_cl_mt_pol_c'        0.64179        0.72784      0.086056 
    'fl_cor_cl_mt_pol_c'        0.85473        0.88156             1 
    'fracByP0_1'                      0     0.00014717    0.00041663 
    'fracByP1'                        0      0.0016437      0.004697 
    'fracByP5'                        0      0.0096613      0.026219 
    'fracByP10'              0.00077842       0.023732      0.059717 
    'fracByP15'               0.0040677       0.038062      0.098686 
    'fracByP20'               0.0089241       0.055686       0.14105 
    'fracByP25'                0.019616       0.077253        0.1826 
    'fracByP35'                0.048636        0.12765       0.27118 
    'fracByP50'                 0.12758        0.23028       0.41613 
    'fracByP65'                 0.25995        0.36905       0.57108 
    'fracByP75'                  0.3842        0.48948       0.68273 
    'fracByP80'                 0.46835        0.56041       0.74104 
    'fracByP85'                 0.55359        0.64181       0.80011 
    'fracByP90'                 0.66439        0.73371       0.86287 
    'fracByP95'                 0.80018        0.84463       0.92799 
    'fracByP99'                 0.94698        0.95936        0.9843 
    'fracByP99_9'               0.99279        0.99471       0.99827 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                       6.8995          8.352        1.4525 
    'sd'                         5.3311          5.586       0.27274 
    'coefofvar'                 0.77268        0.66883       0.18777 
    'min'                             0        0.44468       0.44468 
    'max'                            50         54.536        4.5358 
    'pYis0'                    0.010397              0             0 
    'pYls0'                           0              0             0 
    'pYgr0'                      0.9896              1             1 
    'pYisMINY'                 0.010397     0.00026602    0.00026602 
    'pYisMAXY'               5.0558e-07     2.6544e-08    2.6544e-08 
    'p0_1'                            0         0.5814        0.5814 
    'p1'                              0        0.86544       0.79835 
    'p5'                         0.6008         1.5953       0.99348 
    'p10'                        1.2016         2.3036        1.1112 
    'p15'                        1.8024         2.9611        1.1704 
    'p20'                        2.2697          3.534        1.2392 
    'p25'                        2.8705         4.1314        1.2715 
    'p35'                        3.9386         5.2946        1.3527 
    'p50'                         5.741         7.1927        1.4467 
    'p65'                        7.8772         9.3957        1.5459 
    'p75'                        9.7463         11.325         1.628 
    'p80'                        10.881         12.541         1.677 
    'p85'                        12.283         13.993        1.7228 
    'p90'                        14.152         15.969        1.8012 
    'p95'                         17.29          19.18        1.9068 
    'p99'                        23.698         25.818        2.1254 
    'p99_9'                      31.976         34.357        2.3729 
    'fl_cov_cl_mt_pol_a'          28.42         29.775        1.3545 
    'fl_cor_cl_mt_pol_a'              1        0.99984       0.93156 
    'fl_cov_cl_mt_coh'           29.775         31.204        1.4289 
    'fl_cor_cl_mt_coh'          0.99984              1       0.93786 
    'fl_cov_cl_mt_pol_c'         1.3545         1.4289      0.074386 
    'fl_cor_cl_mt_pol_c'        0.93156        0.93786             1 
    'fracByP0_1'                      0     6.4112e-05    0.00036865 
    'fracByP1'                        0     0.00085554      0.004755 
    'fracByP5'                0.0020957      0.0069454      0.030776 
    'fracByP10'               0.0088311       0.018912        0.0672 
    'fracByP15'                0.020674        0.03447       0.10686 
    'fracByP20'                0.033955       0.053902       0.14856 
    'fracByP25'                0.054032       0.077025        0.1925 
    'fracByP35'                 0.10393        0.13398       0.28199 
    'fracByP50'                 0.20788        0.24497       0.42691 
    'fracByP65'                 0.35752        0.39301        0.5811 
    'fracByP75'                 0.48365        0.51652       0.69064 
    'fracByP80'                 0.55705        0.58804       0.74761 
    'fracByP85'                 0.63993        0.66719       0.80583 
    'fracByP90'                 0.73408        0.75683       0.86623 
    'fracByP95'                 0.84706        0.86085       0.92998 
    'fracByP99'                 0.96072        0.96467       0.98465 
    'fracByP99_9'               0.99492         0.9955       0.99829 

</pre><pre class="codeoutput">xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a    cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    __________    ___________

    'mean'                        1.6344        2.9552        1.3209 
    'sd'                          1.7459        2.0205       0.31404 
    'coefofvar'                   1.0682       0.68371       0.23775 
    'min'                              0       0.44468       0.44468 
    'max'                             50        54.536        4.5358 
    'pYis0'                     0.090995             0             0 
    'pYls0'                            0             0             0 
    'pYgr0'                      0.90901             1             1 
    'pYisMINY'                  0.090995     0.0014906     0.0014906 
    'pYisMAXY'               -1.0983e-36     2.645e-37     2.645e-37 
    'p0_1'                             0       0.44468       0.44468 
    'p1'                               0       0.59175       0.59175 
    'p5'                               0       0.78744       0.78744 
    'p10'                       0.066756       0.99272       0.90837 
    'p15'                        0.13351        1.1296       0.98347 
    'p20'                        0.20027        1.3189        1.0529 
    'p25'                        0.33378        1.4628        1.1263 
    'p35'                         0.6008        1.8138        1.2088 
    'p50'                         1.0681        2.4164        1.3106 
    'p65'                         1.7356        3.1734        1.4361 
    'p75'                         2.3364        3.8665        1.5279 
    'p80'                          2.737        4.3301        1.5686 
    'p85'                          3.271        4.8841        1.6419 
    'p90'                         4.0053        5.6873        1.7266 
    'p95'                         5.2069        6.9982        1.8389 
    'p99'                         7.8104        9.8277        2.0604 
    'p99_9'                       11.148        13.386        2.3257 
    'fl_cov_cl_mt_pol_a'          3.0482         3.516       0.46784 
    'fl_cor_cl_mt_pol_a'               1       0.99671       0.85328 
    'fl_cov_cl_mt_coh'             3.516        4.0825       0.56646 
    'fl_cor_cl_mt_coh'           0.99671             1       0.89273 
    'fl_cov_cl_mt_pol_c'         0.46784       0.56646       0.09862 
    'fl_cor_cl_mt_pol_c'         0.85328       0.89273             1 
    'fracByP0_1'                       0    0.00022429    0.00050182 
    'fracByP1'                         0     0.0024692     0.0055762 
    'fracByP5'                         0       0.01216      0.029581 
    'fracByP10'                0.0018183      0.028141      0.061175 
    'fracByP15'                0.0042651      0.045205      0.094816 
    'fracByP20'                0.0089531      0.066906       0.13819 
    'fracByP25'                 0.020309      0.090307       0.17766 
    'fracByP35'                  0.05037       0.14557       0.26322 
    'fracByP50'                  0.12379       0.25279       0.40872 
    'fracByP65'                   0.2566       0.39306       0.56345 
    'fracByP75'                  0.37854       0.51266       0.67496 
    'fracByP80'                  0.45523       0.58013       0.73307 
    'fracByP85'                   0.5506       0.65722       0.79455 
    'fracByP90'                  0.66157       0.74693       0.85802 
    'fracByP95'                  0.79801       0.85223        0.9251 
    'fracByP99'                  0.94443       0.96145        0.9835 
    'fracByP99_9'                0.99273       0.99502       0.99818 

</pre><h2 id="24">Store Results to Table</h2><pre class="codeinput"><span class="comment">% Append Simulation Loop Statistics</span>
tb_outcomes_meansdperc = result_map(<span class="string">'tb_outcomes'</span>);
tb_simu_info = array2table(ar_simu_info + zeros([size(tb_outcomes_meansdperc,1), length(ar_simu_info)]));
tb_simu_info.Properties.VariableNames = cl_col_names;
variablenames = tb_outcomes_meansdperc.Properties.RowNames;
tb_simu_info.Properties.RowNames = (variablenames);

<span class="comment">% Table</span>
tb_outcomes_simu = [tb_simu_info tb_outcomes_meansdperc];
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=2    2.1446     0.95494

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=3    1.9074     0.94245

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=4    3.2053     0.9311 

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=5    3.8779     0.94224

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=6    2.6924     0.9023 

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=7    4.9231     0.90618

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=8    3.7393     0.89283

xxxxx Shift to: xxxxx
           fl_crra    fl_beta
           _______    _______

    j=9    2.9237     0.89937

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=10    2.5685     0.9331 

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=11    2.3727     0.87921

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=12    3.9162     0.91337

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=13    2.7543     0.91309

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=14    1.2387     0.91937

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=15    2.5922     0.91258

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=16     3.952     0.90123

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=17     1.73      0.91264

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=18    1.7018     0.95934

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=19    3.1262     0.96442

xxxxx Shift to: xxxxx
            fl_crra    fl_beta
            _______    _______

    j=20    3.1273     0.92018

-------------------------
xxxxxx tb_outcomes xxxxxx
                      variablenames    it_pcombi_ctr    fl_crra    fl_beta     mean       sd       coefofvar      min       max       pYis0      pYls0     pYgr0      pYisMINY      pYisMAXY       p0_1        p1         p5         p10         p15         p20         p25        p35        p50       p65       p75       p80       p85       p90       p95       p99      p99_9     fl_cov_cl_mt_pol_a    fl_cor_cl_mt_pol_a    fl_cov_cl_mt_coh    fl_cor_cl_mt_coh    fl_cov_cl_mt_pol_c    fl_cor_cl_mt_pol_c    fracByP0_1    fracByP1     fracByP5     fracByP10     fracByP15    fracByP20    fracByP25    fracByP35    fracByP50    fracByP65    fracByP75    fracByP80    fracByP85    fracByP90    fracByP95    fracByP99    fracByP99_9
                      _____________    _____________    _______    _______    ______    _______    _________    _______    ______    ________    _____    _______    __________    ___________    _______    _______    _______    ________    ________    ________    _______    _______    _______    ______    ______    ______    ______    ______    ______    ______    ______    __________________    __________________    ________________    ________________    __________________    __________________    __________    _________    _________    __________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    ___________

    cl_mt_pol_a_v1    'cl_mt_pol_a'          1          3.7859     0.93344    2.8959     2.5842     0.89238           0        50    0.032683      0      0.96732      0.032683     1.3544e-17          0          0    0.13351     0.33378     0.53405     0.73431    0.93458     1.4019     2.2029    3.2043    4.1389    4.7397    5.4072    6.4085    8.0107    11.549    15.888          6.6782                     1               7.3398             0.99892               0.66154              0.88886                   0            0    0.0013618     0.0056253     0.013645     0.023146     0.037583    0.077552      0.17304      0.31101      0.44465      0.52023      0.60142      0.70265      0.82507      0.95499       0.99402  
    cl_mt_coh_v1      'cl_mt_coh'            1          3.7859     0.93344    4.2483     2.8433     0.66928     0.44468    54.536           0      0            1    0.00078348     2.6934e-18    0.51297    0.68262     1.0023      1.3189      1.5953       1.869       2.14     2.6766     3.5796    4.6788    5.6456    6.2722    7.0558    8.1197    9.8303    13.514    18.141          7.3398               0.99892               8.0843                   1               0.74449              0.90917          0.00028182    0.0020429    0.0094796      0.023118      0.04134     0.061594     0.084677      0.1403      0.25119      0.39572      0.51683      0.58612      0.66441      0.75358      0.85763      0.96356       0.99533  
    cl_mt_pol_c_v1    'cl_mt_pol_c'          1          3.7859     0.93344    1.3524      0.288     0.21296     0.44468    4.5358           0      0            1    0.00078348     2.6934e-18    0.51297    0.68262    0.88213     0.98277      1.0595      1.1313      1.152     1.2371      1.344    1.4667    1.5359    1.5931    1.6394    1.7169    1.8301    2.0449    2.2623         0.66154               0.88886              0.74449             0.90917              0.082944                    1          0.00088527    0.0070469     0.028059      0.063119      0.10265      0.14079      0.18306     0.27212      0.41627      0.57246      0.68273      0.74038      0.80037       0.8623      0.92779      0.98416       0.99826  
    cl_mt_pol_a_v2    'cl_mt_pol_a'          2          2.1446     0.95494    2.6171     2.6169     0.99994           0        50    0.068867      0      0.93113      0.068867     1.7986e-15          0          0          0    0.066756     0.26702     0.46729    0.66756     1.0681     1.8692    2.8705    3.8051    4.4059    5.1402    6.2083    7.8772    11.549    16.222          6.8484                     1               7.5066             0.99871               0.65823              0.86484                   0            0            0    0.00081453    0.0055432     0.013501     0.025926    0.055552      0.14257      0.27414      0.40542      0.47985       0.5706      0.67801      0.80884      0.94813       0.99315  
    cl_mt_coh_v2      'cl_mt_coh'            2          2.1446     0.95494    3.9625     2.8722     0.72483     0.44468    54.536           0      0            1     0.0011444     2.5529e-16    0.44468    0.59175    0.90837      1.1163      1.3341      1.5926     1.8049     2.3036     3.1931    4.3301    5.3035    5.9744    6.7512    7.8882    9.6694    13.567    18.449          7.5066               0.99871               8.2494                   1               0.74282              0.88924          0.00012843    0.0014023     0.012024      0.023578     0.037232     0.056379     0.077221       0.129      0.23395      0.37449      0.49536      0.56675      0.64681      0.73856      0.84793      0.96041       0.99486  
    cl_mt_pol_c_v2    'cl_mt_pol_c'          2          2.1446     0.95494    1.3454    0.29084     0.21617     0.44468    4.5358           0      0            1     0.0011444     2.5529e-16    0.44468    0.59175    0.85587     0.97846      1.0519       1.128     1.1454     1.2321     1.3577    1.4617    1.5375    1.5868    1.6327    1.7087     1.822    2.0115    2.2527         0.65823               0.86484              0.74282             0.88924              0.084587                    1          0.00037826     0.004177     0.028441      0.062217     0.098967      0.14013      0.18192     0.27093      0.41695      0.57259      0.68289      0.74057       0.8003      0.86264      0.92796      0.98424       0.99827  
    cl_mt_pol_a_v3    'cl_mt_pol_a'          3          1.9074     0.94245    1.3561     1.6272      1.1999           0        50     0.14716      0      0.85284       0.14716     6.6225e-37          0          0          0           0    0.066756    0.066756    0.13351    0.40053    0.80107    1.4019    1.9359    2.3364    2.8037    3.5381    4.6729    7.2764    10.614          2.6478                     1               3.0804             0.99545               0.43269              0.82641                   0            0            0             0    0.0028812    0.0028812    0.0075942    0.035942      0.09857      0.21866      0.33572      0.41297      0.50393      0.62573      0.76816      0.93556       0.99146  
    cl_mt_coh_v3      'cl_mt_coh'            3          1.9074     0.94245      2.67     1.9018     0.71226     0.44468    54.536           0      0            1     0.0018354    -5.6514e-36    0.44468    0.59175    0.78744     0.90837      1.0479      1.1847     1.2772     1.5953     2.0983    2.8243     3.456    3.9083    4.4557    5.2196    6.5197    9.3272    12.872          3.0804               0.99545               3.6167                   1               0.53622              0.87629          0.00030567    0.0035289     0.018529      0.033223     0.054288     0.071045      0.09086     0.14559      0.24808      0.38405      0.50062      0.57028      0.64756      0.73714      0.84626      0.95927       0.99468  
    cl_mt_pol_c_v3    'cl_mt_pol_c'          3          1.9074     0.94245    1.3139    0.32177     0.24489     0.44468    4.5358           0      0            1     0.0018354    -5.6514e-36    0.44468    0.59175    0.78744     0.90837     0.97846      1.0486     1.1196     1.2031     1.3131    1.4283    1.5246    1.5935    1.6353    1.7216    1.8334    2.0642     2.324         0.43269               0.82641              0.53622             0.87629               0.10353                    1          0.00062117    0.0072119     0.039319      0.075136     0.096876      0.13405      0.17586     0.25912      0.40247      0.56043      0.67411      0.73298      0.79319       0.8577      0.92493      0.98346       0.99819  
    cl_mt_pol_a_v4    'cl_mt_pol_a'          4          3.2053      0.9311    2.1541     2.1281     0.98793           0        50    0.054345      0      0.94566      0.054345     3.6589e-25          0          0          0     0.13351     0.26702     0.40053    0.53405    0.93458     1.5354    2.3364    3.0708    3.6048    4.2056    5.0067    6.4753    9.4793    13.284          4.5287                     1               5.0845             0.99806               0.55586              0.86857                   0            0            0     0.0028421    0.0072127     0.015726     0.025879    0.064263       0.1487      0.28091      0.40406      0.48875      0.57728      0.67667      0.81336      0.94883       0.99317  

                       variablenames    it_pcombi_ctr    fl_crra    fl_beta     mean       sd       coefofvar      min       max       pYis0      pYls0     pYgr0      pYisMINY      pYisMAXY       p0_1        p1         p5         p10         p15        p20        p25        p35       p50       p65       p75       p80       p85       p90       p95       p99      p99_9     fl_cov_cl_mt_pol_a    fl_cor_cl_mt_pol_a    fl_cov_cl_mt_coh    fl_cor_cl_mt_coh    fl_cov_cl_mt_pol_c    fl_cor_cl_mt_pol_c    fracByP0_1     fracByP1     fracByP5     fracByP10     fracByP15    fracByP20    fracByP25    fracByP35    fracByP50    fracByP65    fracByP75    fracByP80    fracByP85    fracByP90    fracByP95    fracByP99    fracByP99_9
                       _____________    _____________    _______    _______    ______    _______    _________    _______    ______    ________    _____    _______    __________    ___________    _______    _______    _______    ________    _______    _______    _______    _______    ______    ______    ______    ______    ______    ______    ______    ______    ______    __________________    __________________    ________________    ________________    __________________    __________________    __________    __________    _________    __________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    ___________

    cl_mt_pol_c_v17    'cl_mt_pol_c'         17            1.73     0.91264    1.2912    0.37211     0.28818     0.44468    6.0044           0      0            1     0.0025341     -5.286e-37    0.44468    0.59175    0.68262     0.78744    0.90837    0.90837     1.0479      1.118    1.2805      1.42    1.5496    1.6269     1.667    1.7904    1.9123    2.2192    2.4997         0.21201                0.7691              0.35048             0.89346               0.13847                    1          0.00087271      0.010932      0.02914      0.065066      0.12371      0.12371     0.21024      0.24399      0.38696      0.54088      0.65726      0.71946      0.78151       0.8478      0.91906      0.98206       0.99801  
    cl_mt_pol_a_v18    'cl_mt_pol_a'         18          1.7018     0.95934     2.456     2.5596      1.0422           0        50    0.088721      0      0.91128      0.088721     1.5546e-15          0          0          0    0.066756    0.20027    0.33378    0.53405    0.93458    1.6689    2.6702    3.5381    4.2056    4.8732    5.9413    7.6101    11.348    15.955          6.5516                     1               7.1934             0.99854               0.64179              0.85473                   0             0            0    0.00077842    0.0040677    0.0089241    0.019616     0.048636      0.12758      0.25995       0.3842      0.46835      0.55359      0.66439      0.80018      0.94698       0.99279  
    cl_mt_coh_v18      'cl_mt_coh'           18          1.7018     0.95934    3.7974     2.8145     0.74116     0.44468    54.536           0      0            1     0.0012568     2.2105e-16    0.44468    0.59175    0.85587      1.0479     1.2531     1.4628     1.6877     2.1667    3.0322    4.1248    5.0893    5.7248    6.5262    7.6299    9.4089    13.294    18.178          7.1934               0.99854               7.9213                   1               0.72784              0.88156          0.00014717     0.0016437    0.0096613      0.023732     0.038062     0.055686    0.077253      0.12765      0.23028      0.36905      0.48948      0.56041      0.64181      0.73371      0.84463      0.95936       0.99471  
    cl_mt_pol_c_v18    'cl_mt_pol_c'         18          1.7018     0.95934    1.3414    0.29335     0.21869     0.44468    4.5358           0      0            1     0.0012568     2.2105e-16    0.44468    0.59175     0.8037     0.97467     1.0495     1.1246     1.1437     1.2288    1.3543    1.4578    1.5434     1.583    1.6348    1.7049    1.8172    2.0103    2.2461         0.64179               0.85473              0.72784             0.88156              0.086056                    1          0.00041663      0.004697     0.026219      0.059717     0.098686      0.14105      0.1826      0.27118      0.41613      0.57108      0.68273      0.74104      0.80011      0.86287      0.92799       0.9843       0.99827  
    cl_mt_pol_a_v19    'cl_mt_pol_a'         19          3.1262     0.96442    6.8995     5.3311     0.77268           0        50    0.010397      0       0.9896      0.010397     5.0558e-07          0          0     0.6008      1.2016     1.8024     2.2697     2.8705     3.9386     5.741    7.8772    9.7463    10.881    12.283    14.152     17.29    23.698    31.976           28.42                     1               29.775             0.99984                1.3545              0.93156                   0             0    0.0020957     0.0088311     0.020674     0.033955    0.054032      0.10393      0.20788      0.35752      0.48365      0.55705      0.63993      0.73408      0.84706      0.96072       0.99492  
    cl_mt_coh_v19      'cl_mt_coh'           19          3.1262     0.96442     8.352      5.586     0.66883     0.44468    54.536           0      0            1    0.00026602     2.6544e-08     0.5814    0.86544     1.5953      2.3036     2.9611      3.534     4.1314     5.2946    7.1927    9.3957    11.325    12.541    13.993    15.969     19.18    25.818    34.357          29.775               0.99984               31.204                   1                1.4289              0.93786          6.4112e-05    0.00085554    0.0069454      0.018912      0.03447     0.053902    0.077025      0.13398      0.24497      0.39301      0.51652      0.58804      0.66719      0.75683      0.86085      0.96467        0.9955  
    cl_mt_pol_c_v19    'cl_mt_pol_c'         19          3.1262     0.96442    1.4525    0.27274     0.18777     0.44468    4.5358           0      0            1    0.00026602     2.6544e-08     0.5814    0.79835    0.99348      1.1112     1.1704     1.2392     1.2715     1.3527    1.4467    1.5459     1.628     1.677    1.7228    1.8012    1.9068    2.1254    2.3729          1.3545               0.93156               1.4289             0.93786              0.074386                    1          0.00036865      0.004755     0.030776        0.0672      0.10686      0.14856      0.1925      0.28199      0.42691       0.5811      0.69064      0.74761      0.80583      0.86623      0.92998      0.98465       0.99829  
    cl_mt_pol_a_v20    'cl_mt_pol_a'         20          3.1273     0.92018    1.6344     1.7459      1.0682           0        50    0.090995      0      0.90901      0.090995    -1.0983e-36          0          0          0    0.066756    0.13351    0.20027    0.33378     0.6008    1.0681    1.7356    2.3364     2.737     3.271    4.0053    5.2069    7.8104    11.148          3.0482                     1                3.516             0.99671               0.46784              0.85328                   0             0            0     0.0018183    0.0042651    0.0089531    0.020309      0.05037      0.12379       0.2566      0.37854      0.45523       0.5506      0.66157      0.79801      0.94443       0.99273  
    cl_mt_coh_v20      'cl_mt_coh'           20          3.1273     0.92018    2.9552     2.0205     0.68371     0.44468    54.536           0      0            1     0.0014906      2.645e-37    0.44468    0.59175    0.78744     0.99272     1.1296     1.3189     1.4628     1.8138    2.4164    3.1734    3.8665    4.3301    4.8841    5.6873    6.9982    9.8277    13.386           3.516               0.99671               4.0825                   1               0.56646              0.89273          0.00022429     0.0024692      0.01216      0.028141     0.045205     0.066906    0.090307      0.14557      0.25279      0.39306      0.51266      0.58013      0.65722      0.74693      0.85223      0.96145       0.99502  
    cl_mt_pol_c_v20    'cl_mt_pol_c'         20          3.1273     0.92018    1.3209    0.31404     0.23775     0.44468    4.5358           0      0            1     0.0014906      2.645e-37    0.44468    0.59175    0.78744     0.90837    0.98347     1.0529     1.1263     1.2088    1.3106    1.4361    1.5279    1.5686    1.6419    1.7266    1.8389    2.0604    2.3257         0.46784               0.85328              0.56646             0.89273               0.09862                    1          0.00050182     0.0055762     0.029581      0.061175     0.094816      0.13819     0.17766      0.26322      0.40872      0.56345      0.67496      0.73307      0.79455      0.85802       0.9251       0.9835       0.99818  

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Simulate Savings Model Along Various Parameter Arrays
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*
  
%%
function [tb_outcomes, support_map, param_desc_map] = ff_az_test_gen(varargin)
%% FF_AZ_TEST_GEN post solution simulation
% Simulate the model along various dimensions
%
% @param st_simu_type string cross vs gridd simulation. cross: with
% (x,y), vary X fixing y, vary Y fixing x. grid: all (x,y) \in (X,Y)
%
% # _st_simu_type_ = 'c' for cross simulate, if 'c', then each array value
% of param_tstar_map container is simulated over one by one. So if there
% are two arrays associated with two keys in param_tstar_map with length N1
% and N2, the total number of simulations equals to N1 + N2.
% # _st_simu_type_ = 'g' for grid simulate, if 'g', then all possible
% combinations of the arrays in param_tstar_map are used to create
% combinations of parameter values. So if there are two arrays with lengths
% N1 and N2, there will be N1*N2 number of simulations
% # _st_simu_type_ = 'r' for random simulate, if 'r', then should specify
% param_map('it_st_simu_type_g_seed') value. Only the minimum and the
% maximum values for each array in param_tstar_map matters. Based on these
% minimum and maximum, and also what is in
% param_map('it_st_simu_type_g_simun'). Random parameter values will be
% drawn. 
%
% @param it_size_type integer: 
%  param_map support_map param_tstar_map param_desc_map
% # it_size_type = 1 is quick grid
% # it_size_type = 2 is standard grid
% # it_size_type = 3 is denser grid
%
% @param cl_st_param_keys cell string cell array container parameters that
% we are simulating over
%
% @param param_map container parameter container
%
% @param support_map container support container
%
% @param param_tstar_map container map of arrays with keys that are
% parameter keys. This could be specified outside with array values to
% override defaults here. 
%
% @param param_desc_map container map of strings for each parameter key.
%
% @param tb_outcomes table table of simulation outcomes for various
% statistics for each set of parameters. Columns are statistics, rows are
% outcome variables, groups of rows are different simulations.
%
% @include
%
% * <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf_vecsv.html ff_az_vf_vecsv>
% * <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html ff_az_ds_vecsv>
% * <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_default_param.html ffs_az_set_default_param>
% * <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_get_funcgrid.html ffs_az_get_funcgrid>
%
% @seealso
%
% * _SPEED_ savings only overall benchmark speed testing: <https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_speed/html/fsi_az_ds_vecsv_speed.html fsi_az_ds_vecsv_speed>
% * _PREFERENCE_ savings only preference testing: <https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_pref/html/fsi_az_ds_vecsv_pref.html fsi_az_ds_vecsv_pref>
% * _PREFERENCE_ savings only preference testing cross:
% <https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_pref/html/fsi_az_ds_vecsv_pref_cross.html fsi_az_ds_vecsv_pref_cross>
% * _SHOCK_ savings only shock testing: <https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_shock/html/fsi_az_ds_vecsv_shock.html fsi_az_ds_vecsv_shock>
% * _SHOCK_ savings only shock testing cross:
% <https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_shock/html/fsi_az_ds_vecsv_shock_cross.html fsi_az_ds_vecsv_shock_cross>
% * _PRICE_ savings only wage and interest rate testing cross: adjust wage and savings rate
% <https://fanwangecon.github.io/CodeDynaAsset/m_az/test/ff_az_ds_vecsv/test_price/html/fsi_az_ds_vecsv_price_cross.html fsi_az_ds_vecsv_price_cross>
%

%% Default Parameter Loops

% Loops to Vary for Simulations Below
it_size_type = 2;
cl_st_param_keys = {'fl_crra', 'fl_beta'};
st_simu_type = 'r'; % 'c' for cross or 'g' for grid or 'r' rand

%% Default Parameters

% Base parameters call
it_param_set = 9;
[param_map, support_map] = ffs_az_set_default_param(it_param_set);

% Timer
support_map('bl_timer') = true;

% Mat Storage
support_map('bl_mat_test') = true;
st_matimg_path_root = support_map('st_matimg_path_root');
% test_borinf for default: cl_st_param_keys = [3, 8, 9]
support_map('st_mat_test_path') = [st_matimg_path_root '/test/ff_az_ds_vecsv/mat/'];

% Generate or Load
% if bl_replacefile is true, that means even if file already exists,
% generaet new. bl_replacefile is false, then if false does not exist
% generate, if file exists does not generate.
support_map('bl_replacefile') = true;
support_map('bl_display_simu_stats') = true;

% param map modification
param_map('it_st_simu_type_g_seed') = 123;
param_map('it_st_simu_type_g_simun') = 20;

%% Array Parameters

ls_st_param_key = {'fl_crra', 'fl_beta', ...
                    'fl_w', 'fl_r_save', ...
                    'fl_z_rho', 'fl_z_sig', ...
                    'fl_a_max', 'it_z_n', 'it_a_n'};

param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
it_simu_vec_len = 5;
param_tstar_map(ls_st_param_key{1}) = linspace(1, 5, it_simu_vec_len);
param_tstar_map(ls_st_param_key{2}) = linspace(0.87, 0.97, it_simu_vec_len);
param_tstar_map(ls_st_param_key{3}) = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map(ls_st_param_key{4}) = linspace(0.01, 0.04, it_simu_vec_len);
param_tstar_map(ls_st_param_key{5}) = linspace(0, 0.99, it_simu_vec_len);
param_tstar_map(ls_st_param_key{6}) = linspace(0.01, 0.5, it_simu_vec_len);
param_tstar_map(ls_st_param_key{7}) = linspace(50, 80, it_simu_vec_len);
param_tstar_map(ls_st_param_key{8}) = unique(round(linspace(5, 25, it_simu_vec_len)));
param_tstar_map(ls_st_param_key{9}) = unique(round(linspace(100, 2500, it_simu_vec_len)));

param_desc_map = containers.Map('KeyType','char', 'ValueType','any');
param_desc_map(ls_st_param_key{1}) = {'CRRA'};
param_desc_map(ls_st_param_key{2}) = {'Discount'};
param_desc_map(ls_st_param_key{3}) = {'Wage'};
param_desc_map(ls_st_param_key{4}) = {'Save Interest'};
param_desc_map(ls_st_param_key{5}) = {'Shock Persistence'};
param_desc_map(ls_st_param_key{6}) = {'Shock SD'};
param_desc_map(ls_st_param_key{7}) = {'Max Asset Bound'};
param_desc_map(ls_st_param_key{8}) = {'Shock Grid N'};
param_desc_map(ls_st_param_key{9}) = {'Asset Grid N'};

%% Default

default_params = {st_simu_type it_size_type cl_st_param_keys ...
                    param_map support_map param_tstar_map param_desc_map};

%% Parse Inputs
% override default set above if any parameters are updated

params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};

st_simu_type = default_params{1};
it_size_type = default_params{2};
cl_st_param_keys = default_params{3};

param_map = [param_map; default_params{4}];
support_map = [support_map; default_params{5}];
param_tstar_map = [param_tstar_map; default_params{6}];
param_desc_map = [param_desc_map; default_params{7}];

% Generate additional Elements of param_map for container map display
param_map('it_size_type') = it_size_type;
param_map('cl_st_param_keys') = cl_st_param_keys;
ar_param_keys_idx = cell2mat(cellfun(@(m) find(strcmp(ls_st_param_key, m)), ...
    cl_st_param_keys, 'UniformOutput', false));
param_map('ar_param_keys_idx') = ar_param_keys_idx;

%% Parse Generate or Get Current
% if bl_gen = true, generate, if bl_gen = false, get saved file and output.
% If bl_replacefile is true, that means the existing file must be replaced,
% which will set bl_gen to true

params_group = values(support_map, {'bl_replacefile', 'bl_display_simu_stats'});
[bl_replacefile, bl_display_simu_stats] = params_group{:};

params_group = values(param_map, {'it_st_simu_type_g_seed', 'it_st_simu_type_g_simun'});
[it_st_simu_type_g_seed, it_st_simu_type_g_simun] = params_group{:};

%% Store Mat Strings
%
% # _it_total_length_: this is the total length of all selected arrays
% # _ar_param_keys_idx_: these are the linear index of the selected keys
% among all possible keys
%

it_total_length = sum(cell2mat(cellfun(@(m) length(param_tstar_map(m)), ...
                                cl_st_param_keys, 'UniformOutput', false)));

support_map('st_mat_test_prefix') = [''];
support_map('st_mat_test_name_main') = ['r'];
support_map('st_mat_test_suffix') = ['_g' strrep(num2str(ar_param_keys_idx), '  ', '') ...
                                     '_c' st_simu_type ...
                                     '_t' num2str(it_size_type) 'l' num2str(it_total_length)];

%% Set Solve Sizes

if (it_size_type == 1)
    
    % Basic Test Run
    param_map('it_z_n') = 11;
    param_map('it_a_n') = 100;
        
elseif (it_size_type == 2)
    
    % Full Run
    
elseif (it_size_type == 3)
    
    % Denser Run
    param_map('it_z_n') = 27;
    param_map('it_a_n') = 2250;
    
end

%% Parase Preference and Shock Parameters

% support map
params_group = values(support_map, {'bl_mat_test', 'st_mat_test_path', 'st_mat_test_prefix', 'st_mat_test_name_main', 'st_mat_test_suffix'});
[bl_mat_test, st_mat_test_path, st_mat_test_prefix, st_mat_test_name_main, st_mat_test_suffix] = params_group{:};

%% Display support_map

fft_container_map_display(support_map);
fft_container_map_display(param_map);
fft_container_map_display(param_tstar_map);

%% Generate New or Obtain Existing Mat
% Mat file folder and mat file name

if ~exist(st_mat_test_path,'dir'); mkdir(st_mat_test_path); end
st_file_name = [st_mat_test_prefix st_mat_test_name_main st_mat_test_suffix '.mat'];
st_file_path_full = [st_mat_test_path, st_file_name];

bl_mat_exists = isfile(st_file_path_full);

if ( ~bl_replacefile && bl_mat_exists )
    
    st_loaded = load(st_file_path_full, 'tb_outcomes');
    tb_outcomes = st_loaded.tb_outcomes; 
    
else
    %% Initialize Storage
    
    disp('REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp(['Vary These Parameters:' cl_st_param_keys]);
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-');
    
    % cl_tb_outcomes_meansdperc_wthinfo = cell([length(cl_st_param_keys), 1]);
    tb_outcomes = [];
    
    %% Simulate 1: Cross Simulation, fix one point, extend parameters in each direction
    % Given X and Y parameters, simulate along an array of x values fixing y
    % value, then simulate along an array of y values fixing x value. Along the
    % x and y grid, this produces a _cross_ of simulated points. The
    % intersection of the array arrays, the center of the cross could be some
    % benchmark parameter value, or perhaps some estimated/calibrated parameter
    % value point.
    %
    
    if (strcmp(st_simu_type, 'c'))
        
        for it_pcombi_ctr = 1:length(cl_st_param_keys)
            
            st_param_key = cl_st_param_keys{it_pcombi_ctr};
            
            % Display Current Parameter been Varied
            % Parameter Key for Paraemter Getting Updated
            ar_param_values = param_tstar_map(st_param_key);
            st_param_desc = param_desc_map(st_param_key);
            fl_param_val_benchmark = param_map(st_param_key);
            
            disp('REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-');
            disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
            disp(['Vary ' st_param_desc ' (' st_param_key '): ' num2str(ar_param_values)]);
            for it_param_all_ctr = 1:length(ls_st_param_key)
                disp([ ls_st_param_key{it_param_all_ctr} ':' num2str(param_map(ls_st_param_key{it_param_all_ctr}))]);
            end
            disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
            
            % Simulate Model over Parameter Array Values
            for it_cur_param = 1:1:length(ar_param_values)
                
                % Adjust Value for Current Parameter been Varied
                fl_param_val = ar_param_values(it_cur_param);
                param_map(st_param_key) = fl_param_val;
                disp(['xxxxx ' st_param_key ' = ' num2str(fl_param_val) ' xxxxx']);
                
                % Simulate Model
                ar_simu_info = [find(strcmp(ls_st_param_key, st_param_key)), ...
                    it_cur_param, cell2mat(values(param_map, cl_st_param_keys))];
                cl_col_names = [{'it_test_grp', 'it_cur_param'} cl_st_param_keys];
                [tb_outcomes_simu, variablenames] = simu_model_gen_stats(param_map, support_map, ar_simu_info, cl_col_names);
                tb_outcomes_simu.Properties.RowNames = ...
                    strcat(variablenames, '_p', num2str(it_pcombi_ctr), 'v', num2str(it_cur_param));
                var_param_key = repmat({st_param_key}, [length(variablenames),1]);
                tb_outcomes_simu = addvars(tb_outcomes_simu, variablenames, var_param_key, 'Before', 1);
                
                % Combine Results from Different Parameters in Shared Table
                if (it_pcombi_ctr == 1 && it_cur_param == 1)
                    tb_outcomes = tb_outcomes_simu;
                else
                    tb_outcomes = [tb_outcomes; tb_outcomes_simu];
                end
                
            end
            
            % Reset Base Parameters, parameters already grabbed out, updating
            param_map(st_param_key) = fl_param_val_benchmark;
        end
    end
    
    %% Simulate 2: Full Grid Simulation, Simulate Along Full Grid
    % To explore the effects of parameters on model outcomes, simulate the
    % model along full grids. Given X and Y parameters, this means simulate at
    % all possible combinations of X and Y arrays.
    %
    
    if (ismember(st_simu_type, ["g", "r"]))
        
        % Get Arrays to be Meshed in Cells
        cl_ar_param_subset_values = values(param_tstar_map, cl_st_param_keys);
        
        % Generate all possible combinations of parameters subsets
        if (strcmp(st_simu_type, 'g'))
            cl_mt_all = cl_ar_param_subset_values;
            [cl_mt_all{:}] = ndgrid(cl_ar_param_subset_values{:});
            mt_param_vals_combi = cell2mat(cellfun(@(m) m(:), cl_mt_all, 'uni', 0));
        elseif (strcmp(st_simu_type, 'r'))
            % random draw within max and min N count
            rng(it_st_simu_type_g_seed);            
            mt_param_vals_combi = cell2mat(cellfun(@(m) ...
                                       rand([it_st_simu_type_g_simun,1]).*(max(param_tstar_map(m)) - min(param_tstar_map(m))) ...
                                       + min(param_tstar_map(m)), ...
                                       cl_st_param_keys, 'UniformOutput', false));
        end
        
        % Sizes
        it_test_combi_n = size(mt_param_vals_combi,1);
        
        % Show Combinations of Parameters Simulating over, convert from Matrix to Table for Clarity
        tb_pvals_combi = array2table(mt_param_vals_combi);
        tb_pvals_combi.Properties.VariableNames = cl_st_param_keys;
        tb_pvals_combi.Properties.RowNames = strcat('j=', string(1:size(mt_param_vals_combi,1)));
        clear mt_param_vals_combi;
        
        % Display
        disp(head(tb_pvals_combi, 10));
        disp(tail(tb_pvals_combi, 10));
                
        for it_pcombi_ctr = 1:it_test_combi_n
            
            tb_row_param_adj_cur = tb_pvals_combi(it_pcombi_ctr, :);
            
            disp(['xxxxx Shift to: xxxxx']);
            disp(tb_row_param_adj_cur)
            
            % Display Current Parameter been Varied
            for st_param_key = cl_st_param_keys
                param_map(st_param_key{1}) = tb_row_param_adj_cur{1, st_param_key};
            end
            
            % Simulate Model
            ar_simu_info = [it_pcombi_ctr, cell2mat(values(param_map, cl_st_param_keys))];
            cl_col_names = [{'it_pcombi_ctr'} cl_st_param_keys];
            [tb_outcomes_simu, variablenames] = simu_model_gen_stats(param_map, support_map, ar_simu_info, cl_col_names);
            tb_outcomes_simu.Properties.RowNames = strcat(variablenames, '_v', num2str(it_pcombi_ctr));
            tb_outcomes_simu = addvars(tb_outcomes_simu, variablenames, 'Before', 1);
            
            % Combine Results from Different Parameters in Shared Table
            if (it_pcombi_ctr == 1)
                tb_outcomes = tb_outcomes_simu;
            else
                tb_outcomes = [tb_outcomes; tb_outcomes_simu];
            end
            
        end
    end
    
    % Table Output
    if (bl_display_simu_stats)
        disp('REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-');
        disp('xxxxxx tb_outcomes xxxxxx');
        disp(head(tb_outcomes, 10));
        disp(tail(tb_outcomes, 10));
    end
    
    %% Save Mat
    if (bl_mat_test)
        clear armt_map result_map
        if ~exist(st_mat_test_path,'dir'); mkdir(st_mat_test_path); end
        st_file_name = [st_mat_test_prefix st_mat_test_name_main st_mat_test_suffix];
        save(strcat(st_mat_test_path, st_file_name));
    end
    
end

end

%% Simulate Model given Parameter and Process Results
function [tb_outcomes_simu, variablenames] = simu_model_gen_stats(param_map, support_map, ar_simu_info, cl_col_names)

cl_st_param_keys = param_map('cl_st_param_keys');

%% Reset Parameters that are determined by other parameters
it_a_n = param_map('it_a_n');
it_z_n = param_map('it_z_n');
disp(['xxxxx it_a_n = ' num2str(it_a_n) ', it_z_n = ' num2str(it_z_n) ' xxxxx']);

%% Simulate Model
[armt_map, func_map] = ffs_az_get_funcgrid(param_map, support_map);
result_map = ff_az_vf_vecsv(param_map, support_map, armt_map, func_map);
result_map = ff_az_ds_vecsv(param_map, support_map, armt_map, func_map, result_map);

%% Store Results to Table

% Append Simulation Loop Statistics
tb_outcomes_meansdperc = result_map('tb_outcomes');
tb_simu_info = array2table(ar_simu_info + zeros([size(tb_outcomes_meansdperc,1), length(ar_simu_info)]));
tb_simu_info.Properties.VariableNames = cl_col_names;
variablenames = tb_outcomes_meansdperc.Properties.RowNames;
tb_simu_info.Properties.RowNames = (variablenames);

% Table
tb_outcomes_simu = [tb_simu_info tb_outcomes_meansdperc];
end

##### SOURCE END #####
--></body></html>