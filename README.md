This is a work-in-progress [website](https://fanwangecon.github.io/CodeDynaAsset/) of collections of code for solving several infinite horizon exogenous incomplete dynamic asset models, produced by [Fan](https://fanwangecon.github.io/). Materials gathered from various [papers](https://fanwangecon.github.io/research) on financial access.

Generally, looped, vectorized, and efficient-vectorized versions of the same code from Matlab (tested with [Matlab 2019a](https://www.mathworks.com/company/newsroom/mathworks-announces-release-2019a-of-matlab-and-simulink.html)) are shown. Looped codes are shown for clarity, vectorized codes are shown for speed.

Each function is written with default parameters and is directly callable: 1, clone the project via github, see [here](docs/gitsetup.md); 2, add project to path; 3, click run any file. Algorithms are language agnostic. Speed difference across languages is not significant when solving models using vectorized grid-based solution algorithms.

Please contact [FanWangEcon](https://fanwangecon.github.io/) for issues or problems.


<!-- Each self-contained folder includes all codes required to invoke each model.

Each model folder has this file structure:

1. invoke: file that invoke, call the file in the solve folder, to loop over various parameter combinations
2. solve: the solution code for solving the model, including solution code for optimization and code for finding distributions. Generally, several versions of codes are included for solving the model using different algorithms.
3. tools: files, functions, specific to this model that helps solving things
4. params: including files that contain different parameter combinations

There is a an overall tools folder that contains codes/files that are shared across folders.

Within each subfolder, there is possibly a *_profile* folder for html files that are profiling results (only several main files are stored, so most links are not clickable), and a html file with files generated by matlab publish. -->

# 1. Solving the One Asset One Shock Problem
<!-- https://fanwangecon.github.io/CodeDynaAsset/m_az -->

The standard heterogeneous agent model with assets and shocks. Endogenous asset. Income is a function of exogenous wage and endogenous interest earnings. Exogenous incomplete borrowing and savings. Wage shocks follow AR1.

## 1.1 Optimization

Solving as benchmark with these [parameters](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_default_param.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_az_set_default_param.m), in particular:

- savings only problem
- **750** grid points for asset states/choices
- **15** grid points for the AR1 shock

Using three algorithm that provide identical solutions and increases solution speed from 9765.7 seconds to 1.2 seconds.


*File Links:*

1. Solution Main
    - [looped solution](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solve/ff_az_vf.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf.html) \| [**profile**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/profile/ff_az_vf_default_p3/file3.html)
        * speed: 9765.7 seconds (5.5 Hours)
        * loops: 1 for VFI, 1 for shocks, 1 for endo state, 1 for choice, 1 for future shocks
    - [vectorized solution](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf_vec.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solve/ff_az_vf_vec.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf_vec.html) \| [**profile**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/profile/ff_az_vf_vec_default_p3/file3.html)    
        * speed: 34.3 seconds
        * loops: 1 for VFI, 1 for shocks, vectorize remaining 3 loops
    - [optimized vectorized solution](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf_vecsv.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solve/ff_az_vf_vecsv.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_vf_vecsv.html) \| [**profile**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/profile/ff_az_vf_vecsv_default_p3/file3.html)    
        * speed: 1.2 seconds
        * loops: 1 for VFI, 1 for shocks, vectorize remaining 3 loops
        * store u(c) in cells, several speed improvements described [here](https://fanwangecon.github.io/M4Econ/)
2. Policy and Value Function Analysis
    -  [solution results processing](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_az_vf_post.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solvepost/ff_az_vf_post.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_az_vf_post.html)
    - [solution results graphing](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_az_vf_post_graph.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solvepost/ff_az_vf_post_graph.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_az_vf_post_graph.html)
3. Support
    - [set default parameters](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_default_param.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_az_set_default_param.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_default_param.html)
    - [set functions](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_functions.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_az_set_functions.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_set_functions.html)
    - [generate states, choices, and shocks grids](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_get_funcgrid.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_az_get_funcgrid.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_az_get_funcgrid.html)


## 1.2 Asset Distributions

Solving for the asset distribution.


# 2. Solving the Cash-on-hand and One Shock Problem

Using cash-on-hand as state variable allows for easier inclusion of additional asset states/choices later. Solving with cash-on-hand and shock also allows for a semi-analytical solution for finding the asset distribution. But for one state one shock model, there is practically no difference between this code and earlier codes. For these codes, the asset choice is interpreted to included interest and principles whereas before the asset choice only includes principles. These codes are included for completeness.

## 2.1 Optimization

Solving the same benchmark as before, sppeds are the same. 

*File Links:*

1. Solution Main
    - [looped solution](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_oz_vf.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solve/ff_oz_vf.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_oz_vf.html) \| [**profile**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/profile/ff_oz_vf_default_p3/file3.html)
    - [vectorized solution](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_oz_vf_vec.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solve/ff_oz_vf_vec.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_oz_vf_vec.html) \| [**profile**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/profile/ff_oz_vf_vec_default_p3/file3.html)    
    - [optimized vectorized solution](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_oz_vf_vecsv.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solve/ff_oz_vf_vecsv.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_oz_vf_vecsv.html) \| [**profile**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/profile/ff_oz_vf_vecsv_default_p3/file3.html)    
2. Policy and Value Function Analysis
    -  [solution results processing](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_oz_vf_post.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solvepost/ff_oz_vf_post.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_oz_vf_post.html)
    - [solution results graphing](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_oz_vf_post_graph.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/solvepost/ff_oz_vf_post_graph.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/solvepost/html/ff_oz_vf_post_graph.html)
3. Support
    - [set default parameters](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_oz_set_default_param.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_oz_set_default_param.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_oz_set_default_param.html)
    - [set functions](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_oz_set_functions.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_oz_set_functions.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_oz_set_functions.html)
    - [generate states, choices, and shocks grids](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_oz_get_funcgrid.html): [**m**](https://github.com/FanWangEcon/CodeDynaAsset/blob/master/m_az/paramfunc/ffs_oz_get_funcgrid.m) \| [**publish html**](https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_oz_get_funcgrid.html)


## 1.2 Asset Distributions

Solving for the asset distribution
