
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Derive Two Asset (Risky + Safe) and Choices/Outcomes Distribution (Analytical)</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-03"><meta name="DC.source" content="ff_akz_ds_vecsv.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Derive Two Asset (Risky + Safe) and Choices/Outcomes Distribution (Analytical)</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><p>This uses <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html">ff_az_ds_vecsv</a>, which works for single and multiple assets.</p><p>The function here works with both <a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_akz_vf_vecsv.html">ff_akz_vf_vecsv</a> as well as <a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_wkz_vf_vecsv.html">ff_wkz_vf_vecsv</a>. Results are identical, but <i>ff_wkz_vf_vecsv</i> is significantly faster.</p><p>@include</p><div><ul><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_akz_vf_vecsv.html">ff_az_vf_vecsv</a></li><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_wkz_vf_vecsv.html">ff_wkz_vf_vecsv</a></li><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html">ff_az_ds_vecsv</a></li></ul></div><p>@seealso</p><div><ul><li>derive distribution f(y'(y,z)) one asset <b>loop</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds.html">ff_az_ds</a></li><li>derive distribution f(y'({x,y},z)) two assets <b>loop</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_akz_ds.html">ff_akz_ds</a></li><li>derive distribution f(y'({x,y},z, <b>z'</b>)) two assets <b>loop</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_iwkz_ds.html">ff_iwkz_ds</a></li><li>derive distribution f(y'({y},z)) or f(y'({x,y},z)) <b>vectorized</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html">ff_az_ds_vec</a></li><li>derive distribution f(y'({y},z, <b>z'</b>)) or f(y'({x,y},z, <b>z'</b>)) <b>vectorized</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_iwkz_ds_vec.html">ff_iwkz_ds_vec</a></li><li>derive distribution f(y'({y},z)) or f(y'({x,y},z)) <b>semi-analytical</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html">ff_az_ds_vecsv</a></li><li>derive distribution f(y'({y},z, <b>z'</b>)) or f(y'({x,y},z, <b>z'</b>)) <b>semi-analytical</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_iwkz_ds_vecsv.html">ff_iwkz_ds_vecsv</a></li></ul></div><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Set Parameters Main</a></li><li><a href="#2">Get Parameters</a></li><li><a href="#3">Alternative 1: Solving the Dynamic Programming Problem (AKZ)</a></li><li><a href="#4">Alternative 2: Solving the Dynamic Programming Problem (AWZ)</a></li><li><a href="#5">Distribution Start Profiler and Timer</a></li><li><a href="#6">Derive Distribution</a></li><li><a href="#7">End profiler and Timer</a></li></ul></div><h2 id="1">Set Parameters Main</h2><p>Options for Distribution solutions</p><div><ol><li>it_subset = 5 is basic invoke quick test</li><li>it_subset = 6 is invoke full test</li><li>it_subset = 7 is profiling invoke</li><li>it_subset = 8 is matlab publish</li><li>it_subset = 9 is invoke operational (only final stats) and coh graph</li></ol></div><pre class="codeinput">close <span class="string">all</span>;
clear <span class="string">all</span>;

it_param_set = 8;
st_akz_or_wkz = <span class="string">'wkz'</span>;
</pre><h2 id="2">Get Parameters</h2><p>Note that akz and wkz share the smae funcgrid and default_param functions</p><pre class="codeinput"><span class="comment">% Set Parameters</span>
bl_input_override = true;
[param_map, support_map] = ffs_akz_set_default_param(it_param_set);
support_map(<span class="string">'bl_profile_dist'</span>) = false;

<span class="comment">% Call Grid Generator &lt;https://fanwangecon.github.io/CodeDynaAsset/m_akz/paramfunc/html/ffs_akz_get_funcgrid.html ffs_akz_get_funcgrid&gt;</span>
[armt_map, func_map] = ffs_akz_get_funcgrid(param_map, support_map, bl_input_override); <span class="comment">% 1 for override</span>
</pre><h2 id="3">Alternative 1: Solving the Dynamic Programming Problem (AKZ)</h2><pre class="codeinput"><span class="keyword">if</span> (strcmp(st_akz_or_wkz, <span class="string">'akz'</span>))
    result_map = ff_akz_vf_vecsv(param_map, support_map, armt_map, func_map);
<span class="keyword">end</span>
</pre><h2 id="4">Alternative 2: Solving the Dynamic Programming Problem (AWZ)</h2><pre class="codeinput"><span class="keyword">if</span> (strcmp(st_akz_or_wkz, <span class="string">'wkz'</span>))
    result_map = ff_wkz_vf_vecsv(param_map, support_map, armt_map, func_map);
<span class="keyword">end</span>
</pre><img vspace="5" hspace="5" src="ff_akz_ds_vecsv_01.png" alt=""> <img vspace="5" hspace="5" src="ff_akz_ds_vecsv_02.png" alt=""> <h2 id="5">Distribution Start Profiler and Timer</h2><pre class="codeinput"><span class="comment">% Start Profiling</span>
<span class="keyword">if</span> (it_param_set == 7)
    profile <span class="string">off</span>;
    profile <span class="string">on</span>;
<span class="keyword">end</span>

<span class="comment">% Start Timer</span>
<span class="keyword">if</span> (support_map(<span class="string">'bl_time'</span>))
    tic;
<span class="keyword">end</span>

<span class="comment">% Get Profile name</span>
st_profile_name_main = support_map(<span class="string">'st_profile_name_main'</span>);
</pre><h2 id="6">Derive Distribution</h2><pre class="codeinput"><span class="comment">% Call Distribution Program &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html ff_az_ds_vec&gt;</span>
result_map = ff_az_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
</pre><pre class="codeoutput">----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_coh
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    6.6414

fl_choice_sd
    3.2081

fl_choice_coefofvar
    0.4830

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   4.0305e-35

tb_prob_drv
    percentiles    cl_mt_pol_cohPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    _____________________________    ________________________________

        0.1                   2.7703                           0.00069849           
          1                   2.9189                             0.004584           
          5                   3.3795                             0.032016           
         10                   3.9458                             0.053826           
         15                   4.1803                               0.0984           
         20                   4.3216                              0.13587           
         25                   4.4846                              0.17815           
         35                   4.6727                              0.21852           
         50                    5.557                              0.33228           
         65                   6.8355                              0.47342           
         75                   7.8814                              0.58565           
         80                   8.4891                              0.65291           
         85                   9.5307                              0.71372           
         90                   10.711                              0.78852           
         95                   13.177                               0.8779           
         99                   18.291                              0.96896           
       99.9                   24.692                              0.99598           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_a
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    0.3116

fl_choice_sd
    1.1458

fl_choice_coefofvar
    3.6771

fl_choice_prob_zero
    0.8815

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    0.1185

fl_choice_prob_max
  -1.8289e-33

tb_prob_drv
    percentiles    cl_mt_pol_aPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                       0                                 0             
          1                       0                                 0             
          5                       0                                 0             
         10                       0                                 0             
         15                       0                                 0             
         20                       0                                 0             
         25                       0                                 0             
         35                       0                                 0             
         50                       0                                 0             
         65                       0                                 0             
         75                       0                                 0             
         80                       0                                 0             
         85                       0                                 0             
         90                  1.0204                           0.11916             
         95                  2.0408                           0.33877             
         99                  6.1224                           0.75309             
       99.9                  11.224                           0.95767             

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_k
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    4.5107

fl_choice_sd
    2.2178

fl_choice_coefofvar
    0.4917

fl_choice_prob_zero
   2.0787e-17

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   2.7759e-07

tb_prob_drv
    percentiles    cl_mt_pol_kPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  2.0408                           0.048506            
          1                  2.0408                           0.048506            
          5                  2.0408                           0.048506            
         10                  2.0408                           0.048506            
         15                  3.0612                            0.27939            
         20                  3.0612                            0.27939            
         25                  3.0612                            0.27939            
         35                  3.0612                            0.27939            
         50                  4.0816                            0.42889            
         65                   5.102                            0.61601            
         75                   5.102                            0.61601            
         80                  6.1224                            0.74123            
         85                  6.1224                            0.74123            
         90                  7.1429                            0.80377            
         95                  9.1837                            0.91266            
         99                  12.245                            0.97174            
       99.9                  17.347                            0.99698            

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_c
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    1.8192

fl_choice_sd
    0.5539

fl_choice_coefofvar
    0.3045

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   4.0305e-35

tb_prob_drv
    percentiles    cl_mt_pol_cPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  0.72951                         0.00067151           
          1                  0.87804                          0.0048445           
          5                  0.99654                           0.026976           
         10                   1.1191                           0.059063           
         15                   1.2604                            0.11006           
         20                   1.3387                             0.1374           
         25                   1.4234                            0.19492           
         35                   1.5074                            0.25414           
         50                   1.7334                            0.38022           
         65                   2.0197                            0.53374           
         75                    2.162                            0.64856           
         80                    2.295                            0.71757           
         85                   2.3829                            0.77205           
         90                    2.597                             0.8423           
         95                   2.8274                             0.9156           
         99                   3.2736                            0.98017           
       99.9                   3.9464                            0.99782           

xxx All Variables PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar      min       max        pYis0       pYls0    pYgr0      pYisMINY      pYisMAXY       p0_1        p1         p5        p10       p15       p20       p25       p35       p50       p65       p75       p80       p85       p90       p95       p99      p99_9 
                     _______    _______    _________    _______    ______    __________    _____    ______    __________    ___________    _______    _______    _______    ______    ______    ______    ______    ______    ______    ______    ______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_coh     6.6414     3.2081     0.48304     0.44365    57.277             0      0           1    2.0787e-17     4.0305e-35     2.7703     2.9189     3.3795    3.9458    4.1803    4.3216    4.4846    4.6727     5.557    6.8355    7.8814    8.4891    9.5307    10.711    13.177    18.291    24.692
    cl_mt_pol_a      0.31162     1.1458      3.6771           0    44.898        0.8815      0      0.1185        0.8815    -1.8289e-33          0          0          0         0         0         0         0         0         0         0         0         0         0    1.0204    2.0408    6.1224    11.224
    cl_mt_pol_k       4.5107     2.2178     0.49168           0    22.449    2.0787e-17      0           1    2.0787e-17     2.7759e-07     2.0408     2.0408     2.0408    2.0408    3.0612    3.0612    3.0612    3.0612    4.0816     5.102     5.102    6.1224    6.1224    7.1429    9.1837    12.245    17.347
    cl_mt_pol_c       1.8192    0.55385     0.30445     0.44365    7.2772             0      0           1    2.0787e-17     4.0305e-35    0.72951    0.87804    0.99654    1.1191    1.2604    1.3387    1.4234    1.5074    1.7334    2.0197     2.162     2.295    2.3829     2.597    2.8274    3.2736    3.9464

xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
                     fracByP0_1    fracByP1     fracByP5    fracByP10    fracByP15    fracByP20    fracByP25    fracByP35    fracByP50    fracByP65    fracByP75    fracByP80    fracByP85    fracByP90    fracByP95    fracByP99    fracByP99_9
                     __________    _________    ________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    ___________

    cl_mt_pol_coh    0.00069849     0.004584    0.032016    0.053826       0.0984      0.13587      0.17815      0.21852      0.33228      0.47342      0.58565      0.65291      0.71372      0.78852       0.8779      0.96896       0.99598  
    cl_mt_pol_a               0            0           0           0            0            0            0            0            0            0            0            0            0      0.11916      0.33877      0.75309       0.95767  
    cl_mt_pol_k        0.048506     0.048506    0.048506    0.048506      0.27939      0.27939      0.27939      0.27939      0.42889      0.61601      0.61601      0.74123      0.74123      0.80377      0.91266      0.97174       0.99698  
    cl_mt_pol_c      0.00067151    0.0048445    0.026976    0.059063      0.11006       0.1374      0.19492      0.25414      0.38022      0.53374      0.64856      0.71757      0.77205       0.8423       0.9156      0.98017       0.99782  

</pre><h2 id="7">End profiler and Timer</h2><pre class="codeinput"><span class="comment">% End Timer</span>
<span class="keyword">if</span> (support_map(<span class="string">'bl_time'</span>))
    toc;
<span class="keyword">end</span>

<span class="comment">% End Profiling</span>
<span class="keyword">if</span> (it_param_set == 7)
    profile <span class="string">off</span>
    profile <span class="string">viewer</span>

    <span class="comment">% append function name</span>
    st_func_name = <span class="string">'ff_akz_ds_vecsv'</span>;
    support_map(<span class="string">'st_profile_path'</span>) = [support_map(<span class="string">'st_matimg_path_root'</span>) <span class="string">'/solve/profile/'</span>];
    support_map(<span class="string">'st_profile_name_main'</span>) = [st_func_name st_profile_name_main];

    <span class="comment">% support_map</span>
    params_group = values(support_map, {<span class="string">'st_profile_path'</span>, <span class="keyword">...</span>
        <span class="string">'st_profile_prefix'</span>, <span class="string">'st_profile_name_main'</span>, <span class="string">'st_profile_suffix'</span>});
    [st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix] = params_group{:};

    <span class="comment">% Save</span>
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile(<span class="string">'info'</span>), strcat(st_profile_path, st_file_name));
<span class="keyword">end</span>
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Derive Two Asset (Risky + Safe) and Choices/Outcomes Distribution (Analytical)
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*
%
% This uses
% <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html
% ff_az_ds_vecsv>, which works for single and multiple assets.
%
% The function here works with both
% <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_akz_vf_vecsv.html
% ff_akz_vf_vecsv> as well as
% <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_wkz_vf_vecsv.html
% ff_wkz_vf_vecsv>. Results are identical, but _ff_wkz_vf_vecsv_ is
% significantly faster.
%
% @include
%
% * <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_akz_vf_vecsv.html ff_az_vf_vecsv>
% * <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_wkz_vf_vecsv.html ff_wkz_vf_vecsv>
% * <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html ff_az_ds_vecsv>
%
% @seealso
%
% * derive distribution f(y'(y,z)) one asset *loop*: <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds.html ff_az_ds>
% * derive distribution f(y'({x,y},z)) two assets *loop*: <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_akz_ds.html ff_akz_ds>
% * derive distribution f(y'({x,y},z, *z'*)) two assets *loop*: <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_iwkz_ds.html ff_iwkz_ds>
% * derive distribution f(y'({y},z)) or f(y'({x,y},z)) *vectorized*: <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html ff_az_ds_vec>
% * derive distribution f(y'({y},z, *z'*)) or f(y'({x,y},z, *z'*)) *vectorized*: <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_iwkz_ds_vec.html ff_iwkz_ds_vec>
% * derive distribution f(y'({y},z)) or f(y'({x,y},z)) *semi-analytical*: <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html ff_az_ds_vecsv>
% * derive distribution f(y'({y},z, *z'*)) or f(y'({x,y},z, *z'*)) *semi-analytical*: <https://fanwangecon.github.io/CodeDynaAsset/m_akz/solve/html/ff_iwkz_ds_vecsv.html ff_iwkz_ds_vecsv>
%

%% Set Parameters Main
% Options for Distribution solutions
%
% # it_subset = 5 is basic invoke quick test
% # it_subset = 6 is invoke full test
% # it_subset = 7 is profiling invoke
% # it_subset = 8 is matlab publish
% # it_subset = 9 is invoke operational (only final stats) and coh graph
%

close all;
clear all;

it_param_set = 8;
st_akz_or_wkz = 'wkz';

%% Get Parameters
% Note that akz and wkz share the smae funcgrid and default_param functions

% Set Parameters
bl_input_override = true;
[param_map, support_map] = ffs_akz_set_default_param(it_param_set);
support_map('bl_profile_dist') = false;

% Call Grid Generator <https://fanwangecon.github.io/CodeDynaAsset/m_akz/paramfunc/html/ffs_akz_get_funcgrid.html ffs_akz_get_funcgrid>
[armt_map, func_map] = ffs_akz_get_funcgrid(param_map, support_map, bl_input_override); % 1 for override

%% Alternative 1: Solving the Dynamic Programming Problem (AKZ)

if (strcmp(st_akz_or_wkz, 'akz'))
    result_map = ff_akz_vf_vecsv(param_map, support_map, armt_map, func_map);
end

%% Alternative 2: Solving the Dynamic Programming Problem (AWZ)

if (strcmp(st_akz_or_wkz, 'wkz'))
    result_map = ff_wkz_vf_vecsv(param_map, support_map, armt_map, func_map);
end

%% Distribution Start Profiler and Timer

% Start Profiling
if (it_param_set == 7)
    profile off;
    profile on;
end

% Start Timer
if (support_map('bl_time'))
    tic;
end

% Get Profile name
st_profile_name_main = support_map('st_profile_name_main');

%% Derive Distribution

% Call Distribution Program <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html ff_az_ds_vec>
result_map = ff_az_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

%% End profiler and Timer

% End Timer
if (support_map('bl_time'))
    toc;
end

% End Profiling
if (it_param_set == 7)
    profile off
    profile viewer
        
    % append function name
    st_func_name = 'ff_akz_ds_vecsv';
    support_map('st_profile_path') = [support_map('st_matimg_path_root') '/solve/profile/'];    
    support_map('st_profile_name_main') = [st_func_name st_profile_name_main];    
    
    % support_map
    params_group = values(support_map, {'st_profile_path', ...
        'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix'});
    [st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix] = params_group{:};
    
    % Save
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile('info'), strcat(st_profile_path, st_file_name));    
end

##### SOURCE END #####
--></body></html>