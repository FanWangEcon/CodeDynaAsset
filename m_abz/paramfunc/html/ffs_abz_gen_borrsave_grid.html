
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ffs_abz_gen_borrsave_grid</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-06-10"><meta name="DC.source" content="ffs_abz_gen_borrsave_grid.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#2">FFS_ABZ_GEN_BORRSAVE_GRID get funcs, params, states choices shocks grids</a></li><li><a href="#3">Default Folder Parameters</a></li><li><a href="#4">Parse Parameters</a></li><li><a href="#5">Min and Max Income</a></li><li><a href="#6">Savings Only</a></li><li><a href="#7">Borrowing</a></li><li><a href="#9">Borrowing not allowing for default</a></li><li><a href="#10">Borrowing allowing for default</a></li><li><a href="#12">Grid</a></li><li><a href="#13">Add Zero</a></li></ul></div><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><pre class="codeinput"><span class="keyword">function</span> [ar_a, fl_borr_yminbd, fl_borr_ymaxbd] = ffs_abz_gen_borrsave_grid(varargin)
</pre><h2 id="2">FFS_ABZ_GEN_BORRSAVE_GRID get funcs, params, states choices shocks grids</h2><p>Generate savings and borrowing states/choice grids. There are three types of grids: # savings choice/state grid # borrowing choice/state grid when default is not allowed # borrowing choice/state grid when default is allowed</p><p>The parameters for this function and the role of cmin, ymin, default, etc are discussed on this page: <a href="https://fanwangecon.github.io/CodeDynaAsset/docs/README_cminymin_borrsave.html">cmin ymin borr save</a>.</p><p>@param fl_b_bd float exogenously set borrowing bound. If zero, borrowing is not allowed. If lower than zero, means borrowing is allowed. When borrowing is allowed fl_b_bd is only the actual bound on borrowing if it is tighter than the natural borrowing constraint based on minimum income in the case where defaults are not allowed. And if it is tighther than the defaults borrowing constraint based on maximium income in the case where defaults are allowed.</p><p>@param bl_default boolean if fl_b_bd is below zero, then is defaults allowed or not? What does default mean? No-default means households under all shocks, can always repay existing debts and interests with new debts. This means banks do not have to worry about non-repayment. Households always pay back what they are owed. Note that debt roll-over is allowed here. What does default mean, it means under some states of shocks, households face debt that they can not repay, so they go to minimum consumption, which is utility for default. Their optimal choice is savings = 0 for the next period.</p><p>@param ar_z array array of exogenous income shocks for the exogeous shocks to inelastic labor supply</p><p>@return fl_w float wage</p><p>@return fl_a_max float maximum savings level</p><p>@return it_a_n integer number of save/borrow grid points</p><p>@example</p><pre class="language-matlab">ar_a = ffs_abz_gen_borrsave_grid(fl_b_bd, bl_default, ar_z, <span class="keyword">...</span>
                                 fl_w, fl_r_borr, fl_a_max, it_a_n);
@include
</pre><pre class="codeinput">cl_params_len = length(varargin);
</pre><h2 id="3">Default Folder Parameters</h2><pre class="codeinput">fl_b_bd = -100;
bl_default = 1;
ar_z = [0.3474 0.4008 0.4623 0.5333 0.6152 0.7097 0.8186 0.9444 1.0894 1.2567 1.4496 1.6723 1.9291 2.2253 2.5670];
fl_w = 1;
fl_r_borr = 0.05;
fl_a_min = 0;
fl_a_max = 50;
it_a_n = 100;

cl_params = {fl_b_bd bl_default ar_z <span class="keyword">...</span>
             fl_w fl_r_borr fl_a_min fl_a_max it_a_n};
</pre><h2 id="4">Parse Parameters</h2><p>numvarargs is the number of varagin inputted</p><pre class="codeinput">[cl_params{1:cl_params_len}] = varargin{:};
fl_b_bd = cl_params{1};
bl_default = cl_params{2};
ar_z = cl_params{3};
fl_w = cl_params{4};
fl_r_borr = cl_params{5};
fl_a_min = cl_params{6};
fl_a_max = cl_params{7};
it_a_n = cl_params{8};
</pre><h2 id="5">Min and Max Income</h2><p>With the discretized exogenous income process, there are minimum and maximum levels of income next period given the vector of shocks.</p><pre class="codeinput">fl_ar_z_min = min(ar_z);
fl_borr_yminbd = -(fl_ar_z_min*fl_w)/fl_r_borr;

fl_ar_z_max = max(ar_z);
fl_borr_ymaxbd = -(fl_ar_z_max*fl_w)/fl_r_borr;
</pre><h2 id="6">Savings Only</h2><pre class="codeinput"><span class="keyword">if</span> (fl_b_bd &gt;= 0)
    <span class="comment">% interpret this as minimum savings level if 0 is not allowed</span>
    fl_a_min = fl_a_min;
<span class="keyword">end</span>
</pre><h2 id="7">Borrowing</h2><pre class="codeinput"><span class="keyword">if</span> (fl_b_bd &lt; 0)
</pre><h2 id="9">Borrowing not allowing for default</h2><pre class="codeinput">    <span class="keyword">if</span> (~bl_default)
        fl_a_min = max(fl_b_bd, fl_borr_yminbd);
    <span class="keyword">end</span>
</pre><h2 id="10">Borrowing allowing for default</h2><pre class="codeinput">    <span class="keyword">if</span> (bl_default)
        fl_a_min = max(fl_b_bd, fl_borr_ymaxbd);
    <span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><h2 id="12">Grid</h2><pre class="codeinput">ar_a = linspace(fl_a_min, fl_a_max, it_a_n);
</pre><h2 id="13">Add Zero</h2><pre class="codeinput">ar_a = [0 ar_a];
ar_a = sort(unique(ar_a));
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">
ans =

  Columns 1 through 7

  -51.3400  -50.3164  -49.2927  -48.2691  -47.2455  -46.2218  -45.1982

  Columns 8 through 14

  -44.1745  -43.1509  -42.1273  -41.1036  -40.0800  -39.0564  -38.0327

  Columns 15 through 21

  -37.0091  -35.9855  -34.9618  -33.9382  -32.9145  -31.8909  -30.8673

  Columns 22 through 28

  -29.8436  -28.8200  -27.7964  -26.7727  -25.7491  -24.7255  -23.7018

  Columns 29 through 35

  -22.6782  -21.6545  -20.6309  -19.6073  -18.5836  -17.5600  -16.5364

  Columns 36 through 42

  -15.5127  -14.4891  -13.4655  -12.4418  -11.4182  -10.3945   -9.3709

  Columns 43 through 49

   -8.3473   -7.3236   -6.3000   -5.2764   -4.2527   -3.2291   -2.2055

  Columns 50 through 56

   -1.1818   -0.1582         0    0.8655    1.8891    2.9127    3.9364

  Columns 57 through 63

    4.9600    5.9836    7.0073    8.0309    9.0545   10.0782   11.1018

  Columns 64 through 70

   12.1255   13.1491   14.1727   15.1964   16.2200   17.2436   18.2673

  Columns 71 through 77

   19.2909   20.3145   21.3382   22.3618   23.3855   24.4091   25.4327

  Columns 78 through 84

   26.4564   27.4800   28.5036   29.5273   30.5509   31.5745   32.5982

  Columns 85 through 91

   33.6218   34.6455   35.6691   36.6927   37.7164   38.7400   39.7636

  Columns 92 through 98

   40.7873   41.8109   42.8345   43.8582   44.8818   45.9055   46.9291

  Columns 99 through 101

   47.9527   48.9764   50.0000

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% 
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository> 
% Table of Content.*

function [ar_a, fl_borr_yminbd, fl_borr_ymaxbd] = ffs_abz_gen_borrsave_grid(varargin)
%% FFS_ABZ_GEN_BORRSAVE_GRID get funcs, params, states choices shocks grids
% Generate savings and borrowing states/choice grids. There are three types
% of grids:
% # savings choice/state grid
% # borrowing choice/state grid when default is not allowed
% # borrowing choice/state grid when default is allowed
%
% The parameters for this function and the role of cmin, ymin, default, etc
% are discussed on this page:
% <https://fanwangecon.github.io/CodeDynaAsset/docs/README_cminymin_borrsave.html
% cmin ymin borr save>.
%
% @param fl_b_bd float exogenously set borrowing bound. If zero, borrowing
% is not allowed. If lower than zero, means borrowing is allowed. When
% borrowing is allowed fl_b_bd is only the actual bound on borrowing if it
% is tighter than the natural borrowing constraint based on minimum income
% in the case where defaults are not allowed. And if it is tighther than
% the defaults borrowing constraint based on maximium income in the case
% where defaults are allowed.  
%
% @param bl_default boolean if fl_b_bd is below zero, then is defaults
% allowed or not? What does default mean? No-default means households under
% all shocks, can always repay existing debts and interests with new debts.
% This means banks do not have to worry about non-repayment. Households
% always pay back what they are owed. Note that debt roll-over is allowed
% here. What does default mean, it means under some states of shocks,
% households face debt that they can not repay, so they go to minimum
% consumption, which is utility for default. Their optimal choice is
% savings = 0 for the next period. 
%
% @param ar_z array array of exogenous income shocks for the exogeous
% shocks to inelastic labor supply 
%
% @return fl_w float wage
%
% @return fl_a_max float maximum savings level
%
% @return it_a_n integer number of save/borrow grid points
%
% @example
%
%   ar_a = ffs_abz_gen_borrsave_grid(fl_b_bd, bl_default, ar_z, ...
%                                    fl_w, fl_r_borr, fl_a_max, it_a_n);
% @include
%

cl_params_len = length(varargin);

%% Default Folder Parameters

fl_b_bd = -100;
bl_default = 1;
ar_z = [0.3474 0.4008 0.4623 0.5333 0.6152 0.7097 0.8186 0.9444 1.0894 1.2567 1.4496 1.6723 1.9291 2.2253 2.5670];
fl_w = 1;
fl_r_borr = 0.05;
fl_a_min = 0;
fl_a_max = 50;
it_a_n = 100;

cl_params = {fl_b_bd bl_default ar_z ...
             fl_w fl_r_borr fl_a_min fl_a_max it_a_n};

%% Parse Parameters
% numvarargs is the number of varagin inputted
[cl_params{1:cl_params_len}] = varargin{:};
fl_b_bd = cl_params{1};
bl_default = cl_params{2};
ar_z = cl_params{3};
fl_w = cl_params{4};
fl_r_borr = cl_params{5};
fl_a_min = cl_params{6};
fl_a_max = cl_params{7};
it_a_n = cl_params{8};

%% Min and Max Income
% With the discretized exogenous income process, there are minimum and
% maximum levels of income next period given the vector of shocks. 

fl_ar_z_min = min(ar_z);
fl_borr_yminbd = -(fl_ar_z_min*fl_w)/fl_r_borr;

fl_ar_z_max = max(ar_z);
fl_borr_ymaxbd = -(fl_ar_z_max*fl_w)/fl_r_borr;

%% Savings Only
if (fl_b_bd >= 0)
    % interpret this as minimum savings level if 0 is not allowed
    fl_a_min = fl_a_min;
end

%% Borrowing
if (fl_b_bd < 0)
    
    %% Borrowing not allowing for default
    if (~bl_default)
        fl_a_min = max(fl_b_bd, fl_borr_yminbd);
    end
    
    %% Borrowing allowing for default
    if (bl_default)
        fl_a_min = max(fl_b_bd, fl_borr_ymaxbd);
    end    
    
end

%% Grid
ar_a = linspace(fl_a_min, fl_a_max, it_a_n);

%% Add Zero
ar_a = [0 ar_a];
ar_a = sort(unique(ar_a));

end

##### SOURCE END #####
--></body></html>