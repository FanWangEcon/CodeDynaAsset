
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Test Borrowing No Default (Save + Borr Distribution), Grid Test</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-08-05"><meta name="DC.source" content="fsi_abz_ds_vecsv_nbc_grid.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Test Borrowing <b>No Default</b> (Save + Borr Distribution), Grid Test</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><p>@seealso</p><div><ul><li>test speed: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_speed/html/fsi_abz_ds_vecsv_speed.html">fsi_abz_ds_vecsv_speed</a></li><li>test joint <b>RANDOM</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_joint/html/fsi_abz_ds_vecsv_joint_rand.html">fsi_abz_ds_vecsv_joint_rand</a></li></ul></div><div><ul><li>test price no default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_price/html/fsi_abz_ds_vecsv_price_nbc_cross.html">fsi_abz_ds_vecsv_price_nbc_cross</a></li><li>test price default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_price/html/fsi_abz_ds_vecsv_price_default_cross.html">fsi_abz_ds_vecsv_price_default_cross</a></li></ul></div><div><ul><li>test interest rate no default: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_nbc.html">fsi_abz_ds_vecsv_nbc</a></li><li>test interest rate no default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_nbc_cross.html">fsi_abz_ds_vecsv_nbc_cross</a></li><li>test interest rate no default <b>GRID</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_nbc_grid.html">fsi_abz_ds_vecsv_nbc_grid</a></li><li>test interest rate default: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default.html">fsi_abz_ds_vecsv_default</a></li><li>test interest rate default <b>V(a,z)</b> Comparison: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default_compaz.html">fsi_abz_ds_vecsv_default_compaz</a></li><li>test interest rate default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default_cross.html">fsi_abz_ds_vecsv_default_cross</a></li><li>test interest rate default <b>GRID</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default_grid.html">fsi_abz_ds_vecsv_default_grid</a></li></ul></div><div><ul><li>test shock default (very low cmin): <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_default_lowcmin.html">fsi_abz_ds_vecsv_shk_default_lowcmin</a></li><li>test shock no default: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_nbc.html">fsi_abz_ds_vecsv_shk_nbc</a></li><li>test shock no default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_nbc_cross.html">fsi_abz_ds_vecsv_shk_nbc_cross</a></li><li>test shock default: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_default.html">fsi_abz_ds_vecsv_shk_default</a></li><li>test shock default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_default_cross.html">fsi_abz_ds_vecsv_shk_default_cross</a></li></ul></div><div><ul><li>test preference no default: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_nbc.html">fsi_abz_ds_vecsv_pref_nbc</a></li><li>test preference no default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_nbc_cross.html">fsi_abz_ds_vecsv_pref_nbc_cross</a></li><li>test preference default: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_default.html">fsi_abz_ds_vecsv_pref_default</a></li><li>test preference default <b>CROSS</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_default_cross.html">fsi_abz_ds_vecsv_pref_default_cross</a></li><li>test preference default (very low cmin): <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_default_lowcmin.html">fsi_abz_ds_vecsv_pref_default_lowcmin</a></li></ul></div><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Set Shared Parameters</a></li><li><a href="#2">Simulate and Graph</a></li><li><a href="#3">No Savings, Vary Borrowing Interest Rate, Single Borrowing Rate (GRID) (Vary fl_r_borr, fl_beta)</a></li><li><a href="#4">Single Saving Interest Rate, Single Borrowing Interest Rate (GRID) (Vary fl_r_borr, fl_beta)</a></li><li><a href="#5">Single Saving Interest Rate, Single Borrowing Interest Rate (GRID) (Vary fl_r_borr, fl_r_save)</a></li><li><a href="#6">Multiple Borrowing Interest Rates (GRID) (Vary fl_r_borr, fl_r_save)</a></li></ul></div><h2 id="1">Set Shared Parameters</h2><pre class="codeinput">close <span class="string">all</span>;
clear <span class="string">all</span>;

<span class="comment">% Borrowing/Savings Parameters</span>
bl_default = false;
</pre><h2 id="2">Simulate and Graph</h2><p>Note: as for example <i>fl_beta</i> increases, willingness to save increases, leading to higher savings, which will exceed the benchmark max grid point. So to allow for higher beta, dramatically higher max savings bound is needed.</p><pre class="codeinput"><span class="comment">% Generate Benchmark Parameters</span>
it_param_set = 9;
[param_map, support_map] = ffs_abz_set_default_param(it_param_set);

<span class="comment">% Borrowing Parameters</span>
param_map(<span class="string">'bl_default'</span>) = bl_default;

<span class="comment">% Support Parameters</span>
support_map(<span class="string">'bl_replacefile'</span>) = false;
support_map(<span class="string">'bl_graph_onebyones'</span>) = true;
support_map(<span class="string">'bl_display_graph_stats'</span>) = false;
support_map(<span class="string">'st_mat_test_prefix'</span>) = [<span class="string">'nbc_'</span>];
</pre><h2 id="3">No Savings, Vary Borrowing Interest Rate, Single Borrowing Rate (GRID) (Vary fl_r_borr, fl_beta)</h2><p>The aggregate income level is fixed, since borrowing does not impact the income process. If aggregate borrowing level is increasing, aggregate consumption will fall. A part of the the exogenous income will go to paying for interest rate. Crucially, a fall in aggregate consumption in a partial equilibrium borrowing context does not mean households are suffering welfare loss. In fact they are choosing to borrow because they are willing to give up future consumption to a degree determined by their preference parameters.</p><p>The lower the beta, the more they are willing to borrow. The lower the borrowing interest rate, the more they are willing to borrow as well.</p><p>Conditional on (a,z), if the borrowing interest rate is lower, V(a,z;low borrow r) &gt; V(a,z;higher borrow r). But as borrowing interest rate goes down, and more households borrow, if we just integrate over V given the new distribution of E(f(a,z;r_{lower})*V(a,z;r_{lower})), the aggregate V level will be lower or higher depending on how pmf f(a,z) changes. V at lower (a) are lower in value, those are more likely to be reached when r borrow falls, hence, changes in f(a,z;r_{lower}) contributes to lower aggregate V. But the fact that V(a,z) is higher for all a,z given lower borrowing rate means V(a,z;r_{lower}) contributes to higher aggregate V. Overall EV could be higher or lower depending on crucially discount parameter. EV is a useful statistics to compute, but welfare comparison should be be made by comparing EV. Households do not care about aggregating over V across states, their optimal decision is made conditional on current (a,z) looking forward, given their discount of future.</p><p>When households' beta is close to 1, there is very litle incentive to borrow, especially if the borrowing interest rate is high. There, the consumption pattern converges back to consumption under autarchy. These are shown in graphs below. Households with smaller beta are willing to borrow, which reduces aggregate consumption, and also reduces consumption variance. Consumption variance is lower than the borrowing interest rate is lower generally. Households' desire to reduce consumption variance is the highest for those with high beta but also facing low borrowing interest rate.</p><pre class="codeinput">support_map(<span class="string">'st_mat_test_prefix'</span>) = [<span class="string">'amax0_'</span>];

cl_st_param_keys = {<span class="string">'fl_r_borr'</span>, <span class="string">'fl_beta'</span>};

param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
it_simu_vec_len = 10;
param_tstar_map(<span class="string">'fl_r_borr'</span>) = linspace(0.01, 0.10, it_simu_vec_len);
param_tstar_map(<span class="string">'fl_beta'</span>) = linspace(0.90, 0.999, it_simu_vec_len);

<span class="comment">% Can not Save</span>
fl_a_max_ori = param_map(<span class="string">'fl_a_max'</span>);
param_map(<span class="string">'fl_a_max'</span>) = 0;

<span class="comment">% Initialize to be replaced by param_tstar_map inside function</span>
param_map(<span class="string">'fl_r_borr'</span>) = 0;
param_map(<span class="string">'fl_b_bd'</span>) = -100;

<span class="comment">% Simu Size and Graph Type</span>
it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = <span class="string">'g'</span>;

<span class="comment">% Simulate along parameters</span>
ff_az_test_analyze( <span class="keyword">...</span>
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, <span class="keyword">...</span>
    param_map, support_map, param_tstar_map);

close <span class="string">all</span>;
</pre><pre class="codeoutput">----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 48
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 31 ; key = st_img_name_main ; val = _default
pos = 32 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/img/
pos = 33 ; key = st_img_prefix ; val = 
pos = 34 ; key = st_img_suffix ; val = _p9.png
pos = 35 ; key = st_mat_name_main ; val = _default
pos = 36 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/mat/
pos = 37 ; key = st_mat_prefix ; val = 
pos = 38 ; key = st_mat_suffix ; val = _p9
pos = 39 ; key = st_mat_test_name_main ; val = r
pos = 40 ; key = st_mat_test_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//test/ff_az_ds_vecsv/mat/
pos = 41 ; key = st_mat_test_prefix ; val = amax0_
pos = 42 ; key = st_mat_test_suffix ; val = _g192_cg_t2l20
pos = 43 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_abz/
pos = 44 ; key = st_profile_name_main ; val = _default
pos = 45 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/profile/
pos = 46 ; key = st_profile_prefix ; val = 
pos = 47 ; key = st_profile_suffix ; val = _p9
pos = 48 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx    value
                                    __    ___    _____

    bl_display                       1     1        0 
    bl_display_defparam              2     2        0 
    bl_display_dist                  3     3        0 
    bl_display_final                 4     4        0 
    bl_display_final_dist            5     5        1 
    bl_display_final_dist_detail     6     6        0 
    bl_display_funcgrids             7     7        0 
    bl_display_graph_stats           8     8        0 
    bl_display_simu_stats            9     9        1 
    bl_graph                        10    10        1 
    bl_graph_coh_t_coh              11    11        0 
    bl_graph_funcgrids              12    12        0 
    bl_graph_onebyones              13    13        1 
    bl_graph_pol_lvl                14    14        0 
    bl_graph_pol_pct                15    15        0 
    bl_graph_val                    16    16        0 
    bl_img_save                     17    17        0 
    bl_mat                          18    18        0 
    bl_mat_test                     19    19        1 
    bl_post                         20    20        1 
    bl_profile                      21    21        0 
    bl_profile_dist                 22    22        0 
    bl_replacefile                  23    23        0 
    bl_time                         24    24        1 
    bl_timer                        25    25        1 
    it_display_every                26    26       20 
    it_display_final_colmax         27    27       15 
    it_display_final_rowmax         28    28      100 
    it_display_summmat_colmax       29    29        5 
    it_display_summmat_rowmax       30    30        5 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 44
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 5 ; key = cl_st_param_keys ; val = fl_r_borr
pos = 41 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 42 ; key = st_model ; val = abz
pos = 43 ; key = st_z_r_borr_drv_ele_type ; val = unif
pos = 44 ; key = st_z_r_borr_drv_prb_type ; val = poiss
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    rowN    colN    mean     std      min    max
                         _    ___    ____    ____    ____    ______    ___    ___

    ar_param_keys_idx    1     1      1       2      10.5    12.021     2     19 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                               i     idx    value 
                               __    ___    ______

    bl_b_is_principle           1     2          1
    bl_default                  2     3          0
    bl_loglin                   3     4          0
    fl_a_max                    4     6          0
    fl_a_min                    5     7          0
    fl_b_bd                     6     8       -100
    fl_beta                     7     9       0.94
    fl_c_min                    8    10       0.01
    fl_crra                     9    11        1.5
    fl_default_aprime          10    12          0
    fl_loglin_threshold        11    13          1
    fl_nan_replace             12    14     -99999
    fl_r_borr                  13    15          0
    fl_r_save                  14    16      0.025
    fl_tol_dist                15    17      1e-05
    fl_tol_pol                 16    18      1e-05
    fl_tol_val                 17    19      1e-05
    fl_w                       18    20       1.28
    fl_z_mu                    19    21          0
    fl_z_r_borr_max            20    22      0.095
    fl_z_r_borr_min            21    23      0.025
    fl_z_r_borr_n              22    24          5
    fl_z_r_borr_poiss_mean     23    25         10
    fl_z_rho                   24    26        0.8
    fl_z_sig                   25    27        0.2
    fl_z_wage_mu               26    28          0
    fl_z_wage_rho              27    29        0.8
    fl_z_wage_sig              28    30        0.2
    it_a_n                     29    31        750
    it_maxiter_dist            30    32       1000
    it_maxiter_val             31    33       1000
    it_size_type               32    34          2
    it_st_simu_type_g_seed     33    35        123
    it_st_simu_type_g_simun    34    36         20
    it_tol_pol_nochange        35    37         25
    it_trans_power_dist        36    38       1000
    it_z_n                     37    39         55
    it_z_wage_n                38    40         11

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_TSTAR_MAP
----------------------------------------
  Map with properties:

        Count: 19
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i     idx    rowN    colN     mean       std        min      max 
                              __    ___    ____    ____    ______    ________    _____    _____

    fl_a_max                   1     1      1        5         65      11.859       50       80
    fl_alpha                   2     2      1        5        0.4    0.079057      0.3      0.5
    fl_b_bd                    3     3      1        5      -12.5      5.9293      -20       -5
    fl_beta                    4     4      1       10     0.9495    0.033304      0.9    0.999
    fl_c_min                   5     5      1        5     0.0155    0.011463    0.001     0.03
    fl_crra                    6     6      1       15          3      1.2778        1        5
    fl_delta                   7     7      1        5       0.08    0.047434     0.02     0.14
    fl_r_borr                  8     8      1       10      0.055    0.030277     0.01      0.1
    fl_r_save                  9     9      1        5      0.025    0.011859     0.01     0.04
    fl_w                      10    10      1        5       1.25     0.11859      1.1      1.4
    fl_z_r_borr_max           11    11      1        5     0.1225    0.021741    0.095     0.15
    fl_z_r_borr_n             12    12      1        6         15      7.4833        5       25
    fl_z_r_borr_poiss_mean    13    13      1        5       12.5      5.9293        5       20
    fl_z_rho                  14    14      1        5      0.495     0.39133        0     0.99
    fl_z_sig                  15    15      1        5      0.255     0.19369     0.01      0.5
    fl_z_wage_rho             16    16      1        5      0.495     0.39133        0     0.99
    fl_z_wage_sig             17    17      1        5      0.255     0.19369     0.01      0.5
    it_a_n                    18    18      1        5       1300      948.68      100     2500
    it_z_n                    19    19      1        5         15      7.9057        5       25

</pre><img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_01.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_02.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_03.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_04.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_05.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_06.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_07.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_08.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_09.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_10.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_11.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_12.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_13.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_14.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_15.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_16.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_17.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_18.png" alt=""> <h2 id="4">Single Saving Interest Rate, Single Borrowing Interest Rate (GRID) (Vary fl_r_borr, fl_beta)</h2><p>Similar to above, except we allow for savings. Still vary borrowing interest rate and discount. Do not vary savings interest rate. Use default savings rate</p><pre class="codeinput">support_map(<span class="string">'st_mat_test_prefix'</span>) = [<span class="string">'amax50_'</span>];

param_map(<span class="string">'fl_a_max'</span>) = fl_a_max_ori;

cl_st_param_keys = {<span class="string">'fl_r_borr'</span>, <span class="string">'fl_beta'</span>};
param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
it_simu_vec_len = 10;
param_tstar_map(<span class="string">'fl_r_borr'</span>) = linspace(0.01, 0.10, it_simu_vec_len);
param_tstar_map(<span class="string">'fl_beta'</span>) = linspace(0.87, 0.97, it_simu_vec_len);

<span class="comment">% Simu Size and Graph Type</span>
it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = <span class="string">'g'</span>;

<span class="comment">% Simulate along parameters</span>
ff_az_test_analyze( <span class="keyword">...</span>
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, <span class="keyword">...</span>
    param_map, support_map, param_tstar_map);

close <span class="string">all</span>;
</pre><pre class="codeoutput">----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 48
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 31 ; key = st_img_name_main ; val = _default
pos = 32 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/img/
pos = 33 ; key = st_img_prefix ; val = 
pos = 34 ; key = st_img_suffix ; val = _p9.png
pos = 35 ; key = st_mat_name_main ; val = _default
pos = 36 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/mat/
pos = 37 ; key = st_mat_prefix ; val = 
pos = 38 ; key = st_mat_suffix ; val = _p9
pos = 39 ; key = st_mat_test_name_main ; val = r
pos = 40 ; key = st_mat_test_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//test/ff_az_ds_vecsv/mat/
pos = 41 ; key = st_mat_test_prefix ; val = amax50_
pos = 42 ; key = st_mat_test_suffix ; val = _g192_cg_t2l20
pos = 43 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_abz/
pos = 44 ; key = st_profile_name_main ; val = _default
pos = 45 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/profile/
pos = 46 ; key = st_profile_prefix ; val = 
pos = 47 ; key = st_profile_suffix ; val = _p9
pos = 48 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx    value
                                    __    ___    _____

    bl_display                       1     1        0 
    bl_display_defparam              2     2        0 
    bl_display_dist                  3     3        0 
    bl_display_final                 4     4        0 
    bl_display_final_dist            5     5        1 
    bl_display_final_dist_detail     6     6        0 
    bl_display_funcgrids             7     7        0 
    bl_display_graph_stats           8     8        0 
    bl_display_simu_stats            9     9        1 
    bl_graph                        10    10        1 
    bl_graph_coh_t_coh              11    11        0 
    bl_graph_funcgrids              12    12        0 
    bl_graph_onebyones              13    13        1 
    bl_graph_pol_lvl                14    14        0 
    bl_graph_pol_pct                15    15        0 
    bl_graph_val                    16    16        0 
    bl_img_save                     17    17        0 
    bl_mat                          18    18        0 
    bl_mat_test                     19    19        1 
    bl_post                         20    20        1 
    bl_profile                      21    21        0 
    bl_profile_dist                 22    22        0 
    bl_replacefile                  23    23        0 
    bl_time                         24    24        1 
    bl_timer                        25    25        1 
    it_display_every                26    26       20 
    it_display_final_colmax         27    27       15 
    it_display_final_rowmax         28    28      100 
    it_display_summmat_colmax       29    29        5 
    it_display_summmat_rowmax       30    30        5 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 44
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 5 ; key = cl_st_param_keys ; val = fl_r_borr
pos = 41 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 42 ; key = st_model ; val = abz
pos = 43 ; key = st_z_r_borr_drv_ele_type ; val = unif
pos = 44 ; key = st_z_r_borr_drv_prb_type ; val = poiss
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    rowN    colN    mean     std      min    max
                         _    ___    ____    ____    ____    ______    ___    ___

    ar_param_keys_idx    1     1      1       2      10.5    12.021     2     19 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                               i     idx    value 
                               __    ___    ______

    bl_b_is_principle           1     2          1
    bl_default                  2     3          0
    bl_loglin                   3     4          0
    fl_a_max                    4     6         50
    fl_a_min                    5     7          0
    fl_b_bd                     6     8       -100
    fl_beta                     7     9       0.94
    fl_c_min                    8    10       0.01
    fl_crra                     9    11        1.5
    fl_default_aprime          10    12          0
    fl_loglin_threshold        11    13          1
    fl_nan_replace             12    14     -99999
    fl_r_borr                  13    15          0
    fl_r_save                  14    16      0.025
    fl_tol_dist                15    17      1e-05
    fl_tol_pol                 16    18      1e-05
    fl_tol_val                 17    19      1e-05
    fl_w                       18    20       1.28
    fl_z_mu                    19    21          0
    fl_z_r_borr_max            20    22      0.095
    fl_z_r_borr_min            21    23      0.025
    fl_z_r_borr_n              22    24          5
    fl_z_r_borr_poiss_mean     23    25         10
    fl_z_rho                   24    26        0.8
    fl_z_sig                   25    27        0.2
    fl_z_wage_mu               26    28          0
    fl_z_wage_rho              27    29        0.8
    fl_z_wage_sig              28    30        0.2
    it_a_n                     29    31        750
    it_maxiter_dist            30    32       1000
    it_maxiter_val             31    33       1000
    it_size_type               32    34          2
    it_st_simu_type_g_seed     33    35        123
    it_st_simu_type_g_simun    34    36         20
    it_tol_pol_nochange        35    37         25
    it_trans_power_dist        36    38       1000
    it_z_n                     37    39         55
    it_z_wage_n                38    40         11

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_TSTAR_MAP
----------------------------------------
  Map with properties:

        Count: 19
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i     idx    rowN    colN     mean       std        min     max 
                              __    ___    ____    ____    ______    ________    _____    ____

    fl_a_max                   1     1      1        5         65      11.859       50      80
    fl_alpha                   2     2      1        5        0.4    0.079057      0.3     0.5
    fl_b_bd                    3     3      1        5      -12.5      5.9293      -20      -5
    fl_beta                    4     4      1       10       0.92    0.033641     0.87    0.97
    fl_c_min                   5     5      1        5     0.0155    0.011463    0.001    0.03
    fl_crra                    6     6      1       15          3      1.2778        1       5
    fl_delta                   7     7      1        5       0.08    0.047434     0.02    0.14
    fl_r_borr                  8     8      1       10      0.055    0.030277     0.01     0.1
    fl_r_save                  9     9      1        5      0.025    0.011859     0.01    0.04
    fl_w                      10    10      1        5       1.25     0.11859      1.1     1.4
    fl_z_r_borr_max           11    11      1        5     0.1225    0.021741    0.095    0.15
    fl_z_r_borr_n             12    12      1        6         15      7.4833        5      25
    fl_z_r_borr_poiss_mean    13    13      1        5       12.5      5.9293        5      20
    fl_z_rho                  14    14      1        5      0.495     0.39133        0    0.99
    fl_z_sig                  15    15      1        5      0.255     0.19369     0.01     0.5
    fl_z_wage_rho             16    16      1        5      0.495     0.39133        0    0.99
    fl_z_wage_sig             17    17      1        5      0.255     0.19369     0.01     0.5
    it_a_n                    18    18      1        5       1300      948.68      100    2500
    it_z_n                    19    19      1        5         15      7.9057        5      25

</pre><img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_19.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_20.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_21.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_22.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_23.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_24.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_25.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_26.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_27.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_28.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_29.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_30.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_31.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_32.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_33.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_34.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_35.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_36.png" alt=""> <h2 id="5">Single Saving Interest Rate, Single Borrowing Interest Rate (GRID) (Vary fl_r_borr, fl_r_save)</h2><p>Similar to above, except we allow for savings. Still vary borrowing interest rate and discount. Do not vary savings interest rate. Use default savings rate</p><pre class="codeinput">param_map(<span class="string">'fl_a_max'</span>) = fl_a_max_ori;

cl_st_param_keys = {<span class="string">'fl_r_borr'</span>, <span class="string">'fl_r_save'</span>};
param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
it_simu_vec_len = 10;
param_tstar_map(<span class="string">'fl_r_borr'</span>) = linspace(0.01, 0.10, it_simu_vec_len);
param_tstar_map(<span class="string">'fl_r_save'</span>) = linspace(0.00, 0.06, it_simu_vec_len);

<span class="comment">% Simu Size and Graph Type</span>
it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = <span class="string">'g'</span>;

<span class="comment">% Simulate along parameters</span>
ff_az_test_analyze( <span class="keyword">...</span>
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, <span class="keyword">...</span>
    param_map, support_map, param_tstar_map);

close <span class="string">all</span>;
</pre><pre class="codeoutput">----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 48
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 31 ; key = st_img_name_main ; val = _default
pos = 32 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/img/
pos = 33 ; key = st_img_prefix ; val = 
pos = 34 ; key = st_img_suffix ; val = _p9.png
pos = 35 ; key = st_mat_name_main ; val = _default
pos = 36 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/mat/
pos = 37 ; key = st_mat_prefix ; val = 
pos = 38 ; key = st_mat_suffix ; val = _p9
pos = 39 ; key = st_mat_test_name_main ; val = r
pos = 40 ; key = st_mat_test_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//test/ff_az_ds_vecsv/mat/
pos = 41 ; key = st_mat_test_prefix ; val = amax50_
pos = 42 ; key = st_mat_test_suffix ; val = _g194_cg_t2l20
pos = 43 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_abz/
pos = 44 ; key = st_profile_name_main ; val = _default
pos = 45 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/profile/
pos = 46 ; key = st_profile_prefix ; val = 
pos = 47 ; key = st_profile_suffix ; val = _p9
pos = 48 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx    value
                                    __    ___    _____

    bl_display                       1     1        0 
    bl_display_defparam              2     2        0 
    bl_display_dist                  3     3        0 
    bl_display_final                 4     4        0 
    bl_display_final_dist            5     5        1 
    bl_display_final_dist_detail     6     6        0 
    bl_display_funcgrids             7     7        0 
    bl_display_graph_stats           8     8        0 
    bl_display_simu_stats            9     9        1 
    bl_graph                        10    10        1 
    bl_graph_coh_t_coh              11    11        0 
    bl_graph_funcgrids              12    12        0 
    bl_graph_onebyones              13    13        1 
    bl_graph_pol_lvl                14    14        0 
    bl_graph_pol_pct                15    15        0 
    bl_graph_val                    16    16        0 
    bl_img_save                     17    17        0 
    bl_mat                          18    18        0 
    bl_mat_test                     19    19        1 
    bl_post                         20    20        1 
    bl_profile                      21    21        0 
    bl_profile_dist                 22    22        0 
    bl_replacefile                  23    23        0 
    bl_time                         24    24        1 
    bl_timer                        25    25        1 
    it_display_every                26    26       20 
    it_display_final_colmax         27    27       15 
    it_display_final_rowmax         28    28      100 
    it_display_summmat_colmax       29    29        5 
    it_display_summmat_rowmax       30    30        5 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 44
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 5 ; key = cl_st_param_keys ; val = fl_r_borr
pos = 41 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 42 ; key = st_model ; val = abz
pos = 43 ; key = st_z_r_borr_drv_ele_type ; val = unif
pos = 44 ; key = st_z_r_borr_drv_prb_type ; val = poiss
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    rowN    colN    mean     std      min    max
                         _    ___    ____    ____    ____    ______    ___    ___

    ar_param_keys_idx    1     1      1       2      11.5    10.607     4     19 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                               i     idx    value 
                               __    ___    ______

    bl_b_is_principle           1     2          1
    bl_default                  2     3          0
    bl_loglin                   3     4          0
    fl_a_max                    4     6         50
    fl_a_min                    5     7          0
    fl_b_bd                     6     8       -100
    fl_beta                     7     9       0.94
    fl_c_min                    8    10       0.01
    fl_crra                     9    11        1.5
    fl_default_aprime          10    12          0
    fl_loglin_threshold        11    13          1
    fl_nan_replace             12    14     -99999
    fl_r_borr                  13    15          0
    fl_r_save                  14    16      0.025
    fl_tol_dist                15    17      1e-05
    fl_tol_pol                 16    18      1e-05
    fl_tol_val                 17    19      1e-05
    fl_w                       18    20       1.28
    fl_z_mu                    19    21          0
    fl_z_r_borr_max            20    22      0.095
    fl_z_r_borr_min            21    23      0.025
    fl_z_r_borr_n              22    24          5
    fl_z_r_borr_poiss_mean     23    25         10
    fl_z_rho                   24    26        0.8
    fl_z_sig                   25    27        0.2
    fl_z_wage_mu               26    28          0
    fl_z_wage_rho              27    29        0.8
    fl_z_wage_sig              28    30        0.2
    it_a_n                     29    31        750
    it_maxiter_dist            30    32       1000
    it_maxiter_val             31    33       1000
    it_size_type               32    34          2
    it_st_simu_type_g_seed     33    35        123
    it_st_simu_type_g_simun    34    36         20
    it_tol_pol_nochange        35    37         25
    it_trans_power_dist        36    38       1000
    it_z_n                     37    39         55
    it_z_wage_n                38    40         11

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_TSTAR_MAP
----------------------------------------
  Map with properties:

        Count: 19
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i     idx    rowN    colN     mean       std        min     max 
                              __    ___    ____    ____    ______    ________    _____    ____

    fl_a_max                   1     1      1        5         65      11.859       50      80
    fl_alpha                   2     2      1        5        0.4    0.079057      0.3     0.5
    fl_b_bd                    3     3      1        5      -12.5      5.9293      -20      -5
    fl_beta                    4     4      1       15       0.92    0.031944     0.87    0.97
    fl_c_min                   5     5      1        5     0.0155    0.011463    0.001    0.03
    fl_crra                    6     6      1       15          3      1.2778        1       5
    fl_delta                   7     7      1        5       0.08    0.047434     0.02    0.14
    fl_r_borr                  8     8      1       10      0.055    0.030277     0.01     0.1
    fl_r_save                  9     9      1       10       0.03    0.020184        0    0.06
    fl_w                      10    10      1        5       1.25     0.11859      1.1     1.4
    fl_z_r_borr_max           11    11      1        5     0.1225    0.021741    0.095    0.15
    fl_z_r_borr_n             12    12      1        6         15      7.4833        5      25
    fl_z_r_borr_poiss_mean    13    13      1        5       12.5      5.9293        5      20
    fl_z_rho                  14    14      1        5      0.495     0.39133        0    0.99
    fl_z_sig                  15    15      1        5      0.255     0.19369     0.01     0.5
    fl_z_wage_rho             16    16      1        5      0.495     0.39133        0    0.99
    fl_z_wage_sig             17    17      1        5      0.255     0.19369     0.01     0.5
    it_a_n                    18    18      1        5       1300      948.68      100    2500
    it_z_n                    19    19      1        5         15      7.9057        5      25

</pre><img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_37.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_38.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_39.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_40.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_41.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_42.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_43.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_44.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_45.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_46.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_47.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_48.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_49.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_50.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_51.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_52.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_53.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_54.png" alt=""> <h2 id="6">Multiple Borrowing Interest Rates (GRID) (Vary fl_r_borr, fl_r_save)</h2><p>Borrow Interest Rate Draws and Very Savings Interest Rate</p><pre class="codeinput"><span class="comment">% Generate Benchmark Parameters</span>
it_param_set = 9;
[param_map, support_map] = ffs_abz_set_default_param(it_param_set);

<span class="comment">% Borrowing Parameters</span>
param_map(<span class="string">'bl_default'</span>) = bl_default;

<span class="comment">% Support Parameters</span>
support_map(<span class="string">'bl_replacefile'</span>) = false;
support_map(<span class="string">'bl_graph_onebyones'</span>) = true;
support_map(<span class="string">'bl_display_graph_stats'</span>) = false;
support_map(<span class="string">'st_mat_test_prefix'</span>) = [<span class="string">'nbc_'</span>];

it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = <span class="string">'g'</span>;

cl_st_param_keys = {<span class="string">'fl_z_r_borr_poiss_mean'</span>, <span class="string">'fl_r_save'</span>};
it_simu_vec_len = 10;
param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
param_tstar_map(<span class="string">'fl_z_r_borr_poiss_mean'</span>) = linspace(2, 10, it_simu_vec_len);
param_tstar_map(<span class="string">'fl_r_save'</span>) = linspace(0, 0.06, it_simu_vec_len);

<span class="comment">% Simulate along parameters</span>
ff_az_test_analyze( <span class="keyword">...</span>
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, <span class="keyword">...</span>
    param_map, support_map, param_tstar_map);

close <span class="string">all</span>;
</pre><pre class="codeoutput">----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 48
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 31 ; key = st_img_name_main ; val = _default
pos = 32 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/img/
pos = 33 ; key = st_img_prefix ; val = 
pos = 34 ; key = st_img_suffix ; val = _p9.png
pos = 35 ; key = st_mat_name_main ; val = _default
pos = 36 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/mat/
pos = 37 ; key = st_mat_prefix ; val = 
pos = 38 ; key = st_mat_suffix ; val = _p9
pos = 39 ; key = st_mat_test_name_main ; val = r
pos = 40 ; key = st_mat_test_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//test/ff_az_ds_vecsv/mat/
pos = 41 ; key = st_mat_test_prefix ; val = nbc_
pos = 42 ; key = st_mat_test_suffix ; val = _g104_cg_t2l20
pos = 43 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_abz/
pos = 44 ; key = st_profile_name_main ; val = _default
pos = 45 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/profile/
pos = 46 ; key = st_profile_prefix ; val = 
pos = 47 ; key = st_profile_suffix ; val = _p9
pos = 48 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx    value
                                    __    ___    _____

    bl_display                       1     1        0 
    bl_display_defparam              2     2        0 
    bl_display_dist                  3     3        0 
    bl_display_final                 4     4        0 
    bl_display_final_dist            5     5        1 
    bl_display_final_dist_detail     6     6        0 
    bl_display_funcgrids             7     7        0 
    bl_display_graph_stats           8     8        0 
    bl_display_simu_stats            9     9        1 
    bl_graph                        10    10        1 
    bl_graph_coh_t_coh              11    11        0 
    bl_graph_funcgrids              12    12        0 
    bl_graph_onebyones              13    13        1 
    bl_graph_pol_lvl                14    14        0 
    bl_graph_pol_pct                15    15        0 
    bl_graph_val                    16    16        0 
    bl_img_save                     17    17        0 
    bl_mat                          18    18        0 
    bl_mat_test                     19    19        1 
    bl_post                         20    20        1 
    bl_profile                      21    21        0 
    bl_profile_dist                 22    22        0 
    bl_replacefile                  23    23        0 
    bl_time                         24    24        1 
    bl_timer                        25    25        1 
    it_display_every                26    26       20 
    it_display_final_colmax         27    27       15 
    it_display_final_rowmax         28    28      100 
    it_display_summmat_colmax       29    29        5 
    it_display_summmat_rowmax       30    30        5 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 43
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 5 ; key = cl_st_param_keys ; val = fl_z_r_borr_poiss_mean
pos = 40 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 41 ; key = st_model ; val = abz
pos = 42 ; key = st_z_r_borr_drv_ele_type ; val = unif
pos = 43 ; key = st_z_r_borr_drv_prb_type ; val = poiss
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                         i    idx    rowN    colN    mean     std      min    max
                         _    ___    ____    ____    ____    ______    ___    ___

    ar_param_keys_idx    1     1      1       2       7      4.2426     4     10 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                               i     idx    value 
                               __    ___    ______

    bl_b_is_principle           1     2          1
    bl_default                  2     3          0
    bl_loglin                   3     4          0
    fl_a_max                    4     6         50
    fl_a_min                    5     7          0
    fl_b_bd                     6     8        -20
    fl_beta                     7     9       0.94
    fl_c_min                    8    10       0.01
    fl_crra                     9    11        1.5
    fl_default_aprime          10    12          0
    fl_loglin_threshold        11    13          1
    fl_nan_replace             12    14     -99999
    fl_r_save                  13    15      0.025
    fl_tol_dist                14    16      1e-05
    fl_tol_pol                 15    17      1e-05
    fl_tol_val                 16    18      1e-05
    fl_w                       17    19       1.28
    fl_z_mu                    18    20          0
    fl_z_r_borr_max            19    21      0.095
    fl_z_r_borr_min            20    22      0.025
    fl_z_r_borr_n              21    23          5
    fl_z_r_borr_poiss_mean     22    24         10
    fl_z_rho                   23    25        0.8
    fl_z_sig                   24    26        0.2
    fl_z_wage_mu               25    27          0
    fl_z_wage_rho              26    28        0.8
    fl_z_wage_sig              27    29        0.2
    it_a_n                     28    30        750
    it_maxiter_dist            29    31       1000
    it_maxiter_val             30    32       1000
    it_size_type               31    33          2
    it_st_simu_type_g_seed     32    34        123
    it_st_simu_type_g_simun    33    35         20
    it_tol_pol_nochange        34    36         25
    it_trans_power_dist        35    37       1000
    it_z_n                     36    38         55
    it_z_wage_n                37    39         11

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_TSTAR_MAP
----------------------------------------
  Map with properties:

        Count: 19
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i     idx    rowN    colN     mean       std        min     max 
                              __    ___    ____    ____    ______    ________    _____    ____

    fl_a_max                   1     1      1        5         65      11.859       50      80
    fl_alpha                   2     2      1        5        0.4    0.079057      0.3     0.5
    fl_b_bd                    3     3      1        5      -12.5      5.9293      -20      -5
    fl_beta                    4     4      1       15       0.92    0.031944     0.87    0.97
    fl_c_min                   5     5      1        5     0.0155    0.011463    0.001    0.03
    fl_crra                    6     6      1       15          3      1.2778        1       5
    fl_delta                   7     7      1        5       0.08    0.047434     0.02    0.14
    fl_r_borr                  8     8      1        5      0.125    0.098821        0    0.25
    fl_r_save                  9     9      1       10       0.03    0.020184        0    0.06
    fl_w                      10    10      1        5       1.25     0.11859      1.1     1.4
    fl_z_r_borr_max           11    11      1        5     0.1225    0.021741    0.095    0.15
    fl_z_r_borr_n             12    12      1        6         15      7.4833        5      25
    fl_z_r_borr_poiss_mean    13    13      1       10          6      2.6912        2      10
    fl_z_rho                  14    14      1        5      0.495     0.39133        0    0.99
    fl_z_sig                  15    15      1        5      0.255     0.19369     0.01     0.5
    fl_z_wage_rho             16    16      1        5      0.495     0.39133        0    0.99
    fl_z_wage_sig             17    17      1        5      0.255     0.19369     0.01     0.5
    it_a_n                    18    18      1        5       1300      948.68      100    2500
    it_z_n                    19    19      1        5         15      7.9057        5      25

</pre><img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_55.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_56.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_57.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_58.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_59.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_60.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_61.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_62.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_63.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_64.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_65.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_66.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_67.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_68.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_69.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_70.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_71.png" alt=""> <img vspace="5" hspace="5" src="fsi_abz_ds_vecsv_nbc_grid_72.png" alt=""> <p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Test Borrowing *No Default* (Save + Borr Distribution), Grid Test
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*
%
% @seealso
%
% * test speed: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_speed/html/fsi_abz_ds_vecsv_speed.html fsi_abz_ds_vecsv_speed>
% * test joint *RANDOM*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_joint/html/fsi_abz_ds_vecsv_joint_rand.html fsi_abz_ds_vecsv_joint_rand>
%
% * test price no default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_price/html/fsi_abz_ds_vecsv_price_nbc_cross.html fsi_abz_ds_vecsv_price_nbc_cross>
% * test price default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_price/html/fsi_abz_ds_vecsv_price_default_cross.html fsi_abz_ds_vecsv_price_default_cross>
%
% * test interest rate no default: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_nbc.html fsi_abz_ds_vecsv_nbc>
% * test interest rate no default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_nbc_cross.html fsi_abz_ds_vecsv_nbc_cross>
% * test interest rate no default *GRID*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_nbc_grid.html fsi_abz_ds_vecsv_nbc_grid>
% * test interest rate default: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default.html fsi_abz_ds_vecsv_default>
% * test interest rate default *V(a,z)* Comparison: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default_compaz.html fsi_abz_ds_vecsv_default_compaz>
% * test interest rate default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default_cross.html fsi_abz_ds_vecsv_default_cross>
% * test interest rate default *GRID*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_borr/html/fsi_abz_ds_vecsv_default_grid.html fsi_abz_ds_vecsv_default_grid>
%
% * test shock default (very low cmin): <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_default_lowcmin.html fsi_abz_ds_vecsv_shk_default_lowcmin>
% * test shock no default: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_nbc.html fsi_abz_ds_vecsv_shk_nbc>
% * test shock no default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_nbc_cross.html fsi_abz_ds_vecsv_shk_nbc_cross>
% * test shock default: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_default.html fsi_abz_ds_vecsv_shk_default>
% * test shock default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_shock/html/fsi_abz_ds_vecsv_shk_default_cross.html fsi_abz_ds_vecsv_shk_default_cross>
%
% * test preference no default: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_nbc.html fsi_abz_ds_vecsv_pref_nbc>
% * test preference no default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_nbc_cross.html fsi_abz_ds_vecsv_pref_nbc_cross>
% * test preference default: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_default.html fsi_abz_ds_vecsv_pref_default>
% * test preference default *CROSS*: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_default_cross.html fsi_abz_ds_vecsv_pref_default_cross>
% * test preference default (very low cmin): <https://fanwangecon.github.io/CodeDynaAsset/m_abz/test/ff_az_ds_vecsv/test_pref/html/fsi_abz_ds_vecsv_pref_default_lowcmin.html fsi_abz_ds_vecsv_pref_default_lowcmin>
%

%% Set Shared Parameters

close all;
clear all;

% Borrowing/Savings Parameters
bl_default = false;

%% Simulate and Graph
% Note: as for example _fl_beta_ increases, willingness to save increases,
% leading to higher savings, which will exceed the benchmark max grid
% point. So to allow for higher beta, dramatically higher max savings bound
% is needed.

% Generate Benchmark Parameters
it_param_set = 9;
[param_map, support_map] = ffs_abz_set_default_param(it_param_set);

% Borrowing Parameters
param_map('bl_default') = bl_default;

% Support Parameters
support_map('bl_replacefile') = false;
support_map('bl_graph_onebyones') = true;
support_map('bl_display_graph_stats') = false;
support_map('st_mat_test_prefix') = ['nbc_'];

%% No Savings, Vary Borrowing Interest Rate, Single Borrowing Rate (GRID) (Vary fl_r_borr, fl_beta)
% The aggregate income level is fixed, since borrowing does not impact the
% income process. If aggregate borrowing level is increasing, aggregate
% consumption will fall. A part of the the exogenous income will go to
% paying for interest rate. Crucially, a fall in aggregate consumption in a
% partial equilibrium borrowing context does not mean households are
% suffering welfare loss. In fact they are choosing to borrow because they
% are willing to give up future consumption to a degree determined by their
% preference parameters.
%
% The lower the beta, the more they are willing to borrow. The lower the
% borrowing interest rate, the more they are willing to borrow as well.
%
% Conditional on (a,z), if the borrowing interest rate is lower, V(a,z;low
% borrow r) > V(a,z;higher borrow r). But as borrowing interest rate goes
% down, and more households borrow, if we just integrate over V given the
% new distribution of E(f(a,z;r_{lower})*V(a,z;r_{lower})), the aggregate V
% level will be lower or higher depending on how pmf f(a,z) changes. V at
% lower (a) are lower in value, those are more likely to be reached when r
% borrow falls, hence, changes in f(a,z;r_{lower}) contributes to lower
% aggregate V. But the fact that V(a,z) is higher for all a,z given lower
% borrowing rate means V(a,z;r_{lower}) contributes to higher aggregate V.
% Overall EV could be higher or lower depending on crucially discount
% parameter. EV is a useful statistics to compute, but welfare comparison
% should be be made by comparing EV. Households do not care about
% aggregating over V across states, their optimal decision is made
% conditional on current (a,z) looking forward, given their discount of future.
%
% When households' beta is close to 1, there is very litle incentive to
% borrow, especially if the borrowing interest rate is high. There, the
% consumption pattern converges back to consumption under autarchy. These
% are shown in graphs below. Households with smaller beta are willing to
% borrow, which reduces aggregate consumption, and also reduces consumption
% variance. Consumption variance is lower than the borrowing interest rate
% is lower generally. Households' desire to reduce consumption variance is
% the highest for those with high beta but also facing low borrowing
% interest rate.
%

support_map('st_mat_test_prefix') = ['amax0_'];

cl_st_param_keys = {'fl_r_borr', 'fl_beta'};

param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
it_simu_vec_len = 10;
param_tstar_map('fl_r_borr') = linspace(0.01, 0.10, it_simu_vec_len);
param_tstar_map('fl_beta') = linspace(0.90, 0.999, it_simu_vec_len);

% Can not Save
fl_a_max_ori = param_map('fl_a_max');
param_map('fl_a_max') = 0;

% Initialize to be replaced by param_tstar_map inside function
param_map('fl_r_borr') = 0;
param_map('fl_b_bd') = -100;

% Simu Size and Graph Type
it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = 'g';

% Simulate along parameters
ff_az_test_analyze( ...
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, ...
    param_map, support_map, param_tstar_map);

close all;

%% Single Saving Interest Rate, Single Borrowing Interest Rate (GRID) (Vary fl_r_borr, fl_beta)
% Similar to above, except we allow for savings. Still vary borrowing
% interest rate and discount. Do not vary savings interest rate. Use
% default savings rate

support_map('st_mat_test_prefix') = ['amax50_'];

param_map('fl_a_max') = fl_a_max_ori;

cl_st_param_keys = {'fl_r_borr', 'fl_beta'};
param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
it_simu_vec_len = 10;
param_tstar_map('fl_r_borr') = linspace(0.01, 0.10, it_simu_vec_len);
param_tstar_map('fl_beta') = linspace(0.87, 0.97, it_simu_vec_len);

% Simu Size and Graph Type
it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = 'g';

% Simulate along parameters
ff_az_test_analyze( ...
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, ...
    param_map, support_map, param_tstar_map);

close all;

%% Single Saving Interest Rate, Single Borrowing Interest Rate (GRID) (Vary fl_r_borr, fl_r_save)
% Similar to above, except we allow for savings. Still vary borrowing
% interest rate and discount. Do not vary savings interest rate. Use
% default savings rate

param_map('fl_a_max') = fl_a_max_ori;

cl_st_param_keys = {'fl_r_borr', 'fl_r_save'};
param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
it_simu_vec_len = 10;
param_tstar_map('fl_r_borr') = linspace(0.01, 0.10, it_simu_vec_len);
param_tstar_map('fl_r_save') = linspace(0.00, 0.06, it_simu_vec_len);

% Simu Size and Graph Type
it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = 'g';

% Simulate along parameters
ff_az_test_analyze( ...
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, ...
    param_map, support_map, param_tstar_map);

close all;

%% Multiple Borrowing Interest Rates (GRID) (Vary fl_r_borr, fl_r_save)
% Borrow Interest Rate Draws and Very Savings Interest Rate

% Generate Benchmark Parameters
it_param_set = 9;
[param_map, support_map] = ffs_abz_set_default_param(it_param_set);

% Borrowing Parameters
param_map('bl_default') = bl_default;

% Support Parameters
support_map('bl_replacefile') = false;
support_map('bl_graph_onebyones') = true;
support_map('bl_display_graph_stats') = false;
support_map('st_mat_test_prefix') = ['nbc_'];

it_size_type = 2;
ar_it_plot_sets = [51,52,54, 5,6,153, 61,62,64];
bl_simu_cross = 'g';

cl_st_param_keys = {'fl_z_r_borr_poiss_mean', 'fl_r_save'};
it_simu_vec_len = 10;
param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
param_tstar_map('fl_z_r_borr_poiss_mean') = linspace(2, 10, it_simu_vec_len);
param_tstar_map('fl_r_save') = linspace(0, 0.06, it_simu_vec_len);

% Simulate along parameters
ff_az_test_analyze( ...
    ar_it_plot_sets, bl_simu_cross, it_size_type, cl_st_param_keys, ...
    param_map, support_map, param_tstar_map);

close all;

##### SOURCE END #####
--></body></html>