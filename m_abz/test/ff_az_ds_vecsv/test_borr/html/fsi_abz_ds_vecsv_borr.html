
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Test Borrowing (Save + Borr Distribution)</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-06-20"><meta name="DC.source" content="fsi_abz_ds_vecsv_borr.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Test Borrowing (Save + Borr Distribution)</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><p>Testing the <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html">ff_az_ds_vec</a> program for solving the savings only dynamic programming problem.</p><p>No default, change borrowing interest rates. Default, changin minimum consumption etc.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Test Borrowing Interest Rates, No Default, NBC</a></li><li><a href="#2">Test Borrowing Bounds with Defaults</a></li><li><a href="#3">Test Minimum Consumption with Defaults</a></li></ul></div><h2 id="1">Test Borrowing Interest Rates, No Default, NBC</h2><p>The natural borrowing constraint restricts borrowing. Note that <b>pYisMINY</b> in tables below is generally very close to 0. That is the correct mass. As we shift the formal borrowing interest rate, the natural borrowing constraints changes (lower borrowing interest rate, more borrowing allowed), but the mass at the borrowing bound is 0 because at the bound, households would go to negative infinite utility, approximated by -9999 in default parameters pYisMINY. Note the <b>min</b> value in table shows how the natural borrowing constraint is adjusting. that is the NBC bound.</p><pre class="codeinput">close <span class="string">all</span>;
clear <span class="string">all</span>;

it_size = 5;

<span class="comment">% default or not</span>
bl_default = false;
ar_bl_default = [false, false, true];
ar_bl_default = zeros([1,it_size]) + bl_default;
<span class="comment">% cmin</span>
fl_c_min = 0.001;
ar_fl_c_min = [0.001, 0.005, 0.010];
ar_fl_c_min = linspace(0.001, 0.005, it_size);
ar_fl_c_min = zeros([1,it_size]) + fl_c_min;
<span class="comment">% borrow bound</span>
fl_b_bd = -20;
ar_fl_b_bd = [-20, -15, -10];
ar_fl_b_bd = linspace(-20, 0, it_size);
ar_fl_b_bd = zeros([1,it_size]) + fl_b_bd;
<span class="comment">% fl_r_borr</span>
fl_r_borr = 0.035;
ar_fl_r_borr = [-999, -999, -999];
ar_fl_r_borr = linspace(0.20, 0.025, it_size);
<span class="comment">% ar_fl_r_borr = zeros([1,it_size]) + fl_r_borr;</span>

<span class="comment">% other parameters</span>
it_a_n = 750;
it_z_n = 15;
fl_crra = 1.5;
fl_beta = 0.94;
fl_r_save = 0.025;

<span class="comment">% Simulate Model</span>

<span class="keyword">for</span> it_cur_param = 1:1:length(ar_bl_default)

    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp([<span class="string">'ar_bl_default = '</span> num2str(ar_bl_default(it_cur_param))]);
    disp([<span class="string">'ar_fl_c_min = '</span> num2str(ar_fl_c_min(it_cur_param))]);
    disp([<span class="string">'ar_fl_b_bd = '</span> num2str(ar_fl_b_bd(it_cur_param))]);
    disp([<span class="string">'ar_fl_r_borr = '</span> num2str(ar_fl_r_borr(it_cur_param))]);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);

    <span class="comment">% Call Default Parameters &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param&gt;</span>
    bl_input_override = true;
    it_param_set = 9;
    [param_map, support_map] = ffs_abz_set_default_param(it_param_set);

    <span class="comment">% Borrowing Parameters</span>
    param_map(<span class="string">'bl_default'</span>) = ar_bl_default(it_cur_param);
    param_map(<span class="string">'fl_c_min'</span>) = ar_fl_c_min(it_cur_param);
    param_map(<span class="string">'fl_b_bd'</span>) = ar_fl_b_bd(it_cur_param);

    <span class="comment">% Interest Rates</span>
    param_map(<span class="string">'fl_r_save'</span>) = fl_r_save;
    param_map(<span class="string">'fl_r_borr'</span>) = ar_fl_r_borr(it_cur_param);

    <span class="comment">% Simulation Accuracy</span>
    param_map(<span class="string">'it_a_n'</span>) = it_a_n;
    param_map(<span class="string">'it_z_n'</span>) = it_z_n;
    param_map(<span class="string">'fl_crra'</span>) = fl_crra;
    param_map(<span class="string">'fl_beta'</span>) = fl_beta;

    <span class="comment">% Display Parameters</span>
    support_map(<span class="string">'bl_display'</span>) = false;
    support_map(<span class="string">'bl_display_final'</span>) = false;
    support_map(<span class="string">'bl_time'</span>) = true;
    support_map(<span class="string">'bl_profile'</span>) = false;

    support_map(<span class="string">'bl_graph_funcgrids'</span>) = false;

    <span class="comment">% Call Grid Generator &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid&gt;</span>
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);

    <span class="comment">% Call Dynamic Programming Problem &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv&gt;</span>
    result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

    <span class="comment">% Call Distribution CProgram</span>
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

    <span class="comment">% Snap</span>
    snapnow;

<span class="keyword">end</span>

<span class="comment">% close all</span>
close <span class="string">all</span>;
</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 0
ar_fl_c_min = 0.001
ar_fl_b_bd = -20
ar_fl_r_borr = 0.2
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Warning: "C:\Users\fan\CodeDynaAsset\m_abz\test\ff_az_ds_vecsv\test_borr\html"
not found in path. 
Elapsed time is 1.670466 seconds.
Elapsed time is 1.124187 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar      min       max        pYis0        pYisMINY     pYisMAXY      p0_1         p1         p5         p10        p15       p20         p25         p35         p50        p65       p75       p80       p85       p90       p95       p99      p99_9 
                     _______    _______    _________    _______    ______    __________    __________    ________    ________    ________    _______    _______    _______    ______    _________    ________    _______    _______    ______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_a      0.82672     1.1817      1.4293     -2.2234    49.582       0.17782     5.831e-43       0        -0.34087    -0.13169          0          0          0         0    0.0077548    0.077479    0.35638    0.77472    1.1233     1.472    1.8206    2.3087    3.2848    5.3765     8.026
    cl_mt_pol_coh     2.1268     1.4717       0.692     -2.2234    54.536             0    2.5497e-43       0         0.18991     0.49933    0.68262    0.79539    0.90837    1.0479       1.0813      1.2882     1.6879     2.1885    2.6888     3.007    3.4358    4.0609    5.1186    7.4379    10.369
    cl_mt_pol_c       1.3001    0.34548     0.26574           0    4.9541    2.5497e-43    2.5497e-43       0         0.48807     0.57494    0.69057    0.79539    0.90837    1.0055       1.0532       1.201     1.3169     1.4155    1.5454    1.5846    1.6628    1.7502    1.8662    2.1302    2.3805

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 0
ar_fl_c_min = 0.001
ar_fl_b_bd = -20
ar_fl_r_borr = 0.15625
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.659265 seconds.
Elapsed time is 1.068419 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar     min       max        pYis0        pYisMINY     pYisMAXY      p0_1         p1          p5          p10         p15        p20        p25         p35        p50        p65       p75       p80       p85       p90       p95       p99      p99_9 
                     _______    _______    _________    ______    ______    __________    __________    ________    ________    ________    ________    _________    _______    _______    ________    _______    _______    _______    ______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_a      0.80593     1.1909      1.4776     -2.846    49.577       0.12789    8.7967e-42       0         -1.0115    -0.44709    -0.16487    -0.023762          0          0    0.046794    0.11735    0.32902    0.75235    1.1757    1.4579    1.8107    2.3046    3.2218    5.3384    8.0196
    cl_mt_pol_coh     2.1035     1.4865     0.70664     -2.846    54.536             0    3.8465e-42       0        -0.42438     0.17247     0.59681      0.78744    0.90837     1.0204      1.0958     1.3128     1.6593     2.1806    2.6718    2.9924    3.4263    4.0459    5.0856     7.442    10.365
    cl_mt_pol_c       1.2976    0.34608      0.2667          0    4.9591    3.8465e-42    3.8465e-42       0         0.51594     0.61449     0.73844      0.81121    0.90837    0.98186      1.0479      1.162     1.2928     1.4289    1.5539    1.5825    1.6645    1.7479    1.8636    2.1346    2.3733

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 0
ar_fl_c_min = 0.001
ar_fl_b_bd = -20
ar_fl_r_borr = 0.1125
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.597138 seconds.
Elapsed time is 1.000372 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean       sd      coefofvar      min       max        pYis0        pYisMINY     pYisMAXY     p0_1         p1          p5         p10         p15          p20          p25          p35         p50        p65       p75       p80       p85       p90       p95       p99      p99_9 
                     ______    ______    _________    _______    ______    __________    __________    ________    _______    ________    ________    ________    ________    _________    _________    _________    _______    _______    ______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_a      0.6372    1.2755      2.0017     -3.9527    49.568      0.057994    1.3271e-40       0        -2.8002     -1.6477    -0.78329    -0.42313    -0.20703    -0.062961    -0.062961    0.0090717    0.22517    0.65737    1.0175    1.3777    1.6658    2.2421    3.1785    5.2675    7.9327
    cl_mt_pol_coh     1.923    1.5835     0.82345     -3.9527    54.536             0    5.8028e-41       0        -2.2723    -0.99953    0.016176     0.44156     0.67805      0.83832      0.97782       1.2048     1.5514     2.0682    2.5777    2.8985    3.3311    3.9367    4.9989    7.3463    10.286
    cl_mt_pol_c      1.2858    0.3475     0.27026           0     4.968    5.8028e-41    5.8028e-41       0        0.46941     0.63322     0.77136     0.83619     0.87697      0.93534       1.0164       1.1255     1.2912     1.4144    1.5529    1.5783    1.6592    1.7456    1.8573    2.1283    2.3668

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 0
ar_fl_c_min = 0.001
ar_fl_b_bd = -20
ar_fl_r_borr = 0.06875
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.763748 seconds.
Elapsed time is 1.434449 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                       mean        sd       coefofvar        min         max       pYis0       pYisMINY     pYisMAXY     p0_1        p1         p5         p10        p15        p20        p25        p35         p50          p65         p75        p80        p85       p90       p95       p99      p99_9 
                     ________    _______    _________    ___________    ______    ________    __________    ________    _______    _______    _______    _______    _______    _______    _______    ________    ________    _________    _______    _______    _______    ______    ______    ______    ______

    cl_mt_pol_a      -0.92738      2.137     -2.3044         -6.4681    49.548    0.018369    1.0367e-56       0         -6.242    -5.7896    -4.7341    -3.9048    -3.2263    -2.6986    -2.2462     -1.5677    -0.66299    -0.059863    0.31709    0.61866    0.92022    1.5234    2.4281     4.539    7.3285
    cl_mt_pol_coh      0.2714     2.4635       9.077         -6.4681    54.536           0    4.5332e-57       0        -5.9847    -5.3009    -4.0304    -3.1038     -2.376     -1.759    -1.2724    -0.48515      0.4441       1.2183     1.7656     2.0881     2.5428     3.161    4.1923    6.5808    9.5749
    cl_mt_pol_c        1.1988    0.34878     0.29094     -8.8818e-16    4.9881           0    4.5332e-57       0        0.24837    0.47517    0.67925    0.80129    0.86844    0.90991    0.94385      1.0414      1.1475       1.2942     1.4382     1.4966     1.5852    1.6813    1.8333    2.0835      2.34

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 0
ar_fl_c_min = 0.001
ar_fl_b_bd = -20
ar_fl_r_borr = 0.025
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.682958 seconds.
Elapsed time is 1.397199 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar      min       max        pYis0        pYisMINY     pYisMAXY      p0_1        p1         p5         p10        p15        p20        p25        p35        p50        p65        p75        p80        p85        p90        p95        p99       p99_9 
                     _______    _______    _________    _______    ______    __________    __________    ________    ________    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______

    cl_mt_pol_a       -15.63     1.7586    -0.11251     -17.787    49.366    1.1178e-07    5.8302e-54       0         -17.697    -17.606    -17.425    -17.335    -17.154    -17.063    -16.973    -16.611    -16.158    -15.434    -14.891    -14.439    -13.896    -13.262    -12.086    -9.5515    -6.3839
    cl_mt_pol_coh    -14.741     2.0356     -0.1381     -17.787    54.536             0    2.5493e-54       0         -17.548    -17.352    -17.045    -16.805     -16.61    -16.424    -16.239    -15.839    -15.261     -14.49    -13.776    -13.313    -12.756     -12.01    -10.715    -7.9623    -4.5639
    cl_mt_pol_c      0.88954    0.31112     0.34975           0    5.1693    2.5493e-54    2.5493e-54       0        0.072813    0.19911    0.35181      0.475    0.57003    0.61902    0.68089    0.78229    0.89532     1.0145     1.0941     1.1443     1.2094     1.2883     1.4127     1.6421     1.9153

</pre><h2 id="2">Test Borrowing Bounds with Defaults</h2><p>Borrowing could now go to the borrowing bound, which is the point of default. Note the fraction of households at <b>pYisMINY</b>, unlike in the exercise above is no longer 0, but potentially a positive mass. The households at these points are defaulting. A crucial parameter that controls default is <i>fl_c_min</i>, what is the u(c) utility today when households defualt? If this is very low, then even if default is allowed, it will not be an option taken by anyone, and <b>pYisMINY</b> will be zero. Note here that changing the borrowing bound is also impactful. When the borrowing bound is tight, with default allowed, households are unwilling to default, this is because if you are forced to get u(c_min) having not borrowed much, so borrowing is not worth-while.</p><pre class="codeinput">close <span class="string">all</span>;
clear <span class="string">all</span>;

it_size = 3;

<span class="comment">% default or not</span>
bl_default = true;
ar_bl_default = [false, false, true];
ar_bl_default = zeros([1,it_size]) + bl_default;
<span class="comment">% cmin</span>
fl_c_min = 0.025;
ar_fl_c_min = [0.001, 0.005, 0.010];
ar_fl_c_min = linspace(0.001, 0.005, it_size);
ar_fl_c_min = zeros([1,it_size]) + fl_c_min;
<span class="comment">% borrow bound</span>
fl_b_bd = -20;
ar_fl_b_bd = [-20, -15, -10];
ar_fl_b_bd = linspace(-20, -5, it_size);
<span class="comment">% ar_fl_b_bd = zeros([1,it_size]) + fl_b_bd;</span>
<span class="comment">% fl_r_borr</span>
fl_r_borr = 0.10;
ar_fl_r_borr = [-999, -999, -999];
<span class="comment">% ar_cur_param_fur = linspace(0.20, 0.025, it_size);</span>
ar_fl_r_borr = zeros([1,it_size]) + fl_r_borr;

<span class="comment">% other parameters</span>
it_a_n = 750;
it_z_n = 15;
fl_crra = 1.5;
fl_beta = 0.94;
fl_r_save = 0.025;

<span class="comment">% Simulate Model with Discount = 0.85</span>

<span class="keyword">for</span> it_cur_param = 1:1:length(ar_bl_default)

    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp([<span class="string">'ar_bl_default = '</span> num2str(ar_bl_default(it_cur_param))]);
    disp([<span class="string">'ar_fl_c_min = '</span> num2str(ar_fl_c_min(it_cur_param))]);
    disp([<span class="string">'ar_fl_b_bd = '</span> num2str(ar_fl_b_bd(it_cur_param))]);
    disp([<span class="string">'ar_fl_r_borr = '</span> num2str(ar_fl_r_borr(it_cur_param))]);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);

    <span class="comment">% Call Default Parameters &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param&gt;</span>
    bl_input_override = true;
    it_param_set = 9;
    [param_map, support_map] = ffs_abz_set_default_param(it_param_set);

    <span class="comment">% Borrowing Parameters</span>
    param_map(<span class="string">'bl_default'</span>) = ar_bl_default(it_cur_param);
    param_map(<span class="string">'fl_c_min'</span>) = ar_fl_c_min(it_cur_param);
    param_map(<span class="string">'fl_b_bd'</span>) = ar_fl_b_bd(it_cur_param);

    <span class="comment">% Interest Rates</span>
    param_map(<span class="string">'fl_r_save'</span>) = fl_r_save;
    param_map(<span class="string">'fl_r_borr'</span>) = ar_fl_r_borr(it_cur_param);

    <span class="comment">% Simulation Accuracy</span>
    param_map(<span class="string">'it_a_n'</span>) = it_a_n;
    param_map(<span class="string">'it_z_n'</span>) = it_z_n;
    param_map(<span class="string">'fl_crra'</span>) = fl_crra;
    param_map(<span class="string">'fl_beta'</span>) = fl_beta;

    <span class="comment">% Display Parameters</span>
    support_map(<span class="string">'bl_display'</span>) = false;
    support_map(<span class="string">'bl_display_final'</span>) = false;
    support_map(<span class="string">'bl_time'</span>) = true;
    support_map(<span class="string">'bl_profile'</span>) = false;

    support_map(<span class="string">'bl_graph_funcgrids'</span>) = false;

    <span class="comment">% Call Grid Generator &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid&gt;</span>
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);

    <span class="comment">% Call Dynamic Programming Problem &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv&gt;</span>
    result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

    <span class="comment">% Call Distribution CProgram</span>
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

    <span class="comment">% Snap</span>
    snapnow;

<span class="keyword">end</span>

<span class="comment">% close all</span>
close <span class="string">all</span>;
</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.025
ar_fl_b_bd = -20
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.665728 seconds.
Elapsed time is 0.997282 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd      coefofvar      min       max       pYis0       pYisMINY     pYisMAXY     p0_1        p1         p5         p10        p15        p20        p25        p35        p50        p65        p75        p80        p85       p90       p95       p99      p99_9 
                     _______    ______    _________    _______    ______    ________    __________    ________    _______    _______    _______    _______    _______    _______    _______    _______    ________    ______    _______    _______    _______    ______    ______    ______    ______

    cl_mt_pol_a      -3.0419    5.5348     -1.8195         -20    49.533    0.081239      0.023952       0            -20        -20    -16.075    -12.243    -9.0654    -6.5421    -4.6729     -2.243    -0.56075         0    0.18692    0.46729    0.74766     1.215    2.1495    4.2056    6.9159
    cl_mt_pol_coh    -2.0914    6.1691     -2.9498     -21.555    54.536           0    0.00011312       0        -21.408    -20.952    -16.278    -12.259    -8.7733    -6.0903    -4.0262    -1.3613     0.43104    1.2088     1.6226     1.9513     2.3345    2.9093    3.9076    6.2597    9.2293
    cl_mt_pol_c      0.95053    3.4202      3.5983     -21.555    5.0031           0    0.00011312       0        -21.408    -20.952     1.1693     1.1901     1.2088     1.2262      1.244     1.3092      1.4396    1.5597     1.6373     1.6756     1.7415    1.8049    1.9397    2.2348    2.6841

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.025
ar_fl_b_bd = -12.5
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.624725 seconds.
Elapsed time is 1.049067 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                       mean         sd      coefofvar      min       max       pYis0       pYisMINY     pYisMAXY     p0_1        p1         p5         p10        p15         p20         p25          p35         p50        p65        p75       p80       p85       p90       p95       p99      p99_9 
                     _________    ______    _________    _______    ______    ________    __________    ________    _______    _______    _______    _______    ________    ________    ________    _________    _______    _______    _______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_a      -0.096618    2.4262     -25.111       -12.5    49.583    0.059128     0.0056826       0          -12.5    -10.831    -4.5728     -1.986     -1.1515    -0.73431    -0.40053    -0.066756    0.10013    0.43391    0.85113    1.1015    1.4352    2.0194    2.9372    5.0234     7.777
    cl_mt_pol_coh       1.1264    2.7903      2.4771     -13.305    54.536           0    4.1788e-05       0        -12.963    -10.775    -3.9822    -1.2285    -0.26653      0.2195     0.51831      0.90837     1.3531     1.8555     2.3378    2.6708    3.0984    3.7208    4.7807     7.105     10.06
    cl_mt_pol_c         1.2231    1.0833     0.88575     -13.305     4.953           0    4.1788e-05       0        -12.963    0.87621     0.9105    0.93754      0.9601     0.98469      1.0228        1.102     1.2648     1.4052     1.5137    1.5885    1.6332    1.7341    1.8538    2.0915    2.3412

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.025
ar_fl_b_bd = -5
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.601813 seconds.
Elapsed time is 1.048035 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar      min       max       pYis0       pYisMINY     pYisMAXY     p0_1        p1          p5         p10         p15         p20        p25          p35          p50        p65        p75       p80       p85       p90       p95       p99      p99_9 
                     _______    _______    _________    _______    ______    ________    __________    ________    _______    _______    ________    ________    ________    _______    ________    __________    _______    _______    _______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_a      0.50348     1.3605      2.7022          -5    49.559    0.040984    0.00025411       0        -4.3391    -2.4299     -1.1816    -0.66756    -0.44726    -0.3004    -0.22697    -0.0066756    0.21362    0.58077    0.94793    1.2417    1.6088    2.1963    3.0774    5.2069    7.9239
    cl_mt_pol_coh     1.7806     1.6739     0.94009     -5.0553    54.536           0    1.0483e-05       0        -3.8066    -1.7645    -0.39137     0.15137     0.43295    0.63665      0.7982         1.064     1.4926     1.9897     2.5049    2.8176    3.2692    3.8714    4.9347    7.2681    10.215
    cl_mt_pol_c       1.2771    0.35431     0.27744     -5.0553    4.9764           0    1.0483e-05       0        0.56905    0.65182     0.76475     0.81958     0.91502    0.95176      1.0025        1.1147     1.2875     1.4108     1.5496    1.5703    1.6553    1.7442    1.8603     2.122    2.3662

</pre><h2 id="3">Test Minimum Consumption with Defaults</h2><p>A minimum consumption value increases, default increases.</p><pre class="codeinput">close <span class="string">all</span>;
clear <span class="string">all</span>;

it_size = 4;

<span class="comment">% default or not</span>
bl_default = true;
ar_bl_default = [false, false, true];
ar_bl_default = zeros([1,it_size]) + bl_default;
<span class="comment">% cmin</span>
fl_c_min = 0.025;
ar_fl_c_min = [0.001, 0.005, 0.010];
ar_fl_c_min = linspace(0.1, 0.001, it_size);
<span class="comment">% ar_fl_c_min = zeros([1,it_size]) + fl_c_min;</span>
<span class="comment">% borrow bound</span>
fl_b_bd = -12.5;
ar_fl_b_bd = [-20, -15, -10];
<span class="comment">% ar_fl_b_bd = linspace(-20, -5, it_size);</span>
ar_fl_b_bd = zeros([1,it_size]) + fl_b_bd;
<span class="comment">% fl_r_borr</span>
fl_r_borr = 0.10;
ar_fl_r_borr = [-999, -999, -999];
<span class="comment">% ar_cur_param_fur = linspace(0.20, 0.025, it_size);</span>
ar_fl_r_borr = zeros([1,it_size]) + fl_r_borr;

<span class="comment">% other parameters</span>
it_a_n = 750;
it_z_n = 15;
fl_crra = 1.5;
fl_beta = 0.94;
fl_r_save = 0.025;

<span class="comment">% Simulate Model with Discount = 0.85</span>

<span class="keyword">for</span> it_cur_param = 1:1:length(ar_bl_default)

    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp([<span class="string">'ar_bl_default = '</span> num2str(ar_bl_default(it_cur_param))]);
    disp([<span class="string">'ar_fl_c_min = '</span> num2str(ar_fl_c_min(it_cur_param))]);
    disp([<span class="string">'ar_fl_b_bd = '</span> num2str(ar_fl_b_bd(it_cur_param))]);
    disp([<span class="string">'ar_fl_r_borr = '</span> num2str(ar_fl_r_borr(it_cur_param))]);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);
    disp(<span class="string">''</span>);

    <span class="comment">% Call Default Parameters &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param&gt;</span>
    bl_input_override = true;
    it_param_set = 9;
    [param_map, support_map] = ffs_abz_set_default_param(it_param_set);

    <span class="comment">% Borrowing Parameters</span>
    param_map(<span class="string">'bl_default'</span>) = ar_bl_default(it_cur_param);
    param_map(<span class="string">'fl_c_min'</span>) = ar_fl_c_min(it_cur_param);
    param_map(<span class="string">'fl_b_bd'</span>) = ar_fl_b_bd(it_cur_param);

    <span class="comment">% Interest Rates</span>
    param_map(<span class="string">'fl_r_save'</span>) = fl_r_save;
    param_map(<span class="string">'fl_r_borr'</span>) = ar_fl_r_borr(it_cur_param);

    <span class="comment">% Simulation Accuracy</span>
    param_map(<span class="string">'it_a_n'</span>) = it_a_n;
    param_map(<span class="string">'it_z_n'</span>) = it_z_n;
    param_map(<span class="string">'fl_crra'</span>) = fl_crra;
    param_map(<span class="string">'fl_beta'</span>) = fl_beta;

    <span class="comment">% Display Parameters</span>
    support_map(<span class="string">'bl_display'</span>) = false;
    support_map(<span class="string">'bl_display_final'</span>) = false;
    support_map(<span class="string">'bl_time'</span>) = true;
    support_map(<span class="string">'bl_profile'</span>) = false;

    support_map(<span class="string">'bl_graph_funcgrids'</span>) = false;

    <span class="comment">% Call Grid Generator &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid&gt;</span>
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);

    <span class="comment">% Call Dynamic Programming Problem &lt;https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv&gt;</span>
    result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

    <span class="comment">% Call Distribution CProgram</span>
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

    <span class="comment">% Snap</span>
    snapnow;

<span class="keyword">end</span>

<span class="comment">% close all</span>
close <span class="string">all</span>;
</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.1
ar_fl_b_bd = -12.5
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.470739 seconds.
Elapsed time is 0.753013 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd      coefofvar      min       max       pYis0      pYisMINY     pYisMAXY     p0_1        p1         p5         p10        p15        p20        p25        p35        p50        p65         p75         p80         p85       p90        p95        p99      p99_9 
                     _______    ______    _________    _______    ______    _______    __________    ________    _______    _______    _______    _______    _______    _______    _______    _______    _______    ________    ________    ________    _______    ______    ________    ______    ______

    cl_mt_pol_a       -4.382    4.0738    -0.92966       -12.5    49.499    0.09318      0.079371       0          -12.5      -12.5      -12.5    -10.497    -9.9967    -8.4112    -7.5768    -5.6575    -3.4045     -1.6522    -0.81776    -0.48398    -0.1502         0    0.016689    1.5187    3.7717
    cl_mt_pol_coh    -3.5433    4.5795     -1.2924     -13.305    54.536          0    0.00035604       0        -13.237    -12.963    -12.541     -10.43    -9.7208    -8.0686    -7.0318    -4.9769    -2.4444    -0.58598     0.40103     0.78744     1.0479    1.3944      1.9678    3.6207    6.1492
    cl_mt_pol_c      0.83869    3.9426      4.7008     -13.305    5.0365          0    0.00035604       0        -13.237    -12.963    -12.541     1.7115     1.7549     1.7762     1.8021     1.8655     1.9468      2.0091      2.0616       2.097     2.1609    2.2419      2.3954    2.7263    3.0817

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.067
ar_fl_b_bd = -12.5
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.439282 seconds.
Elapsed time is 0.885009 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd      coefofvar      min       max       pYis0      pYisMINY     pYisMAXY     p0_1        p1         p5        p10        p15        p20        p25        p35        p50         p65         p75       p80        p85         p90       p95       p99      p99_9 
                     _______    ______    _________    _______    ______    ________    _________    ________    _______    _______    ______    _______    _______    _______    _______    _______    ________    ________    _______    ______    ________    _______    ______    ______    ______

    cl_mt_pol_a      -3.2558    4.0093     -1.2314       -12.5    49.499    0.063657     0.050952       0          -12.5      -12.5     -12.5    -10.164    -8.4112    -6.9092    -5.8244    -3.9052     -1.8191    -0.65087    -0.1502         0    0.016689    0.43391    1.1849    3.1041    5.6909
    cl_mt_pol_coh     -2.313    4.5211     -1.9546     -13.305    54.536           0    0.0002704       0        -13.158    -12.963    -11.61    -9.8773    -8.0686    -6.5373    -5.1961     -3.087    -0.85944     0.51297     1.0479    1.3216      1.6256     2.0958    2.9846    5.1512    8.0071
    cl_mt_pol_c      0.94281    3.1447      3.3354     -13.305    5.0365           0    0.0002704       0        -13.158    -12.963    -11.61     1.4294     1.4483     1.4612     1.4767     1.5351      1.6193      1.7091     1.7695    1.7972      1.8525     1.9165    2.0658    2.3507    2.6533

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.034
ar_fl_b_bd = -12.5
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.601081 seconds.
Elapsed time is 1.015273 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                       mean        sd      coefofvar      min       max       pYis0       pYisMINY     pYisMAXY     p0_1        p1         p5        p10        p15        p20        p25        p35          p50         p65       p75        p80       p85       p90       p95       p99      p99_9 
                     ________    ______    _________    _______    ______    ________    __________    ________    _______    _______    _______    ______    _______    _______    _______    ________    _________    _______    ______    _______    ______    ______    ______    ______    ______

    cl_mt_pol_a      -0.84375    3.1167     -3.6939       -12.5    49.583    0.053872      0.013857       0          -12.5      -12.5    -8.2443     -4.99    -2.9873    -1.9025     -1.235    -0.48398    -0.066756    0.26702    0.6008    0.85113    1.1849     1.769    2.6869     4.773    7.5267
    cl_mt_pol_coh     0.31354      3.54      11.291     -13.305    54.536           0    9.3622e-05       0        -13.067    -12.541      -7.86    -4.397     -2.247    -1.0421    -0.3087     0.49282        1.065     1.6085    2.0958     2.4142    2.8418    3.4406    4.4906     6.843    9.7935
    cl_mt_pol_c        1.1573    1.6543      1.4295     -13.305     4.953           0    9.3622e-05       0        -13.067    -12.541     1.0269    1.0514     1.0681     1.0845     1.1075      1.1716        1.301     1.4075    1.5192     1.5885     1.634    1.7308    1.8518    2.0926    2.3379

</pre><pre class="codeoutput">xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
ar_bl_default = 1
ar_fl_c_min = 0.001
ar_fl_b_bd = -12.5
ar_fl_r_borr = 0.1
xxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxx
Elapsed time is 1.701811 seconds.
Elapsed time is 1.026453 seconds.
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar      min       max       pYis0      pYisMINY     pYisMAXY     p0_1        p1          p5         p10         p15         p20         p25       p35        p50       p65       p75       p80       p85       p90       p95       p99      p99_9 
                     _______    _______    _________    _______    ______    _______    __________    ________    _______    _______    ________    ________    ________    ________    _______    ______    _______    ______    ______    ______    ______    ______    ______    ______    ______

    cl_mt_pol_a      0.50426     1.3763      2.7294       -12.5    49.583    0.04674    4.5151e-06       0        -4.5728    -2.5701      -1.235    -0.73431    -0.40053    -0.31709    -0.1502         0    0.18358    0.6008     1.018    1.2684    1.6021    2.1862    3.1041    5.1903    7.9439
    cl_mt_pol_coh      1.781     1.6906     0.94924     -13.305    54.536          0    8.4562e-08       0        -4.1508     -1.947    -0.47835     0.15024     0.46778      0.6764    0.83494    1.0762      1.497    2.0102    2.5088    2.8418    3.2695    3.8773    4.9518     7.276    10.221
    cl_mt_pol_c       1.2768    0.34979     0.27396     -13.305     4.953          0    8.4562e-08       0        0.43395    0.63146     0.76865     0.83084     0.86595     0.96101     1.0078    1.0936     1.2968    1.4095    1.5243    1.6056    1.6423    1.7391    1.8581    2.0959    2.3454

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Test Borrowing (Save + Borr Distribution)
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*
%
% Testing the
% <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html
% ff_az_ds_vec> program for solving the savings only dynamic
% programming problem.
%
% No default, change borrowing interest rates. Default, changin minimum
% consumption etc. 
%


%% Test Borrowing Interest Rates, No Default, NBC
% The natural borrowing constraint restricts borrowing. Note that
% *pYisMINY* in tables below is generally very close to 0. That is the
% correct mass. As we shift the formal borrowing interest rate, the natural
% borrowing constraints changes (lower borrowing interest rate, more
% borrowing allowed), but the mass at the borrowing bound is 0 because at
% the bound, households would go to negative infinite utility, approximated
% by -9999 in default parameters pYisMINY. Note the *min* value in table
% shows how the natural borrowing constraint is adjusting. that is the NBC
% bound.
%

close all;
clear all;

it_size = 5;

% default or not
bl_default = false;
ar_bl_default = [false, false, true];
ar_bl_default = zeros([1,it_size]) + bl_default;
% cmin
fl_c_min = 0.001;
ar_fl_c_min = [0.001, 0.005, 0.010];
ar_fl_c_min = linspace(0.001, 0.005, it_size);
ar_fl_c_min = zeros([1,it_size]) + fl_c_min;
% borrow bound
fl_b_bd = -20;
ar_fl_b_bd = [-20, -15, -10];
ar_fl_b_bd = linspace(-20, 0, it_size);
ar_fl_b_bd = zeros([1,it_size]) + fl_b_bd;
% fl_r_borr
fl_r_borr = 0.035;
ar_fl_r_borr = [-999, -999, -999];
ar_fl_r_borr = linspace(0.20, 0.025, it_size);
% ar_fl_r_borr = zeros([1,it_size]) + fl_r_borr;

% other parameters
it_a_n = 750;
it_z_n = 15;
fl_crra = 1.5;
fl_beta = 0.94;
fl_r_save = 0.025;

% Simulate Model

for it_cur_param = 1:1:length(ar_bl_default)

    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp(['ar_bl_default = ' num2str(ar_bl_default(it_cur_param))]);
    disp(['ar_fl_c_min = ' num2str(ar_fl_c_min(it_cur_param))]);
    disp(['ar_fl_b_bd = ' num2str(ar_fl_b_bd(it_cur_param))]);
    disp(['ar_fl_r_borr = ' num2str(ar_fl_r_borr(it_cur_param))]);
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('');
    disp('');
    disp('');
    disp('');

    % Call Default Parameters <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param>
    bl_input_override = true;
    it_param_set = 9;
    [param_map, support_map] = ffs_abz_set_default_param(it_param_set);

    % Borrowing Parameters
    param_map('bl_default') = ar_bl_default(it_cur_param);
    param_map('fl_c_min') = ar_fl_c_min(it_cur_param);
    param_map('fl_b_bd') = ar_fl_b_bd(it_cur_param);
    
    % Interest Rates
    param_map('fl_r_save') = fl_r_save;
    param_map('fl_r_borr') = ar_fl_r_borr(it_cur_param);
    
    % Simulation Accuracy
    param_map('it_a_n') = it_a_n;
    param_map('it_z_n') = it_z_n;
    param_map('fl_crra') = fl_crra;
    param_map('fl_beta') = fl_beta;

    % Display Parameters
    support_map('bl_display') = false;
    support_map('bl_display_final') = false;
    support_map('bl_time') = true;
    support_map('bl_profile') = false;
    
    support_map('bl_graph_funcgrids') = false;

    % Call Grid Generator <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid>
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);

    % Call Dynamic Programming Problem <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv>
    result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

    % Call Distribution CProgram
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

    % Snap
    snapnow;

end

% close all
close all;

%% Test Borrowing Bounds with Defaults
% Borrowing could now go to the borrowing bound, which is the point of
% default. Note the fraction of households at *pYisMINY*, unlike in the
% exercise above is no longer 0, but potentially a positive mass. The
% households at these points are defaulting. A crucial parameter that
% controls default is _fl_c_min_, what is the u(c) utility today when
% households defualt? If this is very low, then even if default is allowed,
% it will not be an option taken by anyone, and *pYisMINY* will be zero.
% Note here that changing the borrowing bound is also impactful. When the
% borrowing bound is tight, with default allowed, households are unwilling
% to default, this is because if you are forced to get u(c_min) having not
% borrowed much, so borrowing is not worth-while.

close all;
clear all;

it_size = 3;

% default or not
bl_default = true;
ar_bl_default = [false, false, true];
ar_bl_default = zeros([1,it_size]) + bl_default;
% cmin
fl_c_min = 0.025;
ar_fl_c_min = [0.001, 0.005, 0.010];
ar_fl_c_min = linspace(0.001, 0.005, it_size);
ar_fl_c_min = zeros([1,it_size]) + fl_c_min;
% borrow bound
fl_b_bd = -20;
ar_fl_b_bd = [-20, -15, -10];
ar_fl_b_bd = linspace(-20, -5, it_size);
% ar_fl_b_bd = zeros([1,it_size]) + fl_b_bd;
% fl_r_borr
fl_r_borr = 0.10;
ar_fl_r_borr = [-999, -999, -999];
% ar_cur_param_fur = linspace(0.20, 0.025, it_size);
ar_fl_r_borr = zeros([1,it_size]) + fl_r_borr;

% other parameters
it_a_n = 750;
it_z_n = 15;
fl_crra = 1.5;
fl_beta = 0.94;
fl_r_save = 0.025;

% Simulate Model with Discount = 0.85

for it_cur_param = 1:1:length(ar_bl_default)

    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp(['ar_bl_default = ' num2str(ar_bl_default(it_cur_param))]);
    disp(['ar_fl_c_min = ' num2str(ar_fl_c_min(it_cur_param))]);
    disp(['ar_fl_b_bd = ' num2str(ar_fl_b_bd(it_cur_param))]);
    disp(['ar_fl_r_borr = ' num2str(ar_fl_r_borr(it_cur_param))]);
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('');
    disp('');
    disp('');
    disp('');

    % Call Default Parameters <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param>
    bl_input_override = true;
    it_param_set = 9;
    [param_map, support_map] = ffs_abz_set_default_param(it_param_set);

    % Borrowing Parameters
    param_map('bl_default') = ar_bl_default(it_cur_param);
    param_map('fl_c_min') = ar_fl_c_min(it_cur_param);
    param_map('fl_b_bd') = ar_fl_b_bd(it_cur_param);
    
    % Interest Rates
    param_map('fl_r_save') = fl_r_save;
    param_map('fl_r_borr') = ar_fl_r_borr(it_cur_param);
    
    % Simulation Accuracy
    param_map('it_a_n') = it_a_n;
    param_map('it_z_n') = it_z_n;
    param_map('fl_crra') = fl_crra;
    param_map('fl_beta') = fl_beta;

    % Display Parameters
    support_map('bl_display') = false;
    support_map('bl_display_final') = false;
    support_map('bl_time') = true;
    support_map('bl_profile') = false;
    
    support_map('bl_graph_funcgrids') = false;

    % Call Grid Generator <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid>
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);

    % Call Dynamic Programming Problem <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv>
    result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

    % Call Distribution CProgram
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

    % Snap
    snapnow;

end

% close all
close all;

%% Test Minimum Consumption with Defaults
% A minimum consumption value increases, default increases. 

close all;
clear all;

it_size = 4;

% default or not
bl_default = true;
ar_bl_default = [false, false, true];
ar_bl_default = zeros([1,it_size]) + bl_default;
% cmin
fl_c_min = 0.025;
ar_fl_c_min = [0.001, 0.005, 0.010];
ar_fl_c_min = linspace(0.1, 0.001, it_size);
% ar_fl_c_min = zeros([1,it_size]) + fl_c_min;
% borrow bound
fl_b_bd = -12.5;
ar_fl_b_bd = [-20, -15, -10];
% ar_fl_b_bd = linspace(-20, -5, it_size);
ar_fl_b_bd = zeros([1,it_size]) + fl_b_bd;
% fl_r_borr
fl_r_borr = 0.10;
ar_fl_r_borr = [-999, -999, -999];
% ar_cur_param_fur = linspace(0.20, 0.025, it_size);
ar_fl_r_borr = zeros([1,it_size]) + fl_r_borr;

% other parameters
it_a_n = 750;
it_z_n = 15;
fl_crra = 1.5;
fl_beta = 0.94;
fl_r_save = 0.025;

% Simulate Model with Discount = 0.85

for it_cur_param = 1:1:length(ar_bl_default)

    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp(['ar_bl_default = ' num2str(ar_bl_default(it_cur_param))]);
    disp(['ar_fl_c_min = ' num2str(ar_fl_c_min(it_cur_param))]);
    disp(['ar_fl_b_bd = ' num2str(ar_fl_b_bd(it_cur_param))]);
    disp(['ar_fl_r_borr = ' num2str(ar_fl_r_borr(it_cur_param))]);
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('xxxxxxxxxxxxxxxxxxxxxxxxxxx');
    disp('');
    disp('');
    disp('');
    disp('');

    % Call Default Parameters <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param>
    bl_input_override = true;
    it_param_set = 9;
    [param_map, support_map] = ffs_abz_set_default_param(it_param_set);

    % Borrowing Parameters
    param_map('bl_default') = ar_bl_default(it_cur_param);
    param_map('fl_c_min') = ar_fl_c_min(it_cur_param);
    param_map('fl_b_bd') = ar_fl_b_bd(it_cur_param);
    
    % Interest Rates
    param_map('fl_r_save') = fl_r_save;
    param_map('fl_r_borr') = ar_fl_r_borr(it_cur_param);
    
    % Simulation Accuracy
    param_map('it_a_n') = it_a_n;
    param_map('it_z_n') = it_z_n;
    param_map('fl_crra') = fl_crra;
    param_map('fl_beta') = fl_beta;

    % Display Parameters
    support_map('bl_display') = false;
    support_map('bl_display_final') = false;
    support_map('bl_time') = true;
    support_map('bl_profile') = false;
    
    support_map('bl_graph_funcgrids') = false;

    % Call Grid Generator <https://fanwangecon.github.io/CodeDynaAsset/m_az/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid>
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);

    % Call Dynamic Programming Problem <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv>
    result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

    % Call Distribution CProgram
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

    % Snap
    snapnow;

end

% close all
close all;
##### SOURCE END #####
--></body></html>