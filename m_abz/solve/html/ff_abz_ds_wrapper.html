
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Derive Distributions for Save + Borrow One Asset (Wrapper)</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-22"><meta name="DC.source" content="ff_abz_ds_wrapper.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Derive Distributions for Save + Borrow One Asset (Wrapper)</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">FF_ABZ_DS_WRAPPER finds the stationary asset distributions</a></li><li><a href="#3">Default</a></li><li><a href="#4">Parse Parameters 1</a></li><li><a href="#5">Parse Parameters</a></li><li><a href="#6">Start Profiler and Timer</a></li><li><a href="#7">Solve DP</a></li><li><a href="#8">Derive Distribution</a></li><li><a href="#9">End Profiler and Timer</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> [result_map] = ff_abz_ds_wrapper(varargin)
</pre><h2 id="2">FF_ABZ_DS_WRAPPER finds the stationary asset distributions</h2><p>This is a warpper function. Note that when invoked by <b>abz</b>, there are two shocks, one for wage, another for the borrowing interest rate.</p><p>@include</p><div><ul><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/paramfunc/html/ffs_abz_set_default_param.html">ffs_abz_set_default_param</a></li><li><a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/paramfunc/html/ffs_abz_get_funcgrid.html">ffs_abz_get_funcgrid</a></li><li>save + borr optimized-vectorized: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_abz/solve/html/ff_abz_vf_vecsv.html">ff_abz_vf_vecsv</a></li><li>derive distribution f(y'(y,z)) one asset <b>loop</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds.html">ff_az_ds</a></li><li>derive distribution f(y'({y},z)) or f(y'({x,y},z)) <b>vectorized</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html">ff_az_ds_vec</a></li><li>derive distribution f(y'({y},z)) or f(y'({x,y},z)) <b>semi-analytical</b>: <a href="https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html">ff_az_ds_vecsv</a></li></ul></div><h2 id="3">Default</h2><div><ol><li>it_subset = 5 is basic invoke quick test</li><li>it_subset = 6 is invoke full test</li><li>it_subset = 7 is profiling invoke</li><li>it_subset = 8 is matlab publish</li><li>it_subset = 9 is invoke operational (only final stats) and coh graph</li></ol></div><pre class="codeinput">it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_abz_set_default_param(it_param_set);

<span class="comment">% Note: param_map and support_map can be adjusted here or outside to override defaults</span>
<span class="comment">% param_map('it_a_n') = 750;</span>
<span class="comment">% param_map('fl_z_r_borr_n') = 5;</span>
<span class="comment">% param_map('it_z_wage_n') = 15;</span>
<span class="comment">% param_map('it_z_n') = param_map('it_z_wage_n') * param_map('fl_z_r_borr_n');</span>
<span class="comment">% param_map('fl_r_save') = 0.025;</span>

<span class="comment">% These parameters below for comparison with abz_fibs model</span>
<span class="comment">% param_map('fl_r_save') = 0.025;</span>
<span class="comment">% param_map('fl_c_min') = 0.02;</span>
<span class="comment">% param_map('fl_z_r_borr_poiss_mean') = 20;</span>
<span class="comment">% param_map('fl_z_r_borr_max') = 0.035;</span>
<span class="comment">% param_map('fl_z_r_borr_min') = 0.035;</span>
<span class="comment">% param_map('fl_z_r_borr_n') = 1;</span>
<span class="comment">% param_map('it_z_n') = param_map('it_z_wage_n') * param_map('fl_z_r_borr_n');</span>
<span class="comment">% param_map('bl_default') = true;</span>

<span class="comment">% param_map('st_analytical_stationary_type') = 'loop';</span>
<span class="comment">% param_map('st_analytical_stationary_type') = 'vector';</span>
param_map(<span class="string">'st_analytical_stationary_type'</span>) = <span class="string">'eigenvector'</span>;

<span class="comment">% get armt and func map</span>
[armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override); <span class="comment">% 1 for override</span>
default_params = {param_map support_map armt_map func_map};
</pre><h2 id="4">Parse Parameters 1</h2><pre class="codeinput"><span class="comment">% if varargin only has param_map and support_map,</span>
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
<span class="keyword">if</span> params_len &gt;= 1 &amp;&amp; params_len &lt;= 2
    <span class="comment">% If override param_map, re-generate armt and func if they are not</span>
    <span class="comment">% provided</span>
    bl_input_override = true;
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);
<span class="keyword">else</span>
    <span class="comment">% Override all</span>
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
<span class="keyword">end</span>

<span class="comment">% if profile, profile DP + Dist here</span>
support_map(<span class="string">'bl_profile_dist'</span>) = false;

<span class="comment">% append function name</span>
st_func_name = <span class="string">'ff_abz_ds_wrapper'</span>;
support_map(<span class="string">'st_profile_name_main'</span>) = [st_func_name support_map(<span class="string">'st_profile_name_main'</span>)];
support_map(<span class="string">'st_mat_name_main'</span>) = [st_func_name support_map(<span class="string">'st_mat_name_main'</span>)];
support_map(<span class="string">'st_img_name_main'</span>) = [st_func_name support_map(<span class="string">'st_img_name_main'</span>)];
</pre><h2 id="5">Parse Parameters</h2><pre class="codeinput"><span class="comment">% param_map</span>
params_group = values(param_map, {<span class="string">'st_analytical_stationary_type'</span>});
[st_analytical_stationary_type] = params_group{:};

<span class="comment">% support_map</span>
params_group = values(support_map, <span class="keyword">...</span>
    {<span class="string">'st_profile_path'</span>, <span class="string">'st_profile_prefix'</span>, <span class="string">'st_profile_name_main'</span>, <span class="string">'st_profile_suffix'</span>,<span class="string">'bl_time'</span>});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};
</pre><h2 id="6">Start Profiler and Timer</h2><p>Start Profile</p><pre class="codeinput"><span class="keyword">if</span> (it_param_set == 7)
    close <span class="string">all</span>;
    profile <span class="string">off</span>;
    profile <span class="string">on</span>;
<span class="keyword">end</span>

<span class="comment">% Start Timer</span>
<span class="keyword">if</span> (bl_time)
    tic;
<span class="keyword">end</span>
</pre><h2 id="7">Solve DP</h2><pre class="codeinput">bl_input_override = true;
result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);
</pre><pre class="codeoutput">Elapsed time is 14.953169 seconds.
----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 39
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = bl_display ; val = false
pos = 2 ; key = bl_display_defparam ; val = true
pos = 3 ; key = bl_display_dist ; val = false
pos = 4 ; key = bl_display_final ; val = false
pos = 5 ; key = bl_display_final_dist ; val = true
pos = 6 ; key = bl_display_final_dist_detail ; val = true
pos = 7 ; key = bl_display_funcgrids ; val = false
pos = 8 ; key = bl_graph ; val = true
pos = 9 ; key = bl_graph_coh_t_coh ; val = true
pos = 10 ; key = bl_graph_funcgrids ; val = false
pos = 11 ; key = bl_graph_onebyones ; val = true
pos = 12 ; key = bl_graph_pol_lvl ; val = false
pos = 13 ; key = bl_graph_pol_pct ; val = false
pos = 14 ; key = bl_graph_val ; val = false
pos = 15 ; key = bl_img_save ; val = false
pos = 16 ; key = bl_mat ; val = false
pos = 17 ; key = bl_post ; val = true
pos = 18 ; key = bl_profile ; val = false
pos = 19 ; key = bl_profile_dist ; val = false
pos = 20 ; key = bl_time ; val = true
pos = 21 ; key = it_display_every ; val = 20
pos = 22 ; key = it_display_final_colmax ; val = 15
pos = 23 ; key = it_display_final_rowmax ; val = 100
pos = 24 ; key = it_display_summmat_colmax ; val = 5
pos = 25 ; key = it_display_summmat_rowmax ; val = 5
pos = 26 ; key = st_img_name_main ; val = ff_abz_vf_vecsvff_abz_ds_wrapper_default
pos = 27 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/img/
pos = 28 ; key = st_img_prefix ; val = 
pos = 29 ; key = st_img_suffix ; val = _p8.png
pos = 30 ; key = st_mat_name_main ; val = ff_abz_vf_vecsvff_abz_ds_wrapper_default
pos = 31 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/mat/
pos = 32 ; key = st_mat_prefix ; val = 
pos = 33 ; key = st_mat_suffix ; val = _p8
pos = 34 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_abz/
pos = 35 ; key = st_profile_name_main ; val = ff_abz_vf_vecsvff_abz_ds_wrapper_default
pos = 36 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_abz//solve/profile/
pos = 37 ; key = st_profile_prefix ; val = 
pos = 38 ; key = st_profile_suffix ; val = _p8
pos = 39 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx    value
                                    __    ___    _____

    bl_display                       1     1        0 
    bl_display_defparam              2     2        1 
    bl_display_dist                  3     3        0 
    bl_display_final                 4     4        0 
    bl_display_final_dist            5     5        1 
    bl_display_final_dist_detail     6     6        1 
    bl_display_funcgrids             7     7        0 
    bl_graph                         8     8        1 
    bl_graph_coh_t_coh               9     9        1 
    bl_graph_funcgrids              10    10        0 
    bl_graph_onebyones              11    11        1 
    bl_graph_pol_lvl                12    12        0 
    bl_graph_pol_pct                13    13        0 
    bl_graph_val                    14    14        0 
    bl_img_save                     15    15        0 
    bl_mat                          16    16        0 
    bl_post                         17    17        1 
    bl_profile                      18    18        0 
    bl_profile_dist                 19    19        0 
    bl_time                         20    20        1 
    it_display_every                21    21       20 
    it_display_final_colmax         22    22       15 
    it_display_final_rowmax         23    23      100 
    it_display_summmat_colmax       24    24        5 
    it_display_summmat_rowmax       25    25        5 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                            i     idx
                            __    ___

    st_img_name_main         1    26 
    st_img_path              2    27 
    st_img_prefix            3    28 
    st_img_suffix            4    29 
    st_mat_name_main         5    30 
    st_mat_path              6    31 
    st_mat_prefix            7    32 
    st_mat_suffix            8    33 
    st_matimg_path_root      9    34 
    st_profile_name_main    10    35 
    st_profile_path         11    36 
    st_profile_prefix       12    37 
    st_profile_suffix       13    38 
    st_title_prefix         14    39 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: ARMT_MAP
----------------------------------------
  Map with properties:

        Count: 4
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = ar_a ;rown= 1 ,coln= 750
ar_a :mu= 15 ,sd= 20.2477 ,min= -20 ,max= 50
               zi_1_C1    zi_2_C2    zi_375_c375    zi_749_c749    zi_750_c750
               _______    _______    ___________    ___________    ___________

    zi_1_r1      -20      -19.907      14.953         49.907           50     

pos = 2 ; key = ar_z_r_borr_mesh_wage ;rown= 1 ,coln= 75
ar_z_r_borr_mesh_wage :mu= 0.06 ,sd= 0.024915 ,min= 0.025 ,max= 0.095
               zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
               _______    _______    _________    _________    _________

    zi_1_r1     0.025      0.025       0.06         0.095        0.095  

pos = 3 ; key = ar_z_wage_mesh_r_borr ;rown= 1 ,coln= 75
ar_z_wage_mesh_r_borr :mu= 1.1347 ,sd= 0.67963 ,min= 0.34741 ,max= 2.567
               zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
               _______    _______    _________    _________    _________

    zi_1_r1    0.34741    0.40076     0.94436      2.2253        2.567  

pos = 4 ; key = mt_z_trans ;rown= 75 ,coln= 75
mt_z_trans :mu= 0.013333 ,sd= 0.033888 ,min= 0 ,max= 0.18043
                  zi_1_C1       zi_2_C2      zi_38_c38     zi_74_c74     zi_75_c75 
                 __________    __________    __________    __________    __________

    zi_1_R1      0.00040376    0.00041642    9.9503e-06    7.1794e-16             0
    zi_2_R2      0.00017432    0.00030453    7.6711e-05    6.0522e-14    2.1538e-16
    zi_38_r38    2.6665e-09    6.3644e-08      0.021651    2.6518e-05     1.111e-06
    zi_74_r74    5.3916e-19    1.4526e-16    7.6711e-05       0.12689      0.072633
    zi_75_r75    4.2544e-21     1.716e-18    9.9503e-06       0.17351       0.16823

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                             i    idx    rowN    colN      mean        std         min        max  
                             _    ___    ____    ____    ________    ________    _______    _______

    ar_a                     1     1       1     750           15      20.248        -20         50
    ar_z_r_borr_mesh_wage    2     2       1      75         0.06    0.024915      0.025      0.095
    ar_z_wage_mesh_r_borr    3     3       1      75       1.1347     0.67963    0.34741      2.567
    mt_z_trans               4     4      75      75     0.013333    0.033888          0    0.18043

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 35
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = bl_b_is_principle ; val = true
pos = 2 ; key = bl_default ; val = true
pos = 3 ; key = bl_loglin ; val = false
pos = 4 ; key = fl_a_max ; val = 50
pos = 5 ; key = fl_a_min ; val = 0
pos = 6 ; key = fl_b_bd ; val = -20
pos = 7 ; key = fl_beta ; val = 0.94
pos = 8 ; key = fl_c_min ; val = 0.01
pos = 9 ; key = fl_crra ; val = 1.5
pos = 10 ; key = fl_default_aprime ; val = 0
pos = 11 ; key = fl_loglin_threshold ; val = 1
pos = 12 ; key = fl_nan_replace ; val = -99999
pos = 13 ; key = fl_r_save ; val = 0.025
pos = 14 ; key = fl_tol_dist ; val = 1e-05
pos = 15 ; key = fl_tol_pol ; val = 1e-05
pos = 16 ; key = fl_tol_val ; val = 1e-05
pos = 17 ; key = fl_w ; val = 1.28
pos = 18 ; key = fl_z_r_borr_max ; val = 0.095
pos = 19 ; key = fl_z_r_borr_min ; val = 0.025
pos = 20 ; key = fl_z_r_borr_n ; val = 5
pos = 21 ; key = fl_z_r_borr_poiss_mean ; val = 10
pos = 22 ; key = fl_z_wage_mu ; val = 0
pos = 23 ; key = fl_z_wage_rho ; val = 0.8
pos = 24 ; key = fl_z_wage_sig ; val = 0.2
pos = 25 ; key = it_a_n ; val = 750
pos = 26 ; key = it_maxiter_dist ; val = 1000
pos = 27 ; key = it_maxiter_val ; val = 1000
pos = 28 ; key = it_tol_pol_nochange ; val = 25
pos = 29 ; key = it_trans_power_dist ; val = 1000
pos = 30 ; key = it_z_n ; val = 75
pos = 31 ; key = it_z_wage_n ; val = 15
pos = 32 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 33 ; key = st_model ; val = abz
pos = 34 ; key = st_z_r_borr_drv_ele_type ; val = unif
pos = 35 ; key = st_z_r_borr_drv_prb_type ; val = poiss
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i     idx    value 
                              __    ___    ______

    bl_b_is_principle          1     1          1
    bl_default                 2     2          1
    bl_loglin                  3     3          0
    fl_a_max                   4     4         50
    fl_a_min                   5     5          0
    fl_b_bd                    6     6        -20
    fl_beta                    7     7       0.94
    fl_c_min                   8     8       0.01
    fl_crra                    9     9        1.5
    fl_default_aprime         10    10          0
    fl_loglin_threshold       11    11          1
    fl_nan_replace            12    12     -99999
    fl_r_save                 13    13      0.025
    fl_tol_dist               14    14      1e-05
    fl_tol_pol                15    15      1e-05
    fl_tol_val                16    16      1e-05
    fl_w                      17    17       1.28
    fl_z_r_borr_max           18    18      0.095
    fl_z_r_borr_min           19    19      0.025
    fl_z_r_borr_n             20    20          5
    fl_z_r_borr_poiss_mean    21    21         10
    fl_z_wage_mu              22    22          0
    fl_z_wage_rho             23    23        0.8
    fl_z_wage_sig             24    24        0.2
    it_a_n                    25    25        750
    it_maxiter_dist           26    26       1000
    it_maxiter_val            27    27       1000
    it_tol_pol_nochange       28    28         25
    it_trans_power_dist       29    29       1000
    it_z_n                    30    30         75
    it_z_wage_n               31    31         15

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                     i    idx
                                     _    ___

    st_analytical_stationary_type    1    32 
    st_model                         2    33 
    st_z_r_borr_drv_ele_type         3    34 
    st_z_r_borr_drv_prb_type         4    35 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: FUNC_MAP
----------------------------------------
  Map with properties:

        Count: 8
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = f_coh ; val = @(fl_r_borr,z,b)(z*fl_w+(b.*(1+fl_r_save).*(b&gt;0)+b.*(1+fl_r_borr).*(b&lt;=0)))
pos = 2 ; key = f_cons ; val = @(z,b,bprime)(f_coh(z,b)-bprime)
pos = 3 ; key = f_cons_checkcmin ; val = @(fl_r_borr,z,b,bprime)((f_coh(fl_r_borr,z,b)-bprime).*((f_coh(fl_r_borr,z,b)-bprime)&gt;=fl_c_min)+fl_c_min.*((f_coh(fl_r_borr,z,b)-bprime)&lt;fl_c_min))
pos = 4 ; key = f_cons_coh ; val = @(coh,bprime)(coh-bprime)
pos = 5 ; key = f_inc ; val = @(fl_r_borr,z,b)(z*fl_w+(b.*(fl_r_save).*(b&gt;0)+b.*(fl_r_borr).*(b&lt;=0)))
pos = 6 ; key = f_util_crra ; val = @(c)(((c).^(1-fl_crra)-1)./(1-fl_crra))
pos = 7 ; key = f_util_log ; val = @(c)log(c)
pos = 8 ; key = f_util_standin ; val = @(fl_r_borr,z,b)f_util_log(f_coh(fl_r_borr,z,b).*(f_coh(fl_r_borr,z,b)&gt;0)+fl_c_min.*(f_coh(fl_r_borr,z,b)&lt;=0))
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                        i    idx    xFunction
                        _    ___    _________

    f_coh               1     1         1    
    f_cons              2     2         2    
    f_cons_checkcmin    3     3         3    
    f_cons_coh          4     4         4    
    f_inc               5     5         5    
    f_util_crra         6     6         6    
    f_util_log          7     7         7    
    f_util_standin      8     8         8    

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: RESULT_MAP
----------------------------------------
  Map with properties:

        Count: 9
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = ar_pol_diff_norm ;rown= 125 ,coln= 1
ar_pol_diff_norm :mu= 112.0079 ,sd= 607.1645 ,min= 0 ,max= 4830.2858
                   zi_1_c1
                   _______

    zi_1_R1         4490.1
    zi_2_R2         4830.3
    zi_63_R63      0.80854
    zi_124_r124          0
    zi_125_r125          0

pos = 2 ; key = ar_st_pol_names ; val = cl_mt_pol_a cl_mt_coh cl_mt_pol_c
pos = 3 ; key = ar_val_diff_norm ;rown= 125 ,coln= 1
ar_val_diff_norm :mu= 25.6719 ,sd= 67.1652 ,min= 0.055621 ,max= 418.7119
                   zi_1_c1 
                   ________

    zi_1_R1          418.71
    zi_2_R2          364.35
    zi_63_R63        2.2794
    zi_124_r124     0.05917
    zi_125_r125    0.055621

pos = 4 ; key = cl_mt_coh ;rown= 750 ,coln= 75
cl_mt_coh :mu= 16.7271 ,sd= 20.8998 ,min= -21.4553 ,max= 54.5358
                   zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
                   _______    _______    _________    _________    _________

    zi_1_R1        -20.055    -19.987     -19.991      -19.052      -18.614 
    zi_2_R2         -19.96    -19.891     -19.892      -18.949      -18.512 
    zi_375_r375     15.772      15.84      16.536       18.175       18.613 
    zi_749_r749     51.599     51.667      52.363       54.003        54.44 
    zi_750_r750     51.695     51.763      52.459       54.098       54.536 

pos = 5 ; key = cl_mt_pol_a ;rown= 750 ,coln= 75
cl_mt_pol_a :mu= 14.2969 ,sd= 19.5498 ,min= -20 ,max= 49.5327
                   zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
                   _______    _______    _________    _________    _________

    zi_1_R1             0          0           0          -20       -19.626 
    zi_2_R2             0          0           0          -20       -19.533 
    zi_375_r375    13.458     13.551      14.019       15.234        15.607 
    zi_749_r749     47.29      47.29      47.757       49.065        49.439 
    zi_750_r750    47.383     47.383       47.85       49.159        49.533 

pos = 6 ; key = cl_mt_pol_c ;rown= 750 ,coln= 75
cl_mt_pol_c :mu= 2.5726 ,sd= 1.2129 ,min= 0.01 ,max= 5.0031
                   zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
                   _______    _______    _________    _________    _________

    zi_1_R1          0.01       0.01        0.01       0.94838       1.012  
    zi_2_R2          0.01       0.01        0.01        1.0507      1.0208  
    zi_375_r375    2.3138     2.2887      2.5172        2.9418      3.0054  
    zi_749_r749    4.3092     4.3775       4.606        4.9372      5.0007  
    zi_750_r750    4.3115     4.3798      4.6083        4.9395      5.0031  

pos = 7 ; key = mt_pol_idx ;rown= 750 ,coln= 75
mt_pol_idx :mu= 367.977 ,sd= 209.1831 ,min= 1 ,max= 745
                   zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
                   _______    _______    _________    _________    _________

    zi_1_R1          215        215         215            1            5   
    zi_2_R2          215        215         215            1            6   
    zi_375_r375      359        360         365          378          382   
    zi_749_r749      721        721         726          740          744   
    zi_750_r750      722        722         727          741          745   

pos = 8 ; key = mt_pol_perc_change ;rown= 125 ,coln= 75
mt_pol_perc_change :mu= 0.20379 ,sd= 0.33392 ,min= 0 ,max= 1
                   zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
                   _______    _______    _________    _________    _________

    zi_1_R1              1         1             1           1           1  
    zi_2_R2        0.99867         1       0.99867           1           1  
    zi_63_R63        0.012     0.008     0.0093333    0.018667       0.016  
    zi_124_r124          0         0             0           0           0  
    zi_125_r125          0         0             0           0           0  

pos = 9 ; key = mt_val ;rown= 750 ,coln= 75
mt_val :mu= 5.54 ,sd= 8.6064 ,min= -17.7995 ,max= 15.025
                   zi_1_C1    zi_2_C2    zi_38_c38    zi_74_c74    zi_75_c75
                   _______    _______    _________    _________    _________

    zi_1_R1         -17.8     -17.487     -15.242      -12.309       -11.41 
    zi_2_R2         -17.8     -17.487     -15.242      -12.207      -11.313 
    zi_375_r375    7.6387      7.7628      8.7516       10.114       10.363 
    zi_749_r749    13.844      13.893      14.295         14.9       15.016 
    zi_750_r750    13.855      13.903      14.305       14.909       15.025 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i    idx    rowN    colN     mean        std        min        max  
                          _    ___    ____    ____    _______    _______    ________    ______

    ar_pol_diff_norm      1     1     125       1      112.01     607.16           0    4830.3
    ar_val_diff_norm      2     3     125       1      25.672     67.165    0.055621    418.71
    cl_mt_coh             3     4     750      75      16.727       20.9     -21.455    54.536
    cl_mt_pol_a           4     5     750      75      14.297      19.55         -20    49.533
    cl_mt_pol_c           5     6     750      75      2.5726     1.2129        0.01    5.0031
    mt_pol_idx            6     7     750      75      367.98     209.18           1       745
    mt_pol_perc_change    7     8     125      75     0.20379    0.33392           0         1
    mt_val                8     9     750      75        5.54     8.6064       -17.8    15.025

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                       i    idx
                       _    ___

    ar_st_pol_names    1     2 

</pre><img vspace="5" hspace="5" src="ff_abz_ds_wrapper_01.png" alt=""> <img vspace="5" hspace="5" src="ff_abz_ds_wrapper_02.png" alt=""> <h2 id="8">Derive Distribution</h2><p>Note that the <b>pYisMINY</b> statistics show the proportion of households at the minimum borrowing bound, where default takes place, and shows therefore the fraction of households defaulting.</p><pre class="codeinput"><span class="keyword">if</span> (strcmp(st_analytical_stationary_type, <span class="string">'loop'</span>))

    result_map = ff_az_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'vector'</span>))

    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'eigenvector'</span>))

    result_map = ff_az_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">end</span>
</pre><pre class="codeoutput">Elapsed time is 7.142550 seconds.
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_a
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
   -0.7175

fl_choice_sd
    3.4938

fl_choice_coefofvar
   -4.8694

fl_choice_prob_zero
    0.0530

fl_choice_prob_below_zero
    0.4833

fl_choice_prob_above_zero
    0.4638

fl_choice_prob_max
  -1.1977e-34

tb_disc_cumu
    cl_mt_pol_aDiscreteVal    cl_mt_pol_aDiscreteValProbMass      CDF      cumsumFrac
    ______________________    ______________________________    _______    __________

               -20                        0.004358               0.4358     0.12148  
           -19.907                      3.4682e-06              0.43614     0.12157  
           -19.813                      2.3892e-06              0.43638     0.12164  
           -19.626                      1.6054e-06              0.43654     0.12168  
           -19.533                      1.8102e-06              0.43672     0.12173  
           -19.439                      1.7353e-07              0.43674     0.12174  
           -19.346                      6.2914e-06              0.43737     0.12191  
           -19.252                      4.7741e-06              0.43785     0.12203  
           -19.159                      2.1559e-05                 0.44     0.12261  
           -19.065                      1.3924e-05               0.4414     0.12298  

    cl_mt_pol_aDiscreteVal    cl_mt_pol_aDiscreteValProbMass    CDF    cumsumFrac
    ______________________    ______________________________    ___    __________

            48.692                      7.1719e-34              100        1     
            48.785                      2.4193e-34              100        1     
            48.879                     -4.1627e-34              100        1     
            48.972                      6.5021e-34              100        1     
            49.065                      7.4993e-35              100        1     
            49.159                     -1.8334e-35              100        1     
            49.252                     -8.2818e-34              100        1     
            49.346                     -5.1321e-34              100        1     
            49.439                     -8.9269e-34              100        1     
            49.533                     -1.1977e-34              100        1     

tb_prob_drv
    percentiles    cl_mt_pol_aDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ______________________________________    ________________________________

        0.1                            -20                               0.12148             
          1                        -16.916                               0.26264             
          5                        -7.6636                               0.91133             
         10                        -3.5514                                1.2785             
         15                        -2.1495                                1.4694             
         20                        -1.4019                                  1.59             
         25                       -0.93458                                1.6641             
         35                       -0.37383                                1.7513             
         50                              0                                 1.781             
         65                        0.28037                                1.7525             
         75                        0.65421                                1.6858             
         80                        0.93458                                1.6299             
         85                         1.3084                                1.5456             
         90                         1.8692                                1.4372             
         95                         2.8037                                1.2762             
         99                         4.8598                                1.0844             
       99.9                         7.5701                                 1.012             

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_coh
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    0.4655

fl_choice_sd
    3.8937

fl_choice_coefofvar
    8.3637

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
    0.2456

fl_choice_prob_above_zero
    0.7544

fl_choice_prob_max
  -1.1977e-34

tb_disc_cumu
    cl_mt_cohDiscreteVal    cl_mt_cohDiscreteValProbMass       CDF       cumsumFrac
    ____________________    ____________________________    _________    __________

          -21.455                    1.5096e-05             0.0015096    -0.0006957
          -21.387                    3.5852e-05             0.0050947    -0.0023427
          -21.353                    6.5378e-20             0.0050947    -0.0023427
          -21.308                    8.8289e-05              0.013924    -0.0063838
          -21.285                    1.1774e-17              0.013924    -0.0063838
          -21.251                    5.3673e-22              0.013924    -0.0063838
          -21.217                    0.00017897              0.031821      -0.01454
          -21.206                    1.2886e-15              0.031821      -0.01454
          -21.182                     1.446e-19              0.031821      -0.01454
          -21.148                   -1.6965e-34              0.031821      -0.01454

    cl_mt_cohDiscreteVal    cl_mt_cohDiscreteValProbMass    CDF    cumsumFrac
    ____________________    ____________________________    ___    __________

           53.907                   -4.8071e-34             100        1     
           53.961                   -2.4627e-35             100        1     
           54.003                    9.9619e-35             100        1     
           54.057                   -4.8186e-34             100        1     
           54.098                    4.6353e-34             100        1     
           54.153                   -3.9489e-34             100        1     
           54.248                   -4.3329e-34             100        1     
           54.344                   -5.1321e-34             100        1     
            54.44                   -8.9269e-34             100        1     
           54.536                   -1.1977e-34             100        1     

tb_prob_drv
    percentiles    cl_mt_cohDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ____________________________________    ________________________________

        0.1                       -20.992                             -0.048191            
          1                       -17.103                              -0.41434            
          5                       -7.1924                               -1.3986            
         10                       -2.8014                               -1.8894            
         15                       -1.2804                               -2.0981            
         20                      -0.46265                               -2.1892            
         25                      0.064028                               -2.2097            
         35                       0.64506                               -2.1274            
         50                        1.1437                               -1.8318            
         65                        1.6877                               -1.3648            
         75                        2.1667                              -0.96308            
         80                        2.5237                              -0.71064            
         85                        2.9271                              -0.42414            
         90                        3.5774                             -0.073568            
         95                        4.5782                               0.35228            
         99                        6.9505                               0.82312            
       99.9                        9.9201                               0.97634            

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_c
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    1.2713

fl_choice_sd
    0.3200

fl_choice_coefofvar
    0.2517

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
  -1.1977e-34

tb_disc_cumu
    cl_mt_pol_cDiscreteVal    cl_mt_pol_cDiscreteValProbMass      CDF      cumsumFrac
    ______________________    ______________________________    _______    __________

              0.01                       0.0042782              0.42782    3.3652e-05
           0.32786                      1.3701e-25              0.42782    3.3652e-05
            0.3344                      1.3549e-16              0.42782    3.3652e-05
           0.34498                      7.3802e-19              0.42782    3.3652e-05
           0.35086                      6.0084e-11              0.42782    3.3652e-05
           0.35269                      3.8109e-08              0.42782    3.3662e-05
           0.37278                      3.3977e-11              0.42782    3.3662e-05
           0.37412                      1.7273e-21              0.42782    3.3662e-05
           0.37421                      1.0489e-12              0.42782    3.3662e-05
           0.37421                      5.6084e-18              0.42782    3.3662e-05

    cl_mt_pol_cDiscreteVal    cl_mt_pol_cDiscreteValProbMass    CDF    cumsumFrac
    ______________________    ______________________________    ___    __________

            4.8956                     -2.4627e-35              100        1     
            4.8979                     -4.8186e-34              100        1     
            4.9003                     -3.9489e-34              100        1     
            4.9348                     -4.8071e-34              100        1     
            4.9372                      9.9619e-35              100        1     
            4.9395                      4.6353e-34              100        1     
            4.9961                     -4.3329e-34              100        1     
            4.9984                     -5.1321e-34              100        1     
            5.0007                     -8.9269e-34              100        1     
            5.0031                     -1.1977e-34              100        1     

tb_prob_drv
    percentiles    cl_mt_pol_cDiscreteValPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ______________________________________    ________________________________

        0.1                          0.01                               3.3652e-05           
          1                       0.87296                                0.0039813           
          5                       0.91048                                 0.032343           
         10                       0.93636                                 0.069016           
         15                       0.95644                                  0.10558           
         20                       0.97436                                  0.14517           
         25                       0.99459                                  0.18353           
         35                        1.0734                                  0.26301           
         50                        1.2088                                  0.40344           
         65                        1.3991                                  0.55589           
         75                        1.5159                                  0.66429           
         80                        1.5384                                  0.72545           
         85                        1.6374                                   0.7869           
         90                         1.699                                  0.85146           
         95                        1.8337                                  0.92147           
         99                        2.0907                                   0.9828           
       99.9                        2.3687                                  0.99809           

xxx PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
xxx Variance and Covariance xxx
tb_outcomes_covvar: variance correlation
    OriginalVariableNames    cl_mt_pol_a     cl_mt_coh     cl_mt_pol_c
    _____________________    ___________    ___________    ___________

    'mean'                       -0.7175        0.46554         1.2713
    'sd'                          3.4938         3.8937        0.31999
    'coefofvar'                  -4.8694         8.3637         0.2517
    'min'                            -20        -21.455           0.01
    'max'                         49.533         54.536         5.0031
    'pYis0'                     0.052979              0              0
    'pYls0'                      0.48326        0.24558              0
    'pYgr0'                      0.46376        0.75442              1
    'pYisMINY'                  0.004358     1.5096e-05      0.0042782
    'pYisMAXY'               -1.1977e-34    -1.1977e-34    -1.1977e-34
    'p0_1'                           -20        -20.992           0.01
    'p1'                         -16.916        -17.103        0.87296
    'p5'                         -7.6636        -7.1924        0.91048
    'p10'                        -3.5514        -2.8014        0.93636
    'p15'                        -2.1495        -1.2804        0.95644
    'p20'                        -1.4019       -0.46265        0.97436
    'p25'                       -0.93458       0.064028        0.99459
    'p35'                       -0.37383        0.64506         1.0734
    'p50'                              0         1.1437         1.2088
    'p65'                        0.28037         1.6877         1.3991
    'p75'                        0.65421         2.1667         1.5159
    'p80'                        0.93458         2.5237         1.5384
    'p85'                         1.3084         2.9271         1.6374
    'p90'                         1.8692         3.5774          1.699
    'p95'                         2.8037         4.5782         1.8337
    'p99'                         4.8598         6.9505         2.0907
    'p99_9'                       7.5701         9.9201         2.3687
    'fl_cov_cl_mt_pol_a'          12.207         12.614        0.47086
    'fl_cor_cl_mt_pol_a'               1        0.92726        0.42116
    'fl_cov_cl_mt_coh'            12.614         15.161        0.68458
    'fl_cor_cl_mt_coh'           0.92726              1        0.54945
    'fl_cov_cl_mt_pol_c'         0.47086        0.68458         0.1024
    'fl_cor_cl_mt_pol_c'         0.42116        0.54945              1
    'fracByP0_1'                 0.12148      -0.048191     3.3652e-05
    'fracByP1'                   0.26264       -0.41434      0.0039813
    'fracByP5'                   0.91133        -1.3986       0.032343
    'fracByP10'                   1.2785        -1.8894       0.069016
    'fracByP15'                   1.4694        -2.0981        0.10558
    'fracByP20'                     1.59        -2.1892        0.14517
    'fracByP25'                   1.6641        -2.2097        0.18353
    'fracByP35'                   1.7513        -2.1274        0.26301
    'fracByP50'                    1.781        -1.8318        0.40344
    'fracByP65'                   1.7525        -1.3648        0.55589
    'fracByP75'                   1.6858       -0.96308        0.66429
    'fracByP80'                   1.6299       -0.71064        0.72545
    'fracByP85'                   1.5456       -0.42414         0.7869
    'fracByP90'                   1.4372      -0.073568        0.85146
    'fracByP95'                   1.2762        0.35228        0.92147
    'fracByP99'                   1.0844        0.82312         0.9828
    'fracByP99_9'                  1.012        0.97634        0.99809

</pre><h2 id="9">End Profiler and Timer</h2><p>End Timer</p><pre class="codeinput"><span class="keyword">if</span> (bl_time)
    toc;
<span class="keyword">end</span>

<span class="comment">% End Profile</span>
<span class="keyword">if</span> (it_param_set == 7)
    profile <span class="string">off</span>
    profile <span class="string">viewer</span>
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile(<span class="string">'info'</span>), strcat(st_profile_path, st_file_name));
<span class="keyword">end</span>
</pre><pre class="codeoutput">Elapsed time is 7.602801 seconds.
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">
ans = 

  Map with properties:

        Count: 11
      KeyType: char
    ValueType: any

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Derive Distributions for Save + Borrow One Asset (Wrapper)
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*

%%
function [result_map] = ff_abz_ds_wrapper(varargin)
%% FF_ABZ_DS_WRAPPER finds the stationary asset distributions
% This is a warpper function. Note that when invoked by *abz*, there are
% two shocks, one for wage, another for the borrowing interest rate.
%
% @include
%
% * <https://fanwangecon.github.io/CodeDynaAsset/m_abz/paramfunc/html/ffs_abz_set_default_param.html ffs_abz_set_default_param>
% * <https://fanwangecon.github.io/CodeDynaAsset/m_abz/paramfunc/html/ffs_abz_get_funcgrid.html ffs_abz_get_funcgrid>
% * save + borr optimized-vectorized: <https://fanwangecon.github.io/CodeDynaAsset/m_abz/solve/html/ff_abz_vf_vecsv.html ff_abz_vf_vecsv>
% * derive distribution f(y'(y,z)) one asset *loop*: <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds.html ff_az_ds>
% * derive distribution f(y'({y},z)) or f(y'({x,y},z)) *vectorized*: <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vec.html ff_az_ds_vec>
% * derive distribution f(y'({y},z)) or f(y'({x,y},z)) *semi-analytical*: <https://fanwangecon.github.io/CodeDynaAsset/m_az/solve/html/ff_az_ds_vecsv.html ff_az_ds_vecsv>
%

%% Default
% # it_subset = 5 is basic invoke quick test
% # it_subset = 6 is invoke full test
% # it_subset = 7 is profiling invoke
% # it_subset = 8 is matlab publish
% # it_subset = 9 is invoke operational (only final stats) and coh graph

it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_abz_set_default_param(it_param_set);

% Note: param_map and support_map can be adjusted here or outside to override defaults
% param_map('it_a_n') = 750;
% param_map('fl_z_r_borr_n') = 5;
% param_map('it_z_wage_n') = 15;
% param_map('it_z_n') = param_map('it_z_wage_n') * param_map('fl_z_r_borr_n');
% param_map('fl_r_save') = 0.025;

% These parameters below for comparison with abz_fibs model
% param_map('fl_r_save') = 0.025;
% param_map('fl_c_min') = 0.02;
% param_map('fl_z_r_borr_poiss_mean') = 20;
% param_map('fl_z_r_borr_max') = 0.035;
% param_map('fl_z_r_borr_min') = 0.035;
% param_map('fl_z_r_borr_n') = 1;
% param_map('it_z_n') = param_map('it_z_wage_n') * param_map('fl_z_r_borr_n');
% param_map('bl_default') = true;

% param_map('st_analytical_stationary_type') = 'loop';
% param_map('st_analytical_stationary_type') = 'vector';
param_map('st_analytical_stationary_type') = 'eigenvector';

% get armt and func map
[armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override); % 1 for override
default_params = {param_map support_map armt_map func_map};

%% Parse Parameters 1

% if varargin only has param_map and support_map,
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
if params_len >= 1 && params_len <= 2
    % If override param_map, re-generate armt and func if they are not
    % provided
    bl_input_override = true;
    [armt_map, func_map] = ffs_abz_get_funcgrid(param_map, support_map, bl_input_override);
else
    % Override all
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
end

% if profile, profile DP + Dist here
support_map('bl_profile_dist') = false;

% append function name
st_func_name = 'ff_abz_ds_wrapper';
support_map('st_profile_name_main') = [st_func_name support_map('st_profile_name_main')];
support_map('st_mat_name_main') = [st_func_name support_map('st_mat_name_main')];
support_map('st_img_name_main') = [st_func_name support_map('st_img_name_main')];

%% Parse Parameters

% param_map
params_group = values(param_map, {'st_analytical_stationary_type'});
[st_analytical_stationary_type] = params_group{:};

% support_map
params_group = values(support_map, ...
    {'st_profile_path', 'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix','bl_time'});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};

%% Start Profiler and Timer
% Start Profile
if (it_param_set == 7)
    close all;
    profile off;
    profile on;
end

% Start Timer
if (bl_time)
    tic;
end

%% Solve DP

bl_input_override = true;
result_map = ff_abz_vf_vecsv(param_map, support_map, armt_map, func_map);

%% Derive Distribution
% Note that the *pYisMINY* statistics show the
% proportion of households at the minimum borrowing bound, where default
% takes place, and shows therefore the fraction of households defaulting. 

if (strcmp(st_analytical_stationary_type, 'loop'))
    
    result_map = ff_az_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
elseif (strcmp(st_analytical_stationary_type, 'vector'))
    
    result_map = ff_az_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
elseif (strcmp(st_analytical_stationary_type, 'eigenvector'))
    
    result_map = ff_az_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
end

%% End Profiler and Timer
% End Timer
if (bl_time)
    toc;
end

% End Profile
if (it_param_set == 7)
    profile off
    profile viewer
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile('info'), strcat(st_profile_path, st_file_name));
end
end

##### SOURCE END #####
--></body></html>