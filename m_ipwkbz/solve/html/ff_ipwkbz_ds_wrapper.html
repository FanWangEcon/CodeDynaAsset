
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Derive Distributions for Risky + Safe Asset (Save + Borr) Interpolated-Percentage (Wrapper)</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-13"><meta name="DC.source" content="ff_ipwkbz_ds_wrapper.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Derive Distributions for Risky + Safe Asset (Save + Borr) Interpolated-Percentage (Wrapper)</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">FF_IPWKBZ_DS_WRAPPER finds the stationary asset distributions</a></li><li><a href="#3">Default</a></li><li><a href="#4">Parse Parameters 1</a></li><li><a href="#5">Parse Parameters</a></li><li><a href="#6">Start Profiler and Timer</a></li><li><a href="#7">Solve DP</a></li><li><a href="#8">Derive Distribution</a></li><li><a href="#9">End Profiler and Timer</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> [result_map] = ff_ipwkbz_ds_wrapper(varargin)
</pre><h2 id="2">FF_IPWKBZ_DS_WRAPPER finds the stationary asset distributions</h2><p>This is a warpper function.</p><h2 id="3">Default</h2><div><ol><li>it_subset = 5 is basic invoke quick test</li><li>it_subset = 6 is invoke full test</li><li>it_subset = 7 is profiling invoke</li><li>it_subset = 8 is matlab publish</li><li>it_subset = 9 is invoke operational (only final stats) and coh graph</li></ol></div><pre class="codeinput">it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_ipwkbz_set_default_param(it_param_set);

<span class="comment">% parameters can be set inside ffs_ipwkz_set_default_param or updated here</span>
<span class="comment">% param_map('it_w_perc_n') = 50;</span>
<span class="comment">% param_map('it_ak_perc_n') = param_map('it_w_perc_n');</span>
<span class="comment">% param_map('it_z_n') = 15;</span>
<span class="comment">% param_map('fl_coh_interp_grid_gap') = 0.025;</span>
<span class="comment">% param_map('it_c_interp_grid_gap') = 0.001;</span>
<span class="comment">% param_map('fl_w_interp_grid_gap') = 0.25;</span>
<span class="comment">% param_map('it_w_perc_n') = 100;</span>
<span class="comment">% param_map('it_ak_perc_n') = param_map('it_w_perc_n');</span>
<span class="comment">% param_map('it_z_n') = 11;</span>
<span class="comment">% param_map('fl_coh_interp_grid_gap') = 0.1;</span>
<span class="comment">% param_map('it_c_interp_grid_gap') = 10^-4;</span>
<span class="comment">% param_map('fl_w_interp_grid_gap') = 0.1;</span>
<span class="comment">% param_map('it_w_perc_n') = 100;</span>
<span class="comment">% param_map('fl_r_save') = 0.025;</span>
<span class="comment">% param_map('fl_r_borr') = 0.025;</span>

<span class="comment">% These parameters below for comparison with abz_fibs model</span>
<span class="comment">% param_map('fl_r_save') = 0.025;</span>
<span class="comment">% param_map('fl_r_borr') = 0.095;</span>
<span class="comment">% param_map('fl_c_min') = 0.02;</span>

<span class="comment">% param_map('st_analytical_stationary_type') = 'loop';</span>
<span class="comment">% param_map('st_analytical_stationary_type') = 'vector';</span>
param_map(<span class="string">'st_analytical_stationary_type'</span>) = <span class="string">'eigenvector'</span>;

<span class="comment">% get armt and func map</span>
[armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override); <span class="comment">% 1 for override</span>
default_params = {param_map support_map armt_map func_map};
</pre><h2 id="4">Parse Parameters 1</h2><pre class="codeinput"><span class="comment">% if varargin only has param_map and support_map,</span>
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
<span class="keyword">if</span> params_len &gt;= 1 &amp;&amp; params_len &lt;= 2
    <span class="comment">% If override param_map, re-generate armt and func if they are not</span>
    <span class="comment">% provided</span>
    bl_input_override = true;
    [armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override);
<span class="keyword">else</span>
    <span class="comment">% Override all</span>
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
<span class="keyword">end</span>

<span class="comment">% if profile, profile DP + Dist here</span>
support_map(<span class="string">'bl_profile_dist'</span>) = false;

<span class="comment">% append function name</span>
st_func_name = <span class="string">'ff_ipwkbz_ds_wrapper'</span>;
support_map(<span class="string">'st_profile_name_main'</span>) = [st_func_name support_map(<span class="string">'st_profile_name_main'</span>)];
support_map(<span class="string">'st_mat_name_main'</span>) = [st_func_name support_map(<span class="string">'st_mat_name_main'</span>)];
support_map(<span class="string">'st_img_name_main'</span>) = [st_func_name support_map(<span class="string">'st_img_name_main'</span>)];
</pre><h2 id="5">Parse Parameters</h2><pre class="codeinput"><span class="comment">% param_map</span>
params_group = values(param_map, {<span class="string">'st_analytical_stationary_type'</span>});
[st_analytical_stationary_type] = params_group{:};

<span class="comment">% support_map</span>
params_group = values(support_map, <span class="keyword">...</span>
    {<span class="string">'st_profile_path'</span>, <span class="string">'st_profile_prefix'</span>, <span class="string">'st_profile_name_main'</span>, <span class="string">'st_profile_suffix'</span>,<span class="string">'bl_time'</span>});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};
</pre><h2 id="6">Start Profiler and Timer</h2><p>Start Profile</p><pre class="codeinput"><span class="keyword">if</span> (it_param_set == 7)
    close <span class="string">all</span>;
    profile <span class="string">off</span>;
    profile <span class="string">on</span>;
<span class="keyword">end</span>

<span class="comment">% Start Timer</span>
<span class="keyword">if</span> (bl_time)
    tic;
<span class="keyword">end</span>
</pre><h2 id="7">Solve DP</h2><pre class="codeinput">bl_input_override = true;
result_map = ff_ipwkbz_vf_vecsv(param_map, support_map, armt_map, func_map);
</pre><pre class="codeoutput">----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: SUPPORT_MAP
----------------------------------------
  Map with properties:

        Count: 42
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = bl_display ; val = false
pos = 2 ; key = bl_display_defparam ; val = true
pos = 3 ; key = bl_display_dist ; val = false
pos = 4 ; key = bl_display_evf ; val = false
pos = 5 ; key = bl_display_final ; val = false
pos = 6 ; key = bl_display_final_dist ; val = true
pos = 7 ; key = bl_display_final_dist_detail ; val = true
pos = 8 ; key = bl_display_funcgrids ; val = false
pos = 9 ; key = bl_graph ; val = true
pos = 10 ; key = bl_graph_coh_t_coh ; val = true
pos = 11 ; key = bl_graph_evf ; val = false
pos = 12 ; key = bl_graph_funcgrids ; val = false
pos = 13 ; key = bl_graph_funcgrids_detail ; val = false
pos = 14 ; key = bl_graph_onebyones ; val = true
pos = 15 ; key = bl_graph_pol_lvl ; val = false
pos = 16 ; key = bl_graph_pol_pct ; val = false
pos = 17 ; key = bl_graph_val ; val = false
pos = 18 ; key = bl_img_save ; val = false
pos = 19 ; key = bl_mat ; val = false
pos = 20 ; key = bl_post ; val = true
pos = 21 ; key = bl_profile ; val = false
pos = 22 ; key = bl_profile_dist ; val = false
pos = 23 ; key = bl_time ; val = false
pos = 29 ; key = st_img_name_main ; val = ff_ipwkbz_vf_vecsvff_ipwkbz_ds_wrapper_default
pos = 30 ; key = st_img_path ; val = C:/Users/fan/CodeDynaAsset//m_ipwkbz//solve/img/
pos = 31 ; key = st_img_prefix ; val = 
pos = 32 ; key = st_img_suffix ; val = _p8.png
pos = 33 ; key = st_mat_name_main ; val = ff_ipwkbz_vf_vecsvff_ipwkbz_ds_wrapper_default
pos = 34 ; key = st_mat_path ; val = C:/Users/fan/CodeDynaAsset//m_ipwkbz//solve/mat/
pos = 35 ; key = st_mat_prefix ; val = 
pos = 36 ; key = st_mat_suffix ; val = _p8
pos = 37 ; key = st_matimg_path_root ; val = C:/Users/fan/CodeDynaAsset//m_ipwkbz/
pos = 38 ; key = st_profile_name_main ; val = ff_ipwkbz_vf_vecsvff_ipwkbz_ds_wrapper_default
pos = 39 ; key = st_profile_path ; val = C:/Users/fan/CodeDynaAsset//m_ipwkbz//solve/profile/
pos = 40 ; key = st_profile_prefix ; val = 
pos = 41 ; key = st_profile_suffix ; val = _p8
pos = 42 ; key = st_title_prefix ; val = 
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                 i    idx    value
                                 _    ___    _____

    it_display_every             1    24       20 
    it_display_final_colmax      2    25       12 
    it_display_final_rowmax      3    26      100 
    it_display_summmat_colmax    4    27        5 
    it_display_summmat_rowmax    5    28        5 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                    i     idx
                                    __    ___

    bl_display                       1     1 
    bl_display_defparam              2     2 
    bl_display_dist                  3     3 
    bl_display_evf                   4     4 
    bl_display_final                 5     5 
    bl_display_final_dist            6     6 
    bl_display_final_dist_detail     7     7 
    bl_display_funcgrids             8     8 
    bl_graph                         9     9 
    bl_graph_coh_t_coh              10    10 
    bl_graph_evf                    11    11 
    bl_graph_funcgrids              12    12 
    bl_graph_funcgrids_detail       13    13 
    bl_graph_onebyones              14    14 
    bl_graph_pol_lvl                15    15 
    bl_graph_pol_pct                16    16 
    bl_graph_val                    17    17 
    bl_img_save                     18    18 
    bl_mat                          19    19 
    bl_post                         20    20 
    bl_profile                      21    21 
    bl_profile_dist                 22    22 
    bl_time                         23    23 
    st_img_name_main                24    29 
    st_img_path                     25    30 
    st_img_prefix                   26    31 
    st_img_suffix                   27    32 
    st_mat_name_main                28    33 
    st_mat_path                     29    34 
    st_mat_prefix                   30    35 
    st_mat_suffix                   31    36 
    st_matimg_path_root             32    37 
    st_profile_name_main            33    38 
    st_profile_path                 34    39 
    st_profile_prefix               35    40 
    st_profile_suffix               36    41 
    st_title_prefix                 37    42 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: ARMT_MAP
----------------------------------------
  Map with properties:

        Count: 18
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = ar_a_meshk ;rown= 772 ,coln= 1
ar_a_meshk :mu= 18.6145 ,sd= 22.347 ,min= -20 ,max= 57.2773
                   zi_1_c1
                   _______

    zi_1_R1           -20 
    zi_2_R2         -19.9 
    zi_386_r386    18.538 
    zi_771_r771    57.177 
    zi_772_r772    57.277 

pos = 2 ; key = ar_ak_perc ;rown= 1 ,coln= 50
ar_ak_perc :mu= 0.5 ,sd= 0.2969 ,min= 0.001 ,max= 0.999
               zi_1_C1    zi_2_C2     zi_25_c25    zi_49_c49    zi_50_c50
               _______    ________    _________    _________    _________

    zi_1_r1     0.001     0.021367     0.48982      0.97863       0.999  

pos = 3 ; key = ar_interp_c_grid ;rown= 1 ,coln= 772572
ar_interp_c_grid :mu= 38.6486 ,sd= 22.3023 ,min= 0.02 ,max= 77.2773
               zi_1_C1    zi_2_C2    zi_386286_c386286    zi_772571_c772571    zi_772572_c772572
               _______    _______    _________________    _________________    _________________

    zi_1_r1     0.02      0.0201          38.649               77.277               77.277      

pos = 4 ; key = ar_interp_coh_grid ;rown= 1 ,coln= 772
ar_interp_coh_grid :mu= 18.6145 ,sd= 22.347 ,min= -20 ,max= 57.2773
               zi_1_C1    zi_2_C2    zi_386_c386    zi_771_c771    zi_772_c772
               _______    _______    ___________    ___________    ___________

    zi_1_r1      -20       -19.9       18.538         57.177         57.277   

pos = 5 ; key = ar_k_mesha ;rown= 772 ,coln= 1
ar_k_mesha :mu= 0 ,sd= 0 ,min= 0 ,max= 0
                   zi_1_c1
                   _______

    zi_1_R1           0   
    zi_2_R2           0   
    zi_386_r386       0   
    zi_771_r771       0   
    zi_772_r772       0   

pos = 6 ; key = ar_stationary ;rown= 1 ,coln= 15
ar_stationary :mu= 0.066667 ,sd= 0.060897 ,min= 0.0027089 ,max= 0.16757
               zi_1_C1     zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
               ________    _______    _______    _________    _________

    zi_1_r1    0.002709    0.00695    0.16757     0.00695     0.002709 

pos = 7 ; key = ar_w_level ;rown= 1 ,coln= 700
ar_w_level :mu= 14.9786 ,sd= 20.2441 ,min= -20 ,max= 50
               zi_1_C1    zi_2_C2    zi_350_c350    zi_699_c699    zi_700_c700
               _______    _______    ___________    ___________    ___________

    zi_1_r1      -20       -19.9        14.9           49.9            50     

pos = 8 ; key = ar_w_perc ;rown= 1 ,coln= 50
ar_w_perc :mu= 0.5 ,sd= 0.2969 ,min= 0.001 ,max= 0.999
               zi_1_C1    zi_2_C2     zi_25_c25    zi_49_c49    zi_50_c50
               _______    ________    _________    _________    _________

    zi_1_r1     0.001     0.021367     0.48982      0.97863       0.999  

pos = 9 ; key = ar_z ;rown= 1 ,coln= 15
ar_z :mu= 1.1347 ,sd= 0.69878 ,min= 0.34741 ,max= 2.567
               zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
               _______    _______    _______    _________    _________

    zi_1_r1    0.34741    0.40076    0.94436     2.2253        2.567  

pos = 11 ; key = mt_coh_wkb ;rown= 772 ,coln= 15
mt_coh_wkb :mu= 18.6145 ,sd= 22.3335 ,min= -20 ,max= 57.2773
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1           -20        -20        -20         -20          -20  
    zi_2_R2         -19.9      -19.9      -19.9       -19.9        -19.9  
    zi_386_r386    18.538     18.538     18.538      18.538       18.538  
    zi_771_r771    57.177     57.177     57.177      57.177       57.177  
    zi_772_r772    57.277     57.277     57.277      57.277       57.277  

pos = 12 ; key = mt_interp_coh_grid_mesh_w_perc ;rown= 50 ,coln= 772
mt_interp_coh_grid_mesh_w_perc :mu= 18.6145 ,sd= 22.3329 ,min= -20 ,max= 57.2773
                 zi_1_C1    zi_2_C2    zi_386_c386    zi_771_c771    zi_772_c772
                 _______    _______    ___________    ___________    ___________

    zi_1_R1        -20       -19.9       18.538         57.177         57.277   
    zi_2_R2        -20       -19.9       18.538         57.177         57.277   
    zi_25_r25      -20       -19.9       18.538         57.177         57.277   
    zi_49_r49      -20       -19.9       18.538         57.177         57.277   
    zi_50_r50      -20       -19.9       18.538         57.177         57.277   

pos = 13 ; key = mt_interp_coh_grid_mesh_z ;rown= 772 ,coln= 15
mt_interp_coh_grid_mesh_z :mu= 18.6145 ,sd= 22.3335 ,min= -20 ,max= 57.2773
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1           -20        -20        -20         -20          -20  
    zi_2_R2         -19.9      -19.9      -19.9       -19.9        -19.9  
    zi_386_r386    18.538     18.538     18.538      18.538       18.538  
    zi_771_r771    57.177     57.177     57.177      57.177       57.177  
    zi_772_r772    57.277     57.277     57.277      57.277       57.277  

pos = 14 ; key = mt_k ;rown= 50 ,coln= 700
mt_k :mu= 17.4893 ,sd= 15.6002 ,min= 0 ,max= 69.93
                 zi_1_C1    zi_2_C2     zi_350_c350    zi_699_c699    zi_700_c700
                 _______    ________    ___________    ___________    ___________

    zi_1_R1         0         0.0001       0.0349        0.0699           0.07   
    zi_2_R2         0       0.002143      0.74571        1.4936         1.4957   
    zi_25_r25       0       0.049122       17.094        34.238         34.287   
    zi_49_r49       0       0.098144       34.154        68.406         68.504   
    zi_50_r50       0        0.10019       34.865         69.83          69.93   

pos = 15 ; key = mt_w_by_interp_coh_interp_grid ;rown= 50 ,coln= 772
mt_w_by_interp_coh_interp_grid :mu= -0.69276 ,sd= 17.2218 ,min= -20 ,max= 57.2
                 zi_1_C1    zi_2_C2    zi_386_c386    zi_771_c771    zi_772_c772
                 _______    _______    ___________    ___________    ___________

    zi_1_R1        -20          -20      -19.961        -19.923        -19.923  
    zi_2_R2        -20      -19.998      -19.177        -18.351        -18.349  
    zi_25_r25      -20      -19.951      -1.1233         17.803         17.852  
    zi_49_r49      -20      -19.902       17.715         55.528         55.626  
    zi_50_r50      -20        -19.9         18.5           57.1           57.2  

pos = 16 ; key = mt_z_mesh_coh_interp_grid ;rown= 772 ,coln= 15
mt_z_mesh_coh_interp_grid :mu= 1.1347 ,sd= 0.67511 ,min= 0.34741 ,max= 2.567
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1        0.34741    0.40076    0.94436     2.2253        2.567  
    zi_2_R2        0.34741    0.40076    0.94436     2.2253        2.567  
    zi_386_r386    0.34741    0.40076    0.94436     2.2253        2.567  
    zi_771_r771    0.34741    0.40076    0.94436     2.2253        2.567  
    zi_772_r772    0.34741    0.40076    0.94436     2.2253        2.567  

pos = 17 ; key = mt_z_mesh_coh_wkb ;rown= 35000 ,coln= 15
mt_z_mesh_coh_wkb :mu= 1.1347 ,sd= 0.67508 ,min= 0.34741 ,max= 2.567
                       zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                       _______    _______    _______    _________    _________

    zi_1_R1            0.34741    0.40076    0.94436     2.2253        2.567  
    zi_2_R2            0.34741    0.40076    0.94436     2.2253        2.567  
    zi_17500_r17500    0.34741    0.40076    0.94436     2.2253        2.567  
    zi_34999_r34999    0.34741    0.40076    0.94436     2.2253        2.567  
    zi_35000_r35000    0.34741    0.40076    0.94436     2.2253        2.567  

pos = 18 ; key = mt_z_trans ;rown= 15 ,coln= 15
mt_z_trans :mu= 0.066667 ,sd= 0.095337 ,min= 0 ,max= 0.27902
                 zi_1_C1    zi_2_C2    zi_8_C8     zi_14_c14    zi_15_c15
                 _______    _______    ________    _________    _________

    zi_1_R1      0.26016    0.26831    0.000128           0            0 
    zi_2_R2      0.11232    0.19622    0.000989           0            0 
    zi_8_R8        2e-06    4.1e-05     0.27902     4.1e-05        2e-06 
    zi_14_r14          0          0    0.000989     0.19622      0.11232 
    zi_15_r15          0          0    0.000128     0.26831      0.26016 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                      i     idx    rowN        colN         mean        std          min         max  
                                      __    ___    _____    __________    ________    ________    _________    _______

    ar_a_meshk                         1     1       772             1      18.614      22.347          -20     57.277
    ar_ak_perc                         2     2         1            50         0.5      0.2969        0.001      0.999
    ar_interp_c_grid                   3     3         1    7.7257e+05      38.649      22.302         0.02     77.277
    ar_interp_coh_grid                 4     4         1           772      18.614      22.347          -20     57.277
    ar_k_mesha                         5     5       772             1           0           0            0          0
    ar_stationary                      6     6         1            15    0.066667    0.060897    0.0027089    0.16757
    ar_w_level                         7     7         1           700      14.979      20.244          -20         50
    ar_w_perc                          8     8         1            50         0.5      0.2969        0.001      0.999
    ar_z                               9     9         1            15      1.1347     0.69878      0.34741      2.567
    mt_coh_wkb                        10    11       772            15      18.614      22.334          -20     57.277
    mt_interp_coh_grid_mesh_w_perc    11    12        50           772      18.614      22.333          -20     57.277
    mt_interp_coh_grid_mesh_z         12    13       772            15      18.614      22.334          -20     57.277
    mt_k                              13    14        50           700      17.489        15.6            0      69.93
    mt_w_by_interp_coh_interp_grid    14    15        50           772    -0.69276      17.222          -20       57.2
    mt_z_mesh_coh_interp_grid         15    16       772            15      1.1347     0.67511      0.34741      2.567
    mt_z_mesh_coh_wkb                 16    17     35000            15      1.1347     0.67508      0.34741      2.567
    mt_z_trans                        17    18        15            15    0.066667    0.095337            0    0.27902

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                   i    idx    value
                   _    ___    _____

    it_ameshk_n    1    10      772 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: PARAM_MAP
----------------------------------------
  Map with properties:

        Count: 34
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = bl_default ; val = true
pos = 33 ; key = st_analytical_stationary_type ; val = eigenvector
pos = 34 ; key = st_model ; val = ipwkbz
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                              i     idx     value 
                              __    ___    _______

    fl_Amean                   1     2           1
    fl_alpha                   2     3        0.36
    fl_b_bd                    3     4         -20
    fl_beta                    4     5        0.94
    fl_c_min                   5     6        0.02
    fl_coh_interp_grid_gap     6     7         0.1
    fl_crra                    7     8         1.5
    fl_default_wprime          8     9           0
    fl_delta                   9    10        0.08
    fl_k_max                  10    11          70
    fl_k_min                  11    12           0
    fl_nan_replace            12    13       -9999
    fl_r_borr                 13    14       0.095
    fl_r_save                 14    15       0.025
    fl_tol_dist               15    16       1e-05
    fl_tol_pol                16    17       1e-05
    fl_tol_val                17    18       1e-05
    fl_w                      18    19     0.44365
    fl_w_interp_grid_gap      19    20         0.1
    fl_w_max                  20    21          50
    fl_w_min                  21    22         -20
    fl_z_mu                   22    23           0
    fl_z_rho                  23    24         0.8
    fl_z_sig                  24    25         0.2
    it_ak_perc_n              25    26          50
    it_c_interp_grid_gap      26    27      0.0001
    it_maxiter_dist           27    28        1000
    it_maxiter_val            28    29         250
    it_tol_pol_nochange       29    30          25
    it_w_perc_n               30    31          50
    it_z_n                    31    32          15

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                                     i    idx
                                     _    ___

    bl_default                       1     1 
    st_analytical_stationary_type    2    33 
    st_model                         3    34 

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: FUNC_MAP
----------------------------------------
  Map with properties:

        Count: 7
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = f_coh ; val = @(z,b,k)(f_prod(z,k)+k*(1-fl_delta)+fl_w+b.*(1+fl_r_save).*(b&gt;0)+b.*(1+fl_r_borr).*(b&lt;=0))
pos = 2 ; key = f_cons ; val = @(coh,bprime,kprime)(coh-kprime-bprime)
pos = 3 ; key = f_inc ; val = @(z,b,k)(f_prod(z,k)-(fl_delta)*k+fl_w+b.*(fl_r_save).*(b&gt;0)+b.*(fl_r_borr).*(b&lt;=0))
pos = 4 ; key = f_prod ; val = @(z,k)((fl_Amean.*(z)).*(k.^(fl_alpha)))
pos = 5 ; key = f_util_crra ; val = @(c)(((c).^(1-fl_crra)-1)./(1-fl_crra))
pos = 6 ; key = f_util_log ; val = @(c)log(c)
pos = 7 ; key = f_util_standin ; val = @(z,b,k)f_util_log((f_coh(z,b,k)-fl_b_bd).*((f_coh(z,b,k)-fl_b_bd)&gt;fl_c_min)+fl_c_min.*((f_coh(z,b,k)-fl_b_bd)&lt;=fl_c_min))
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Scalars in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                      i    idx    xFunction
                      _    ___    _________

    f_coh             1     1         1    
    f_cons            2     2         2    
    f_inc             3     3         3    
    f_prod            4     4         4    
    f_util_crra       5     5         5    
    f_util_log        6     6         6    
    f_util_standin    7     7         7    

----------------------------------------
----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Begin: Show all key and value pairs from container
CONTAINER NAME: RESULT_MAP
----------------------------------------
  Map with properties:

        Count: 11
      KeyType: char
    ValueType: any

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
----------------------------------------
pos = 1 ; key = ar_pol_diff_norm ;rown= 128 ,coln= 1
ar_pol_diff_norm :mu= 60.95 ,sd= 296.7255 ,min= 0 ,max= 2427.7329
                   zi_1_c1
                   _______

    zi_1_R1        2146.7 
    zi_2_R2        2427.7 
    zi_64_R64      2.7178 
    zi_127_r127         0 
    zi_128_r128         0 

pos = 2 ; key = ar_st_pol_names ; val = cl_mt_coh cl_mt_pol_a cl_mt_pol_k cl_mt_pol_c
pos = 3 ; key = ar_val_diff_norm ;rown= 128 ,coln= 1
ar_val_diff_norm :mu= 10.6776 ,sd= 29.7648 ,min= 0.0010481 ,max= 179.6801
                   zi_1_c1 
                   ________

    zi_1_R1          179.68
    zi_2_R2          173.52
    zi_64_R64       0.11449
    zi_127_r127    0.001117
    zi_128_r128    0.001048

pos = 4 ; key = cl_mt_coh ;rown= 772 ,coln= 15
cl_mt_coh :mu= 18.6145 ,sd= 22.3335 ,min= -20 ,max= 57.2773
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1           -20        -20        -20         -20          -20  
    zi_2_R2         -19.9      -19.9      -19.9       -19.9        -19.9  
    zi_386_r386    18.538     18.538     18.538      18.538       18.538  
    zi_771_r771    57.177     57.177     57.177      57.177       57.177  
    zi_772_r772    57.277     57.277     57.277      57.277       57.277  

pos = 5 ; key = cl_mt_cons ;rown= 772 ,coln= 15
cl_mt_cons :mu= 2.8778 ,sd= 2.8307 ,min= -20 ,max= 7.9469
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1           -20        -20        -20         -20          -20  
    zi_2_R2         -19.9      -19.9      -19.9       -19.9        -19.9  
    zi_386_r386    2.3933     2.3933     3.1782      3.1782       3.1782  
    zi_771_r771    7.9366     7.9366     7.9366      7.9366       7.9366  
    zi_772_r772    7.9469     7.9469     7.9469      7.9469       7.9469  

pos = 6 ; key = cl_mt_pol_a ;rown= 772 ,coln= 15
cl_mt_pol_a :mu= 9.4167 ,sd= 19.0743 ,min= -19.9995 ,max= 49.1323
                   zi_1_C1     zi_2_C2     zi_8_C8    zi_14_c14    zi_15_c15
                   ________    ________    _______    _________    _________

    zi_1_R1        -0.83469    -0.83469    -2.8714     -7.7596       -9.389 
    zi_2_R2        -0.83469    -0.83469    -2.8714     -7.7596       -9.389 
    zi_386_r386        13.9        13.9      8.843     0.20069      0.20069 
    zi_771_r771      47.761      46.351      42.12      31.437       29.428 
    zi_772_r772      47.849      46.437     42.656      32.316       29.492 

pos = 7 ; key = cl_mt_pol_c ;rown= 772 ,coln= 15
cl_mt_pol_c :mu= 2.8778 ,sd= 2.8307 ,min= -20 ,max= 7.9469
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1           -20        -20        -20         -20          -20  
    zi_2_R2         -19.9      -19.9      -19.9       -19.9        -19.9  
    zi_386_r386    2.3933     2.3933     3.1782      3.1782       3.1782  
    zi_771_r771    7.9366     7.9366     7.9366      7.9366       7.9366  
    zi_772_r772    7.9469     7.9469     7.9469      7.9469       7.9469  

pos = 8 ; key = cl_mt_pol_k ;rown= 772 ,coln= 15
cl_mt_pol_k :mu= 6.32 ,sd= 5.1688 ,min= 5.018e-07 ,max= 22.2439
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1        0.83469    0.83469    2.8714      7.7596        9.389  
    zi_2_R2        0.83469    0.83469    2.8714      7.7596        9.389  
    zi_386_r386     2.2447     2.2447    6.5171      15.159       15.159  
    zi_771_r771     1.4795     2.8897    7.1204      17.803       19.813  
    zi_772_r772     1.4814     2.8935    6.6741      17.014       19.838  

pos = 9 ; key = mt_pol_idx ;rown= 772 ,coln= 15
mt_pol_idx :mu= 19319.018 ,sd= 11146.9597 ,min= 1 ,max= 38595
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1             1          1          1           1            1  
    zi_2_R2            91         91         91          91           91  
    zi_386_r386     19297      19297      19296       19296        19296  
    zi_771_r771     38545      38545      38545       38545        38545  
    zi_772_r772     38595      38595      38595       38595        38595  

pos = 10 ; key = mt_pol_perc_change ;rown= 128 ,coln= 15
mt_pol_perc_change :mu= 0.09405 ,sd= 0.24872 ,min= 0 ,max= 1
                   zi_1_C1    zi_2_C2    zi_8_C8     zi_14_c14    zi_15_c15
                   _______    _______    ________    _________    _________

    zi_1_R1           1          1              1           1            1 
    zi_2_R2           1          1              1           1            1 
    zi_64_R64         0          0       0.001295    0.001295     0.001295 
    zi_127_r127       0          0              0           0            0 
    zi_128_r128       0          0              0           0            0 

pos = 11 ; key = mt_val ;rown= 772 ,coln= 15
mt_val :mu= 8.522 ,sd= 7.1189 ,min= -9.948 ,max= 16.5907
                   zi_1_C1    zi_2_C2    zi_8_C8    zi_14_c14    zi_15_c15
                   _______    _______    _______    _________    _________

    zi_1_R1        -9.948     -9.7084    -7.5157     -4.4637      -3.9723 
    zi_2_R2        -9.948     -9.7084    -7.5157     -4.4637      -3.9723 
    zi_386_r386    10.256      10.359      11.26      12.589       12.823 
    zi_771_r771    15.403      15.446     15.828      16.465       16.585 
    zi_772_r772    15.412      15.454     15.835      16.471       16.591 

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Matrix in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                          i     idx    rowN    colN     mean        std         min        max  
                          __    ___    ____    ____    _______    _______    _________    ______

    ar_pol_diff_norm       1     1     128       1       60.95     296.73            0    2427.7
    ar_val_diff_norm       2     3     128       1      10.678     29.765    0.0010481    179.68
    cl_mt_coh              3     4     772      15      18.614     22.334          -20    57.277
    cl_mt_cons             4     5     772      15      2.8778     2.8307          -20    7.9469
    cl_mt_pol_a            5     6     772      15      9.4167     19.074      -19.999    49.132
    cl_mt_pol_c            6     7     772      15      2.8778     2.8307          -20    7.9469
    cl_mt_pol_k            7     8     772      15        6.32     5.1688    5.018e-07    22.244
    mt_pol_idx             8     9     772      15       19319      11147            1     38595
    mt_pol_perc_change     9    10     128      15     0.09405    0.24872            0         1
    mt_val                10    11     772      15       8.522     7.1189       -9.948    16.591

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Strings in Container and Sizes and Basic Statistics
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                       i    idx
                       _    ___

    ar_st_pol_names    1     2 

</pre><img vspace="5" hspace="5" src="ff_ipwkbz_ds_wrapper_01.png" alt=""> <img vspace="5" hspace="5" src="ff_ipwkbz_ds_wrapper_02.png" alt=""> <h2 id="8">Derive Distribution</h2><pre class="codeinput"><span class="keyword">if</span> (strcmp(st_analytical_stationary_type, <span class="string">'loop'</span>))

    result_map = ff_iwkz_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'vector'</span>))

    result_map = ff_iwkz_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'eigenvector'</span>))

    result_map = ff_iwkz_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">end</span>
</pre><pre class="codeoutput">----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_coh
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    6.4272

fl_choice_sd
    3.3965

fl_choice_coefofvar
    0.5285

fl_choice_prob_zero
   5.4575e-05

fl_choice_prob_below_zero
    0.0037

fl_choice_prob_above_zero
    0.9962

fl_choice_prob_max
   6.5625e-14

tb_prob_drv
    percentiles    cl_mt_cohPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    _________________________    ________________________________

        0.1                 -8.3582                        -0.0021796           
          1                  1.9789                         -0.001509           
          5                   2.581                          0.017304           
         10                  2.7817                          0.034882           
         15                  3.0828                          0.060615           
         20                  3.4843                          0.083215           
         25                  4.0864                           0.11687           
         35                    5.09                           0.18945           
         50                   6.194                           0.31696           
         65                  6.9969                            0.4827           
         75                   7.599                           0.59018           
         80                  8.1008                           0.64528           
         85                  9.0041                           0.71556           
         90                  10.309                           0.78744           
         95                  12.818                           0.87646           
         99                  18.338                           0.96747           
       99.9                  25.563                           0.99575           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_a
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    0.0797

fl_choice_sd
    1.4273

fl_choice_coefofvar
   17.9001

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
    0.5311

fl_choice_prob_above_zero
    0.4689

fl_choice_prob_max
   8.4014e-31

tb_prob_drv
    percentiles    cl_mt_pol_aPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                    -11.52                          -0.2058            
          1                   -2.4489                         -0.65186            
          5                   -1.2977                          -1.5587            
         10                  -0.84548                          -2.2096            
         15                   -0.6053                          -2.6643            
         20                  -0.32368                          -2.9391            
         25                  -0.23416                          -3.1103            
         35                  -0.13608                          -3.3279            
         50                 -0.011124                          -3.4499            
         65                   0.11616                           -3.347            
         75                   0.19514                          -3.1765            
         80                   0.26972                          -3.0061            
         85                   0.35923                          -2.8411            
         90                    0.7259                           -2.539            
         95                    2.0357                          -1.7533            
         99                    5.9255                        -0.042567            
       99.9                    11.476                          0.83022            

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_k
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    4.5420

fl_choice_sd
    2.1796

fl_choice_coefofvar
    0.4799

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   1.7253e-12

tb_prob_drv
    percentiles    cl_mt_pol_kPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  1.1287                          0.00017042           
          1                  1.3259                           0.0028199           
          5                  1.7925                            0.019267           
         10                  2.1973                              0.0432           
         15                  2.2747                            0.066141           
         20                  2.6716                            0.091372           
         25                  2.8412                             0.12333           
         35                  3.4731                             0.19337           
         50                  4.5134                             0.32838           
         65                  5.1246                             0.49169           
         75                  5.2206                             0.59989           
         80                  5.7401                             0.65734           
         85                  6.3167                             0.72259           
         90                  7.2197                             0.79679           
         95                  8.8105                             0.88129           
         99                  12.582                             0.96873           
       99.9                  16.707                             0.99595           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_c
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    1.8055

fl_choice_sd
    0.5708

fl_choice_coefofvar
    0.3161

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
   1.3204e-04

fl_choice_prob_above_zero
    0.9999

fl_choice_prob_max
   6.5625e-14

tb_prob_drv
    percentiles    cl_mt_pol_cPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  0.90053                        -0.00094947           
          1                  0.92985                          0.0061673           
          5                   0.9466                           0.029778           
         10                   1.4148                           0.063372           
         15                   1.4335                            0.10107           
         20                   1.4584                            0.13615           
         25                   1.4958                            0.18244           
         35                   1.5581                            0.26694           
         50                   1.6329                            0.40336           
         65                   1.6953                            0.53229           
         75                   2.2678                            0.66161           
         80                   2.3092                            0.71568           
         85                   2.3837                            0.78068           
         90                   2.4995                            0.84849           
         95                   2.7065                            0.91911           
         99                     3.17                            0.98125           
       99.9                   3.7907                            0.99784           

xxx All Variables PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
                     mean        sd       coefofvar       min        max        pYis0         pYls0        pYgr0      pYisMINY      pYisMAXY      p0_1        p1         p5         p10         p15        p20         p25         p35          p50         p65        p75        p80        p85       p90       p95       p99      p99_9 
                   ________    _______    _________    _________    ______    __________    __________    _______    __________    __________    _______    _______    _______    ________    _______    ________    ________    ________    _________    _______    _______    _______    _______    ______    ______    ______    ______

    cl_mt_coh        6.4272     3.3965     0.52845           -20    57.277    5.4575e-05     0.0037078    0.99624    0.00013204    6.5625e-14    -8.3582     1.9789      2.581      2.7817     3.0828      3.4843      4.0864        5.09        6.194     6.9969      7.599     8.1008     9.0041    10.309    12.818    18.338    25.563
    cl_mt_pol_a    0.079738     1.4273        17.9       -19.999    49.132             0       0.53108    0.46892    1.3549e-14    8.4014e-31     -11.52    -2.4489    -1.2977    -0.84548    -0.6053    -0.32368    -0.23416    -0.13608    -0.011124    0.11616    0.19514    0.26972    0.35923    0.7259    2.0357    5.9255    11.476
    cl_mt_pol_k       4.542     2.1796     0.47988     5.018e-07    22.244             0             0          1    1.3549e-14    1.7253e-12     1.1287     1.3259     1.7925      2.1973     2.2747      2.6716      2.8412      3.4731       4.5134     5.1246     5.2206     5.7401     6.3167    7.2197    8.8105    12.582    16.707
    cl_mt_pol_c      1.8055    0.57078     0.31614           -20    7.9469             0    0.00013204    0.99987    0.00013204    6.5625e-14    0.90053    0.92985     0.9466      1.4148     1.4335      1.4584      1.4958      1.5581       1.6329     1.6953     2.2678     2.3092     2.3837    2.4995    2.7065      3.17    3.7907

xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
                   fracByP0_1     fracByP1     fracByP5    fracByP10    fracByP15    fracByP20    fracByP25    fracByP35    fracByP50    fracByP65    fracByP75    fracByP80    fracByP85    fracByP90    fracByP95    fracByP99    fracByP99_9
                   ___________    _________    ________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    ___________

    cl_mt_coh       -0.0021796    -0.001509    0.017304    0.034882     0.060615     0.083215      0.11687      0.18945      0.31696       0.4827      0.59018      0.64528      0.71556      0.78744      0.87646       0.96747      0.99575  
    cl_mt_pol_a        -0.2058     -0.65186     -1.5587     -2.2096      -2.6643      -2.9391      -3.1103      -3.3279      -3.4499       -3.347      -3.1765      -3.0061      -2.8411       -2.539      -1.7533     -0.042567      0.83022  
    cl_mt_pol_k     0.00017042    0.0028199    0.019267      0.0432     0.066141     0.091372      0.12333      0.19337      0.32838      0.49169      0.59989      0.65734      0.72259      0.79679      0.88129       0.96873      0.99595  
    cl_mt_pol_c    -0.00094947    0.0061673    0.029778    0.063372      0.10107      0.13615      0.18244      0.26694      0.40336      0.53229      0.66161      0.71568      0.78068      0.84849      0.91911       0.98125      0.99784  

</pre><h2 id="9">End Profiler and Timer</h2><p>End Timer</p><pre class="codeinput"><span class="keyword">if</span> (bl_time)
    toc;
<span class="keyword">end</span>

<span class="comment">% End Profile</span>
<span class="keyword">if</span> (it_param_set == 7)
    profile <span class="string">off</span>
    profile <span class="string">viewer</span>
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile(<span class="string">'info'</span>), strcat(st_profile_path, st_file_name));
<span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Derive Distributions for Risky + Safe Asset (Save + Borr) Interpolated-Percentage (Wrapper)
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*

%%
function [result_map] = ff_ipwkbz_ds_wrapper(varargin)
%% FF_IPWKBZ_DS_WRAPPER finds the stationary asset distributions
% This is a warpper function.

%% Default
% # it_subset = 5 is basic invoke quick test
% # it_subset = 6 is invoke full test
% # it_subset = 7 is profiling invoke
% # it_subset = 8 is matlab publish
% # it_subset = 9 is invoke operational (only final stats) and coh graph

it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_ipwkbz_set_default_param(it_param_set);

% parameters can be set inside ffs_ipwkz_set_default_param or updated here
% param_map('it_w_perc_n') = 50;
% param_map('it_ak_perc_n') = param_map('it_w_perc_n');
% param_map('it_z_n') = 15;
% param_map('fl_coh_interp_grid_gap') = 0.025;
% param_map('it_c_interp_grid_gap') = 0.001;
% param_map('fl_w_interp_grid_gap') = 0.25;
% param_map('it_w_perc_n') = 100;
% param_map('it_ak_perc_n') = param_map('it_w_perc_n');
% param_map('it_z_n') = 11;
% param_map('fl_coh_interp_grid_gap') = 0.1;
% param_map('it_c_interp_grid_gap') = 10^-4;
% param_map('fl_w_interp_grid_gap') = 0.1;
% param_map('it_w_perc_n') = 100;
% param_map('fl_r_save') = 0.025;
% param_map('fl_r_borr') = 0.025;

% These parameters below for comparison with abz_fibs model
% param_map('fl_r_save') = 0.025;
% param_map('fl_r_borr') = 0.095;
% param_map('fl_c_min') = 0.02;

% param_map('st_analytical_stationary_type') = 'loop';
% param_map('st_analytical_stationary_type') = 'vector';
param_map('st_analytical_stationary_type') = 'eigenvector';

% get armt and func map
[armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override); % 1 for override
default_params = {param_map support_map armt_map func_map};

%% Parse Parameters 1

% if varargin only has param_map and support_map,
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
if params_len >= 1 && params_len <= 2
    % If override param_map, re-generate armt and func if they are not
    % provided
    bl_input_override = true;
    [armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override);
else
    % Override all
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
end

% if profile, profile DP + Dist here
support_map('bl_profile_dist') = false;

% append function name
st_func_name = 'ff_ipwkbz_ds_wrapper';
support_map('st_profile_name_main') = [st_func_name support_map('st_profile_name_main')];
support_map('st_mat_name_main') = [st_func_name support_map('st_mat_name_main')];
support_map('st_img_name_main') = [st_func_name support_map('st_img_name_main')];

%% Parse Parameters

% param_map
params_group = values(param_map, {'st_analytical_stationary_type'});
[st_analytical_stationary_type] = params_group{:};

% support_map
params_group = values(support_map, ...
    {'st_profile_path', 'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix','bl_time'});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};

%% Start Profiler and Timer
% Start Profile
if (it_param_set == 7)
    close all;
    profile off;
    profile on;
end

% Start Timer
if (bl_time)
    tic;
end

%% Solve DP

bl_input_override = true;
result_map = ff_ipwkbz_vf_vecsv(param_map, support_map, armt_map, func_map);

%% Derive Distribution

if (strcmp(st_analytical_stationary_type, 'loop'))

    result_map = ff_iwkz_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

elseif (strcmp(st_analytical_stationary_type, 'vector'))

    result_map = ff_iwkz_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

elseif (strcmp(st_analytical_stationary_type, 'eigenvector'))

    result_map = ff_iwkz_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

end

%% End Profiler and Timer
% End Timer
if (bl_time)
    toc;
end

% End Profile
if (it_param_set == 7)
    profile off
    profile viewer
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile('info'), strcat(st_profile_path, st_file_name));
end
end

##### SOURCE END #####
--></body></html>