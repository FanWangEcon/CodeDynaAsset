
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Derive Distributions for Risky + Safe Asset (Save + Borr) Interpolated-Percentage (Wrapper)</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-04"><meta name="DC.source" content="ff_ipwkbz_ds_wrapper.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Derive Distributions for Risky + Safe Asset (Save + Borr) Interpolated-Percentage (Wrapper)</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Assets Repository</a> Table of Content.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">FF_IPWKBZ_DS_WRAPPER finds the stationary asset distributions</a></li><li><a href="#3">Default</a></li><li><a href="#4">Parse Parameters 1</a></li><li><a href="#5">Parse Parameters</a></li><li><a href="#6">Start Profiler and Timer</a></li><li><a href="#7">Solve DP</a></li><li><a href="#8">Derive Distribution</a></li><li><a href="#9">End Profiler and Timer</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> [result_map] = ff_ipwkbz_ds_wrapper(varargin)
</pre><h2 id="2">FF_IPWKBZ_DS_WRAPPER finds the stationary asset distributions</h2><p>This is a warpper function.</p><h2 id="3">Default</h2><div><ol><li>it_subset = 5 is basic invoke quick test</li><li>it_subset = 6 is invoke full test</li><li>it_subset = 7 is profiling invoke</li><li>it_subset = 8 is matlab publish</li><li>it_subset = 9 is invoke operational (only final stats) and coh graph</li></ol></div><pre class="codeinput">it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_ipwkbz_set_default_param(it_param_set);

<span class="comment">% parameters can be set inside ffs_ipwkz_set_default_param or updated here</span>
<span class="comment">% param_map('it_w_perc_n') = 50;</span>
<span class="comment">% param_map('it_ak_perc_n') = param_map('it_w_perc_n');</span>
<span class="comment">% param_map('it_z_n') = 15;</span>
<span class="comment">% param_map('fl_coh_interp_grid_gap') = 0.025;</span>
<span class="comment">% param_map('it_c_interp_grid_gap') = 0.001;</span>
<span class="comment">% param_map('fl_w_interp_grid_gap') = 0.25;</span>
<span class="comment">% param_map('it_w_perc_n') = 100;</span>
<span class="comment">% param_map('it_ak_perc_n') = param_map('it_w_perc_n');</span>
<span class="comment">% param_map('it_z_n') = 11;</span>
<span class="comment">% param_map('fl_coh_interp_grid_gap') = 0.1;</span>
<span class="comment">% param_map('it_c_interp_grid_gap') = 10^-4;</span>
<span class="comment">% param_map('fl_w_interp_grid_gap') = 0.1;</span>
<span class="comment">% param_map('it_w_perc_n') = 100;</span>
<span class="comment">% param_map('fl_r_save') = 0.025;</span>
<span class="comment">% param_map('fl_r_borr') = 0.025;</span>

<span class="comment">% param_map('st_analytical_stationary_type') = 'loop';</span>
<span class="comment">% param_map('st_analytical_stationary_type') = 'vector';</span>
param_map(<span class="string">'st_analytical_stationary_type'</span>) = <span class="string">'eigenvector'</span>;

<span class="comment">% get armt and func map</span>
[armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override); <span class="comment">% 1 for override</span>
default_params = {param_map support_map armt_map func_map};
</pre><h2 id="4">Parse Parameters 1</h2><pre class="codeinput"><span class="comment">% if varargin only has param_map and support_map,</span>
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
<span class="keyword">if</span> params_len &gt;= 1 &amp;&amp; params_len &lt;= 2
    <span class="comment">% If override param_map, re-generate armt and func if they are not</span>
    <span class="comment">% provided</span>
    bl_input_override = true;
    [armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override);
<span class="keyword">else</span>
    <span class="comment">% Override all</span>
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
<span class="keyword">end</span>

<span class="comment">% if profile, profile DP + Dist here</span>
support_map(<span class="string">'bl_profile_dist'</span>) = false;

<span class="comment">% append function name</span>
st_func_name = <span class="string">'ff_ipwkz_ds_wrapper'</span>;
support_map(<span class="string">'st_profile_name_main'</span>) = [st_func_name support_map(<span class="string">'st_profile_name_main'</span>)];
support_map(<span class="string">'st_mat_name_main'</span>) = [st_func_name support_map(<span class="string">'st_mat_name_main'</span>)];
support_map(<span class="string">'st_img_name_main'</span>) = [st_func_name support_map(<span class="string">'st_img_name_main'</span>)];
</pre><h2 id="5">Parse Parameters</h2><pre class="codeinput"><span class="comment">% param_map</span>
params_group = values(param_map, {<span class="string">'st_analytical_stationary_type'</span>});
[st_analytical_stationary_type] = params_group{:};

<span class="comment">% support_map</span>
params_group = values(support_map, <span class="keyword">...</span>
    {<span class="string">'st_profile_path'</span>, <span class="string">'st_profile_prefix'</span>, <span class="string">'st_profile_name_main'</span>, <span class="string">'st_profile_suffix'</span>,<span class="string">'bl_time'</span>});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};
</pre><h2 id="6">Start Profiler and Timer</h2><p>Start Profile</p><pre class="codeinput"><span class="keyword">if</span> (it_param_set == 7)
    close <span class="string">all</span>;
    profile <span class="string">off</span>;
    profile <span class="string">on</span>;
<span class="keyword">end</span>

<span class="comment">% Start Timer</span>
<span class="keyword">if</span> (bl_time)
    tic;
<span class="keyword">end</span>
</pre><h2 id="7">Solve DP</h2><pre class="codeinput">bl_input_override = true;
result_map = ff_ipwkbz_vf_vecsv(param_map, support_map, armt_map, func_map);
</pre><img vspace="5" hspace="5" src="ff_ipwkbz_ds_wrapper_01.png" alt=""> <img vspace="5" hspace="5" src="ff_ipwkbz_ds_wrapper_02.png" alt=""> <h2 id="8">Derive Distribution</h2><pre class="codeinput"><span class="keyword">if</span> (strcmp(st_analytical_stationary_type, <span class="string">'loop'</span>))

    result_map = ff_iwkz_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'vector'</span>))

    result_map = ff_iwkz_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">elseif</span> (strcmp(st_analytical_stationary_type, <span class="string">'eigenvector'</span>))

    result_map = ff_iwkz_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);

<span class="keyword">end</span>
</pre><pre class="codeoutput">----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_coh
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
  -13.2540

fl_choice_sd
    3.5747

fl_choice_coefofvar
   -0.2697

fl_choice_prob_zero
   1.1199e-04

fl_choice_prob_below_zero
    0.9925

fl_choice_prob_above_zero
    0.0074

fl_choice_prob_max
   3.0916e-18

tb_prob_drv
    percentiles    cl_mt_pol_cohPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    _____________________________    ________________________________

        0.1                   -18.695                          0.0020337            
          1                   -18.093                           0.017519            
          5                   -17.391                           0.070261            
         10                   -16.889                            0.13396            
         15                   -16.487                            0.19786            
         20                   -16.086                            0.26501            
         25                   -15.685                            0.33584            
         35                   -15.082                            0.44297            
         50                   -14.079                            0.60394            
         65                   -12.774                            0.75967            
         75                    -11.67                            0.84623            
         80                   -10.968                             0.8861            
         85                    -9.964                            0.92734            
         90                   -8.6593                            0.96025            
         95                    -6.351                            0.98871            
         99                  -0.93159                             1.0017            
       99.9                     6.194                             1.0007            

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_a
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
  -19.4461

fl_choice_sd
    1.5257

fl_choice_coefofvar
   -0.0785

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
    0.9999

fl_choice_prob_above_zero
   7.0211e-05

fl_choice_prob_max
   1.6784e-35

tb_prob_drv
    percentiles    cl_mt_pol_aPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  -19.999                         0.0013075            
          1                  -19.999                          0.011367            
          5                  -19.998                          0.051535            
         10                  -19.998                           0.10619            
         15                  -19.997                           0.15457            
         20                  -19.997                           0.21053            
         25                  -19.997                            0.2594            
         35                  -19.996                           0.36819            
         50                  -19.995                           0.52029            
         65                  -19.993                           0.67086            
         75                  -19.986                           0.77119            
         80                  -19.589                           0.82238            
         85                   -18.98                           0.87202            
         90                  -18.093                           0.91949            
         95                  -16.437                           0.96426            
         99                  -12.474                           0.99496            
       99.9                  -6.8388                           0.99978            

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_k
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    4.8431

fl_choice_sd
    2.3905

fl_choice_coefofvar
    0.4936

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
     0

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   1.2621e-16

tb_prob_drv
    percentiles    cl_mt_pol_kPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  0.90388                         0.00021171           
          1                   1.3599                          0.0026348           
          5                   1.9139                           0.016911           
         10                   2.3453                           0.040662           
         15                   2.6417                           0.064728           
         20                   2.9506                           0.097555           
         25                   3.1079                            0.12694           
         35                   3.6518                            0.19772           
         50                   4.3654                            0.31894           
         65                   5.2403                            0.46643           
         75                   6.1399                            0.58842           
         80                   6.3164                            0.64593           
         85                   7.2563                              0.717           
         90                   7.7692                            0.79294           
         95                   9.1139                            0.88191           
         99                   12.812                            0.96996           
       99.9                   17.946                            0.99613           

----------------------------------------
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
Summary Statistics for: cl_mt_pol_c
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
----------------------------------------
fl_choice_mean
    1.3490

fl_choice_sd
    0.4785

fl_choice_coefofvar
    0.3547

fl_choice_prob_zero
     0

fl_choice_prob_below_zero
  -1.1905e-33

fl_choice_prob_above_zero
    1.0000

fl_choice_prob_max
   3.0916e-18

tb_prob_drv
    percentiles    cl_mt_pol_cPercentileValues    fracOfSumHeldBelowThisPercentile
    ___________    ___________________________    ________________________________

        0.1                  0.39367                         0.00027833           
          1                  0.51691                          0.0035126           
          5                  0.68922                           0.021659           
         10                  0.79048                           0.050393           
         15                  0.86202                            0.08192           
         20                  0.93591                            0.11603           
         25                  0.99375                            0.15199           
         35                   1.1083                            0.22853           
         50                   1.2874                            0.36543           
         65                    1.479                               0.52           
         75                   1.6426                            0.62889           
         80                   1.7254                            0.69184           
         85                   1.8487                            0.75998           
         90                   1.9977                            0.83105           
         95                   2.2376                            0.90706           
         99                   2.7006                             0.9782           
       99.9                   3.2564                            0.99746           

xxx All Variables PERCENTILES AND STATS xxx
tb_outcomes_meansdperc: mean, sd, percentiles
                      mean        sd       coefofvar      min        max        pYis0          pYls0         pYgr0        pYisMINY       pYisMAXY      p0_1        p1         p5         p10        p15        p20        p25        p35        p50        p65        p75        p80       p85        p90        p95        p99        p99_9 
                     _______    _______    _________    ________    ______    __________    ___________    __________    ___________    __________    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    _______    ______    _______    _______    ________    _______

    cl_mt_pol_coh    -13.254     3.5747     -0.26971         -20    57.277    0.00011199        0.99247     0.0074226    -1.1905e-33    3.0916e-18    -18.695    -18.093    -17.391    -16.889    -16.487    -16.086    -15.685    -15.082    -14.079    -12.774     -11.67    -10.968    -9.964    -8.6593     -6.351    -0.93159      6.194
    cl_mt_pol_a      -19.446     1.5257    -0.078457         -20     49.04             0        0.99993    7.0211e-05    -1.7514e-35    1.6784e-35    -19.999    -19.999    -19.998    -19.998    -19.997    -19.997    -19.997    -19.996    -19.995    -19.993    -19.986    -19.589    -18.98    -18.093    -16.437     -12.474    -6.8388
    cl_mt_pol_k       4.8431     2.3905      0.49359    0.079739    22.244             0              0             1    -1.7514e-35    1.2621e-16    0.90388     1.3599     1.9139     2.3453     2.6417     2.9506     3.1079     3.6518     4.3654     5.2403     6.1399     6.3164    7.2563     7.7692     9.1139      12.812     17.946
    cl_mt_pol_c        1.349    0.47849       0.3547         -20    7.9469             0    -1.1905e-33             1    -2.7771e-34    3.0916e-18    0.39367    0.51691    0.68922    0.79048    0.86202    0.93591    0.99375     1.1083     1.2874      1.479     1.6426     1.7254    1.8487     1.9977     2.2376      2.7006     3.2564

xxx All Variables Fraction of Y Held up to Percentile xxx
tb_outcomes_fracheld: fraction of asset/income/etc held by hh up to this percentile
                     fracByP0_1    fracByP1     fracByP5    fracByP10    fracByP15    fracByP20    fracByP25    fracByP35    fracByP50    fracByP65    fracByP75    fracByP80    fracByP85    fracByP90    fracByP95    fracByP99    fracByP99_9
                     __________    _________    ________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    _________    ___________

    cl_mt_pol_coh     0.0020337     0.017519    0.070261     0.13396      0.19786      0.26501      0.33584      0.44297      0.60394      0.75967      0.84623       0.8861      0.92734      0.96025      0.98871       1.0017        1.0007  
    cl_mt_pol_a       0.0013075     0.011367    0.051535     0.10619      0.15457      0.21053       0.2594      0.36819      0.52029      0.67086      0.77119      0.82238      0.87202      0.91949      0.96426      0.99496       0.99978  
    cl_mt_pol_k      0.00021171    0.0026348    0.016911    0.040662     0.064728     0.097555      0.12694      0.19772      0.31894      0.46643      0.58842      0.64593        0.717      0.79294      0.88191      0.96996       0.99613  
    cl_mt_pol_c      0.00027833    0.0035126    0.021659    0.050393      0.08192      0.11603      0.15199      0.22853      0.36543         0.52      0.62889      0.69184      0.75998      0.83105      0.90706       0.9782       0.99746  

</pre><h2 id="9">End Profiler and Timer</h2><p>End Timer</p><pre class="codeinput"><span class="keyword">if</span> (bl_time)
    toc;
<span class="keyword">end</span>

<span class="comment">% End Profile</span>
<span class="keyword">if</span> (it_param_set == 7)
    profile <span class="string">off</span>
    profile <span class="string">viewer</span>
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile(<span class="string">'info'</span>), strcat(st_profile_path, st_file_name));
<span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">
ans = 

  Map with properties:

        Count: 14
      KeyType: char
    ValueType: any

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Derive Distributions for Risky + Safe Asset (Save + Borr) Interpolated-Percentage (Wrapper)
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Assets Repository>
% Table of Content.*

%%
function [result_map] = ff_ipwkbz_ds_wrapper(varargin)
%% FF_IPWKBZ_DS_WRAPPER finds the stationary asset distributions
% This is a warpper function.

%% Default
% # it_subset = 5 is basic invoke quick test
% # it_subset = 6 is invoke full test
% # it_subset = 7 is profiling invoke
% # it_subset = 8 is matlab publish
% # it_subset = 9 is invoke operational (only final stats) and coh graph

it_param_set = 8;
bl_input_override = true;
[param_map, support_map] = ffs_ipwkbz_set_default_param(it_param_set);

% parameters can be set inside ffs_ipwkz_set_default_param or updated here
% param_map('it_w_perc_n') = 50;
% param_map('it_ak_perc_n') = param_map('it_w_perc_n');
% param_map('it_z_n') = 15;
% param_map('fl_coh_interp_grid_gap') = 0.025;
% param_map('it_c_interp_grid_gap') = 0.001;
% param_map('fl_w_interp_grid_gap') = 0.25;
% param_map('it_w_perc_n') = 100;
% param_map('it_ak_perc_n') = param_map('it_w_perc_n');
% param_map('it_z_n') = 11;
% param_map('fl_coh_interp_grid_gap') = 0.1;
% param_map('it_c_interp_grid_gap') = 10^-4;
% param_map('fl_w_interp_grid_gap') = 0.1;
% param_map('it_w_perc_n') = 100;
% param_map('fl_r_save') = 0.025;
% param_map('fl_r_borr') = 0.025;

% param_map('st_analytical_stationary_type') = 'loop';
% param_map('st_analytical_stationary_type') = 'vector';
param_map('st_analytical_stationary_type') = 'eigenvector';

% get armt and func map
[armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override); % 1 for override
default_params = {param_map support_map armt_map func_map};

%% Parse Parameters 1

% if varargin only has param_map and support_map,
params_len = length(varargin);
[default_params{1:params_len}] = varargin{:};
param_map = [param_map; default_params{1}];
support_map = [support_map; default_params{2}];
if params_len >= 1 && params_len <= 2
    % If override param_map, re-generate armt and func if they are not
    % provided
    bl_input_override = true;
    [armt_map, func_map] = ffs_ipwkbz_get_funcgrid(param_map, support_map, bl_input_override);
else
    % Override all
    armt_map = [armt_map; default_params{3}];
    func_map = [func_map; default_params{4}];
end

% if profile, profile DP + Dist here
support_map('bl_profile_dist') = false;

% append function name
st_func_name = 'ff_ipwkz_ds_wrapper';
support_map('st_profile_name_main') = [st_func_name support_map('st_profile_name_main')];
support_map('st_mat_name_main') = [st_func_name support_map('st_mat_name_main')];
support_map('st_img_name_main') = [st_func_name support_map('st_img_name_main')];

%% Parse Parameters

% param_map
params_group = values(param_map, {'st_analytical_stationary_type'});
[st_analytical_stationary_type] = params_group{:};

% support_map
params_group = values(support_map, ...
    {'st_profile_path', 'st_profile_prefix', 'st_profile_name_main', 'st_profile_suffix','bl_time'});
[st_profile_path, st_profile_prefix, st_profile_name_main, st_profile_suffix, bl_time] = params_group{:};

%% Start Profiler and Timer
% Start Profile
if (it_param_set == 7)
    close all;
    profile off;
    profile on;
end

% Start Timer
if (bl_time)
    tic;
end

%% Solve DP

bl_input_override = true;
result_map = ff_ipwkbz_vf_vecsv(param_map, support_map, armt_map, func_map);

%% Derive Distribution

if (strcmp(st_analytical_stationary_type, 'loop'))
    
    result_map = ff_iwkz_ds(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
elseif (strcmp(st_analytical_stationary_type, 'vector'))
    
    result_map = ff_iwkz_ds_vec(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
elseif (strcmp(st_analytical_stationary_type, 'eigenvector'))
    
    result_map = ff_iwkz_ds_vecsv(param_map, support_map, armt_map, func_map, result_map, bl_input_override);
    
end

%% End Profiler and Timer
% End Timer
if (bl_time)
    toc;
end

% End Profile
if (it_param_set == 7)
    profile off
    profile viewer
    st_file_name = [st_profile_prefix st_profile_name_main st_profile_suffix];
    profsave(profile('info'), strcat(st_profile_path, st_file_name));
end
end

##### SOURCE END #####
--></body></html>